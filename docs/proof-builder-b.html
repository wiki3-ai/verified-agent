<!DOCTYPE html>
<html lang="en" vocab="http://schema.org/" typeof="SoftwareSourceCode">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>proof-builder-b - ACL2 Book</title>
  <meta property="name" content="proof-builder-b">
  <meta property="programmingLanguage" content="ACL2">
  
<style>
/* ACL2 Book HTML Documentation Styles */
/* Generated by cert2 - build2 system */

/* Dark theme (default) */
:root {
  --bg: #1e1e2e;
  --fg: #cdd6f4;
  --comment: #6c7086;
  --keyword: #cba6f7;
  --string: #a6e3a1;
  --function: #89b4fa;
  --type: #f9e2af;
  --link: #89dceb;
  --link-hover: #f5c2e7;
  --highlight: rgba(137, 180, 250, 0.2);
  --border: #313244;
  --block-bg: rgba(49, 50, 68, 0.5);
  --btn-bg: #313244;
  --btn-hover: rgba(137, 180, 250, 0.2);
}

/* Light theme */
[data-theme="light"] {
  --bg: #eff1f5;
  --fg: #4c4f69;
  --comment: #6c6f85;
  --keyword: #8839ef;
  --string: #40a02b;
  --function: #1e66f5;
  --type: #df8e1d;
  --link: #04a5e5;
  --link-hover: #ea76cb;
  --highlight: rgba(30, 102, 245, 0.15);
  --border: #ccd0da;
  --block-bg: rgba(204, 208, 218, 0.3);
  --btn-bg: #ccd0da;
  --btn-hover: rgba(30, 102, 245, 0.15);
}

body {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 20px;
  line-height: 1.6;
  font-size: 14px;
  transition: background 0.1s, color 0.1s;
}

/* Controls toolbar */
.controls-left {
  position: fixed;
  top: 10px;
  left: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
  transition: transform 0.1s ease;
}

.controls-right {
  position: fixed;
  top: 10px;
  right: 20px;
  display: flex;
  gap: 8px;
  align-items: center;
  z-index: 200;
}

.control-btn {
  padding: 6px 12px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: all 0.1s;
}

.control-btn:hover {
  background: var(--btn-hover);
  border-color: var(--link);
}

.name-filter {
  padding: 6px 10px;
  background: var(--btn-bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--fg);
  font-family: inherit;
  font-size: 13px;
  width: 150px;
  transition: all 0.1s;
}

.name-filter:focus {
  outline: none;
  border-color: var(--link);
  width: 200px;
}

.name-filter::placeholder {
  color: var(--comment);
}

.regex-label {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--comment);
  font-size: 12px;
  cursor: pointer;
}

.regex-label input {
  cursor: pointer;
}

.book-header {
  border-bottom: 2px solid var(--border);
  padding-bottom: 20px;
  margin-bottom: 20px;
}

.book-header h1 {
  color: var(--keyword);
  margin: 0;
}

.book-header .path {
  color: var(--comment);
  font-size: 0.9em;
}

.book-header .path .source-link {
  color: var(--comment);
  text-decoration: none;
}

.book-header .path .source-link:hover {
  color: var(--link);
  text-decoration: underline;
}

.form-block {
  margin: 10px 0;
  padding: 15px;
  background: var(--block-bg);
  border-radius: 8px;
  border-left: 3px solid var(--border);
}

.form-block.theorem { border-left-color: var(--keyword); }
.form-block.function { border-left-color: var(--function); }
.form-block.macro { border-left-color: var(--type); }
.form-block.include-book { border-left-color: var(--string); }

.form-block.hidden { display: none; }
.form-block.dimmed { opacity: 0.3; }

.form-block.highlight {
  animation: highlight-pulse 0.4s ease-out;
}

@keyframes highlight-pulse {
  0% { background: var(--highlight); box-shadow: 0 0 20px var(--link); }
  100% { background: rgba(49, 50, 68, 0.5); box-shadow: none; }
}

.form-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.form-name {
  color: var(--function);
  font-weight: bold;
  cursor: pointer;
}

.form-name:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.form-type {
  color: var(--comment);
  font-size: 0.85em;
}

pre.code {
  margin: 0;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.sym-ref {
  color: var(--link);
  cursor: pointer;
  border-radius: 2px;
}

.sym-ref:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.sym-ref.local-def { color: var(--function); font-weight: bold; }
.sym-ref.external { color: var(--type); }

/* Symbol links (clickable hyperlinks) */
.sym-link {
  color: var(--link);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.sym-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

.sym-link.local-def {
  color: var(--function);
  font-weight: bold;
}

.sym-link.external {
  color: var(--type);
}

/* Tooltips using title attribute with custom styling */
.sym-link[title] {
  /* Browser will show title on hover */
}

/* Syntax highlighting in code blocks */
.keyword {
  color: var(--keyword);
}

.string {
  color: var(--string);
}

.number {
  color: #f77524; /* orange */
}

/* Include-book path links */
.include-path {
  color: var(--string);
  text-decoration: none;
  border-radius: 2px;
  cursor: pointer;
}

.include-path:hover {
  background: var(--highlight);
  color: var(--link-hover);
  text-decoration: underline;
}

/* Part buttons for defthm */
.part-buttons {
  display: flex;
  gap: 5px;
  margin: 10px 0;
  flex-wrap: wrap;
}

.part-btn {
  padding: 4px 10px;
  background: var(--border);
  border: 1px solid var(--comment);
  border-radius: 4px;
  color: var(--fg);
  cursor: pointer;
  font-size: 0.85em;
  font-family: inherit;
}

.part-btn:hover {
  background: var(--highlight);
  border-color: var(--link);
}

.part-btn.active {
  background: var(--link);
  color: var(--bg);
  border-color: var(--link);
}

/* References panel */
.refs-panel {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0,0,0,0.2);
  border-radius: 4px;
  display: none;
}

.refs-panel.visible { display: block; }

.refs-panel h4 {
  margin: 0 0 5px 0;
  color: var(--comment);
  font-size: 0.9em;
}

.refs-list {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

/* Included books section */
.includes-section {
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(49, 50, 68, 0.3);
  border-radius: 8px;
  border: 1px solid var(--border);
}

.includes-section h2 {
  margin: 0 0 10px 0;
  color: var(--comment);
  font-size: 1em;
  font-weight: normal;
}

.includes-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.include-link {
  padding: 6px 12px;
  background: var(--border);
  border-radius: 4px;
  color: var(--link);
  text-decoration: none;
  font-size: 0.9em;
  transition: all 0.1s;
}

.include-link:hover {
  background: var(--highlight);
  color: var(--link-hover);
}

.include-link.local {
  border-left: 2px solid var(--comment);
}

/* Filter status */
.filter-status {
  position: fixed;
  top: 10px;
  left: 20px;
  background: var(--bg);
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 4px;
  z-index: 201;
  display: none;
  align-items: center;
  gap: 10px;
}

.filter-status.active {
  display: flex;
  align-items: center;
  gap: 10px;
}

.clear-filter {
  padding: 5px 15px;
  background: var(--keyword);
  color: var(--bg);
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

/* RDFa vocab indicator */
[vocab] { /* semantic web annotations present */ }

</style>

</head>
<body>
  <div class="controls-left">
    <input type="text" id="name-filter" class="name-filter" placeholder="Filter by name..." title="Filter definitions by name">
    <label class="regex-label"><input type="checkbox" id="regex-toggle"> regex</label>
  </div>

  <div class="controls-right">
    <button class="control-btn" id="theme-toggle" title="Toggle light/dark theme">☀️</button>
    <button class="control-btn" id="font-smaller" title="Decrease font size">A-</button>
    <button class="control-btn" id="font-larger" title="Increase font size">A+</button>
  </div>

  <div class="filter-status">
    <span class="filter-text">Filtering...</span>
    <button class="clear-filter">Clear Filter</button>
  </div>
  
  <div class="book-header">
    <h1 property="name">proof-builder-b</h1>
    <div class="path"><a href="proof-builder-b.lisp" class="source-link">proof-builder-b</a></div>
  </div>
  
  <main property="text">
<div class="form-block other" id="form-0" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-in-package" data-sym="IN-PACKAGE">in-package</a> <span class="string">"ACL2"</span>)</pre>
  </div>

<div class="form-block macro" id="def-install-new-pc-meta-or-macro" data-defines="INSTALL-NEW-PC-META-OR-MACRO" data-references="QUOTE,ADD-PC-COMMAND,PROGN,QUASIQUOTE,BODY,DOC,FORMALS,NAME,RAW-NAME,COMMAND-TYPE,DEFMACRO" data-used-by="DEFINE-PC-META-OR-MACRO-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTALL-NEW-PC-META-OR-MACRO">install-new-pc-meta-or-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-install-new-pc-meta-or-macro" data-sym="INSTALL-NEW-PC-META-OR-MACRO" title="(defmacro install-new-pc-meta-or-macro
          (command-type raw-name name formals doc body)
  `(progn
    ,(pc-meta-or-macro-defun raw-name name formals doc body)
    (add-pc-command ,name &#39;,command-type)))">install-new-pc-meta-or-macro</a>
  (command-type raw-name name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> ,(PC-META-OR-MACRO-DEFUN RAW-NAME NAME FORMALS DOC BODY)
    (add-pc-command ,NAME ',COMMAND-TYPE)))</pre>
  </div>

<div class="form-block function" id="def-define-pc-meta-or-macro-fn" data-defines="DEFINE-PC-META-OR-MACRO-FN" data-references="INSTALL-NEW-PC-META-OR-MACRO,QUASIQUOTE,MAKE-OFFICIAL-PC-COMMAND,NAME,LET,BODY,FORMALS,RAW-NAME,COMMAND-TYPE,DEFUN" data-used-by="DEFINE-PC-ATOMIC-MACRO,DEFINE-PC-MACRO,DEFINE-PC-META" data-part-name="DEFINE-PC-META-OR-MACRO-FN" data-part-args="BODY,FORMALS,RAW-NAME,COMMAND-TYPE" data-part-body="INSTALL-NEW-PC-META-OR-MACRO,QUASIQUOTE,RAW-NAME,MAKE-OFFICIAL-PC-COMMAND,NAME,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-META-OR-MACRO-FN">define-pc-meta-or-macro-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-define-pc-meta-or-macro-fn" data-sym="DEFINE-PC-META-OR-MACRO-FN" title="(defun define-pc-meta-or-macro-fn (command-type raw-name formals body)
  (let ((name (make-official-pc-command raw-name)))
    `(install-new-pc-meta-or-macro ,command-type ,raw-name ,name ,formals nil
                                   ,body)))">define-pc-meta-or-macro-fn</a>
  (command-type raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  (let ((name (make-official-pc-command raw-name)))
    `(<a class="sym-link local-def" href="#def-install-new-pc-meta-or-macro" data-sym="INSTALL-NEW-PC-META-OR-MACRO" title="(defmacro install-new-pc-meta-or-macro
          (command-type raw-name name formals doc body)
  `(progn
    ,(pc-meta-or-macro-defun raw-name name formals doc body)
    (add-pc-command ,name &#39;,command-type)))">install-new-pc-meta-or-macro</a> ,COMMAND-TYPE
      ,RAW-NAME
      ,NAME
      ,FORMALS
      nil
      ,BODY)))</pre>
  </div>

<div class="form-block macro" id="def-define-pc-meta" data-defines="DEFINE-PC-META" data-references="META,QUOTE,DEFINE-PC-META-OR-MACRO-FN,BODY,&REST,FORMALS,RAW-NAME,DEFMACRO" data-used-by="DEFINE-PC-BIND*" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-META">define-pc-meta</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a>
  (raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> &amp;rest <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  (<a class="sym-link local-def" href="#def-define-pc-meta-or-macro-fn" data-sym="DEFINE-PC-META-OR-MACRO-FN" title="(defun define-pc-meta-or-macro-fn (command-type raw-name formals body)
  (let ((name (make-official-pc-command raw-name)))
    `(install-new-pc-meta-or-macro ,command-type ,raw-name ,name ,formals nil
                                   ,body)))">define-pc-meta-or-macro-fn</a> 'meta raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))</pre>
  </div>

<div class="form-block macro" id="def-define-pc-macro" data-defines="DEFINE-PC-MACRO" data-references="MACRO,QUOTE,DEFINE-PC-META-OR-MACRO-FN,BODY,&REST,FORMALS,RAW-NAME,DEFMACRO" data-used-by="DEFINE-PC-HELP" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-MACRO">define-pc-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a>
  (raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> &amp;rest <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  (<a class="sym-link local-def" href="#def-define-pc-meta-or-macro-fn" data-sym="DEFINE-PC-META-OR-MACRO-FN" title="(defun define-pc-meta-or-macro-fn (command-type raw-name formals body)
  (let ((name (make-official-pc-command raw-name)))
    `(install-new-pc-meta-or-macro ,command-type ,raw-name ,name ,formals nil
                                   ,body)))">define-pc-meta-or-macro-fn</a> 'macro raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))</pre>
  </div>

<div class="form-block macro" id="def-define-pc-atomic-macro" data-defines="DEFINE-PC-ATOMIC-MACRO" data-references="ATOMIC-MACRO,QUOTE,DEFINE-PC-META-OR-MACRO-FN,BODY,&REST,FORMALS,RAW-NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-ATOMIC-MACRO">define-pc-atomic-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a>
  (raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> &amp;rest <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  (<a class="sym-link local-def" href="#def-define-pc-meta-or-macro-fn" data-sym="DEFINE-PC-META-OR-MACRO-FN" title="(defun define-pc-meta-or-macro-fn (command-type raw-name formals body)
  (let ((name (make-official-pc-command raw-name)))
    `(install-new-pc-meta-or-macro ,command-type ,raw-name ,name ,formals nil
                                   ,body)))">define-pc-meta-or-macro-fn</a> 'atomic-macro
    raw-name
    <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>
    <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>))</pre>
  </div>

<div class="form-block macro" id="def-toggle-pc-macro" data-defines="TOGGLE-PC-MACRO" data-references="STATE,TOGGLE-PC-MACRO-FN,QUASIQUOTE,QUOTE,SYMBOL-NAME,MEMBER-EQUAL,NULL,OR,SYMBOLP,AND,XARGS,DECLARE,NEW-TP,&OPTIONAL,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TOGGLE-PC-MACRO">toggle-pc-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-toggle-pc-macro" data-sym="TOGGLE-PC-MACRO" title="(defmacro toggle-pc-macro (name &amp;optional new-tp)
  (declare
   (xargs :guard
    (and (symbolp new-tp)
         (or (null new-tp)
...">toggle-pc-macro</a>
  (name &amp;optional new-tp)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp new-tp)
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> new-tp)
          (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (symbol-name new-tp)
            '(<span class="string">"MACRO"</span> <span class="string">"ATOMIC-MACRO"</span>))))))
  `(toggle-pc-macro-fn ',(MAKE-OFFICIAL-PC-COMMAND NAME)
    ',NEW-TP
    state))</pre>
  </div>

<div class="form-block macro" id="def-define-pc-primitive" data-defines="DEFINE-PC-PRIMITIVE" data-references="PRIMITIVE,QUOTE,ADD-PC-COMMAND,PROGN,QUASIQUOTE,MAKE-OFFICIAL-PC-COMMAND,NAME,LET,BODY,&REST,FORMALS,RAW-NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-PRIMITIVE">define-pc-primitive</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a>
  (raw-name <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> &amp;rest <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  (let ((name (make-official-pc-command raw-name)))
    `(<a class="sym-link system" href="axioms.html#def-progn" data-sym="PROGN">progn</a> ,(PC-PRIMITIVE-DEFUN-FORM RAW-NAME NAME FORMALS NIL BODY)
      (add-pc-command ,NAME 'primitive))))</pre>
  </div>

<div class="form-block other" id="form-8" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> <a class="sym-link system" href="rewrite.html#def-comment" data-sym="COMMENT">comment</a>
  (&amp;rest x)
  (declare (ignore x))
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> pc-state state))</pre>
  </div>

<div class="form-block function" id="def-non-bounded-nums" data-defines="NON-BOUNDED-NUMS" data-references="CONS,CDR,<=,CAR,INTEGERP,CONSP,IF,TRUE-LISTP,RATIONALP,AND,XARGS,DECLARE,UPPER,LOWER,NUMS,DEFUN" data-part-name="NON-BOUNDED-NUMS" data-part-args="UPPER,LOWER,NUMS" data-part-declare="NUMS,TRUE-LISTP,UPPER,LOWER,RATIONALP,AND,XARGS,DECLARE" data-part-body="CONS,CDR,NON-BOUNDED-NUMS,UPPER,LOWER,<=,CAR,INTEGERP,AND,NUMS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NON-BOUNDED-NUMS">non-bounded-nums</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-non-bounded-nums" data-sym="NON-BOUNDED-NUMS" title="(defun non-bounded-nums (nums lower upper)
  (declare
   (xargs :guard (and (rationalp lower) (rationalp upper) (true-listp nums))))
  (if (consp nums)
      (if (and (integerp (car nums)) (&lt;= lower (car nums))
...">non-bounded-nums</a>
  (nums lower upper)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (rationalp lower) (rationalp upper) (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> nums))))
  (if (consp nums)
    (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp (car nums))
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> lower (car nums))
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (car nums) upper))
      (<a class="sym-link local-def" href="#def-non-bounded-nums" data-sym="NON-BOUNDED-NUMS" title="(defun non-bounded-nums (nums lower upper)
  (declare
   (xargs :guard (and (rationalp lower) (rationalp upper) (true-listp nums))))
  (if (consp nums)
      (if (and (integerp (car nums)) (&lt;= lower (car nums))
...">non-bounded-nums</a> (cdr nums) lower upper)
      (cons (car nums) (<a class="sym-link local-def" href="#def-non-bounded-nums" data-sym="NON-BOUNDED-NUMS" title="(defun non-bounded-nums (nums lower upper)
  (declare
   (xargs :guard (and (rationalp lower) (rationalp upper) (true-listp nums))))
  (if (consp nums)
      (if (and (integerp (car nums)) (&lt;= lower (car nums))
...">non-bounded-nums</a> (cdr nums) lower upper)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-delete-by-position" data-defines="DELETE-BY-POSITION" data-references="CAR,CONS,1+,CDR,MEMBER,CONSP,IF,INTEGERP,TRUE-LISTP,AND,XARGS,DECLARE,NUMS,CURRENT-INDEX,LST,DEFUN" data-part-name="DELETE-BY-POSITION" data-part-args="NUMS,CURRENT-INDEX,LST" data-part-declare="CURRENT-INDEX,INTEGERP,NUMS,TRUE-LISTP,AND,XARGS,DECLARE" data-part-body="CAR,CONS,1+,CDR,DELETE-BY-POSITION,NUMS,CURRENT-INDEX,MEMBER,LST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DELETE-BY-POSITION">delete-by-position</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-delete-by-position" data-sym="DELETE-BY-POSITION" title="(defun delete-by-position (lst current-index nums)
  (declare (xargs :guard (and (true-listp nums) (integerp current-index))))
  (if (consp lst)
      (if (member current-index nums)
          (delete-by-position (cdr lst) (1+ current-index) nums)
...">delete-by-position</a>
  (lst current-index nums)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> nums) (integerp current-index))))
  (if (consp lst)
    (if (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> current-index nums)
      (<a class="sym-link local-def" href="#def-delete-by-position" data-sym="DELETE-BY-POSITION" title="(defun delete-by-position (lst current-index nums)
  (declare (xargs :guard (and (true-listp nums) (integerp current-index))))
  (if (consp lst)
      (if (member current-index nums)
          (delete-by-position (cdr lst) (1+ current-index) nums)
...">delete-by-position</a> (cdr lst) (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> current-index) nums)
      (cons (car lst)
        (<a class="sym-link local-def" href="#def-delete-by-position" data-sym="DELETE-BY-POSITION" title="(defun delete-by-position (lst current-index nums)
  (declare (xargs :guard (and (true-listp nums) (integerp current-index))))
  (if (consp lst)
      (if (member current-index nums)
          (delete-by-position (cdr lst) (1+ current-index) nums)
...">delete-by-position</a> (cdr lst) (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> current-index) nums)))
    nil))</pre>
  </div>

<div class="form-block other" id="form-11" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> drop
  (&amp;rest nums)
  (if nums
    (let ((bad-nums (<a class="sym-link local-def" href="#def-non-bounded-nums" data-sym="NON-BOUNDED-NUMS" title="(defun non-bounded-nums (nums lower upper)
  (declare
   (xargs :guard (and (rationalp lower) (rationalp upper) (true-listp nums))))
  (if (consp nums)
      (if (and (integerp (car nums)) (&lt;= lower (car nums))
...">non-bounded-nums</a> nums <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps))))
      (if bad-nums
        (print-no-change2 <span class="string">"The following are not in-range hypothesis numbers:  ~&amp;0."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 bad-nums)))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
            <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                (car goals)
                <span class="keyword">:hyps</span> (<a class="sym-link local-def" href="#def-delete-by-position" data-sym="DELETE-BY-POSITION" title="(defun delete-by-position (lst current-index nums)
  (declare (xargs :guard (and (true-listp nums) (integerp current-index))))
  (if (consp lst)
      (if (member current-index nums)
          (delete-by-position (cdr lst) (1+ current-index) nums)
...">delete-by-position</a> hyps <span class="number">1</span> nums))
              (cdr goals)))
          state)))
    (if hyps
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
          <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal (car goals) <span class="keyword">:hyps</span> nil) (cdr goals)))
        state)
      (print-no-change2 <span class="string">"There are no hypotheses to drop!"</span>))))</pre>
  </div>

<div class="form-block other" id="form-12" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a> lisp
  (form)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-verify-flg state)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        'lisp
        <span class="string">"You may only invoke the proof-builder LISP command when ~
              you are inside the interactive loop."</span>))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp form)
       (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> form <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> form nil) (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> form))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> form))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp stobjs-out/vals state)
        (trans-eval-default-warning form <span class="keyword">:lisp</span> state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (let ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (car stobjs-out/vals)) (vals (cdr stobjs-out/vals)))
          (if (equal <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> <a class="sym-link system" href="basis-b.html#def-_2Aerror-triple-sig_2A" data-sym="*ERROR-TRIPLE-SIG*">*error-triple-sig*</a>)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (car vals)) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> vals) state)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp vals state)))))))</pre>
  </div>

<div class="form-block other" id="form-13" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> fail-primitive
  nil
  (declare (ignore pc-state))
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))</pre>
  </div>

<div class="form-block other" id="form-14" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> fail
  (&amp;optional hard)
  (if hard
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(lisp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> hard nil state)))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'fail-primitive)))</pre>
  </div>

<div class="form-block other" id="form-15" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> <a class="sym-link system" href="axioms.html#def-illegal" data-sym="ILLEGAL">illegal</a>
  (instr)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"Illegal interactive instruction, ~x0.~%  An instruction must be a ~
                            symbol or a proper list headed by a symbol."</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 instr)))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))</pre>
  </div>

<div class="form-block function" id="def-chk-assumption-free-ttree-1" data-defines="CHK-ASSUMPTION-FREE-TTREE-1" data-references="T,FC-DERIVATION,TAGGED-OBJECTS,CAR,HARD,ER,ASSUMPTION,QUOTE,TAGGED-OBJECTSP,COND,CTX,TTREE,DEFUN" data-part-name="CHK-ASSUMPTION-FREE-TTREE-1" data-part-args="CTX,TTREE" data-part-body="T,FC-DERIVATION,TAGGED-OBJECTS,CAR,CTX,HARD,ER,TTREE,ASSUMPTION,QUOTE,TAGGED-OBJECTSP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-ASSUMPTION-FREE-TTREE-1">chk-assumption-free-ttree-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-assumption-free-ttree-1" data-sym="CHK-ASSUMPTION-FREE-TTREE-1" title="(defun chk-assumption-free-ttree-1 (ttree ctx)
  (cond
   ((tagged-objectsp &#39;assumption ttree)
    (er hard ctx &quot;The &#39;assumption ~x0 was found in the final ttree!&quot;
        (car (tagged-objects &#39;assumption ttree))))
...">chk-assumption-free-ttree-1</a>
  (ttree ctx)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((tagged-objectsp 'assumption ttree) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        ctx
        <span class="string">"The &#39;assumption ~x0 was found in the final ttree!"</span>
        (car (tagged-objects 'assumption ttree))))
    ((tagged-objectsp 'fc-derivation ttree) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        ctx
        <span class="string">"The &#39;fc-derivation ~x0 was found in the final ttree!"</span>
        (car (tagged-objects 'fc-derivation ttree))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-put-cdr-assoc-query-id" data-defines="PUT-CDR-ASSOC-QUERY-ID" data-references="CAR,T,CDR,CAAR,EQ,CONS,ATOM,COND,ALIST,VAL,ID,DEFUN" data-used-by="SET-QUERY-VAL" data-part-name="PUT-CDR-ASSOC-QUERY-ID" data-part-args="ALIST,VAL,ID" data-part-body="PUT-CDR-ASSOC-QUERY-ID,CAR,T,CDR,CAAR,EQ,VAL,ID,CONS,ALIST,ATOM,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PUT-CDR-ASSOC-QUERY-ID">put-cdr-assoc-query-id</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-put-cdr-assoc-query-id" data-sym="PUT-CDR-ASSOC-QUERY-ID" title="(defun put-cdr-assoc-query-id (id val alist)
  (cond ((atom alist) (cons (cons id val) alist))
        ((eq id (caar alist)) (cons (cons id val) (cdr alist)))
        (t (cons (car alist) (put-cdr-assoc-query-id id val (cdr alist))))))">put-cdr-assoc-query-id</a>
  (id val alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> alist) (cons (cons id val) alist))
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> id (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (cons (cons id val) (cdr alist)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car alist)
        (<a class="sym-link local-def" href="#def-put-cdr-assoc-query-id" data-sym="PUT-CDR-ASSOC-QUERY-ID" title="(defun put-cdr-assoc-query-id (id val alist)
  (cond ((atom alist) (cons (cons id val) alist))
        ((eq id (caar alist)) (cons (cons id val) (cdr alist)))
        (t (cons (car alist) (put-cdr-assoc-query-id id val (cdr alist))))))">put-cdr-assoc-query-id</a> id val (cdr alist))))))</pre>
  </div>

<div class="form-block function" id="def-set-query-val" data-defines="SET-QUERY-VAL" data-references="CDR-ASSOC-QUERY-ID,NOT,TOGGLE,QUOTE,EQ,IF,PUT-CDR-ASSOC-QUERY-ID,SET-LD-QUERY-CONTROL-ALIST,LD-QUERY-CONTROL-ALIST,ALIST,LET,STATE,VAL,ID,DEFUN" data-used-by="QUERY-ON-EXIT" data-part-name="SET-QUERY-VAL" data-part-args="STATE,VAL,ID" data-part-body="CDR-ASSOC-QUERY-ID,NOT,TOGGLE,QUOTE,VAL,EQ,IF,ID,PUT-CDR-ASSOC-QUERY-ID,SET-LD-QUERY-CONTROL-ALIST,STATE,LD-QUERY-CONTROL-ALIST,ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SET-QUERY-VAL">set-query-val</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-set-query-val" data-sym="SET-QUERY-VAL" title="(defun set-query-val (id val state)
  (let ((alist (ld-query-control-alist state)))
    (set-ld-query-control-alist
     (put-cdr-assoc-query-id id
                             (if (eq val &#39;toggle)
...">set-query-val</a>
  (id val state)
  (let ((alist (<a class="sym-link system" href="basis-b.html#def-ld-query-control-alist" data-sym="LD-QUERY-CONTROL-ALIST">ld-query-control-alist</a> state)))
    (<a class="sym-link system" href="basis-b.html#def-set-ld-query-control-alist" data-sym="SET-LD-QUERY-CONTROL-ALIST">set-ld-query-control-alist</a> (<a class="sym-link local-def" href="#def-put-cdr-assoc-query-id" data-sym="PUT-CDR-ASSOC-QUERY-ID" title="(defun put-cdr-assoc-query-id (id val alist)
  (cond ((atom alist) (cons (cons id val) alist))
        ((eq id (caar alist)) (cons (cons id val) (cdr alist)))
        (t (cons (car alist) (put-cdr-assoc-query-id id val (cdr alist))))))">put-cdr-assoc-query-id</a> id
        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val 'toggle)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-cdr-assoc-query-id" data-sym="CDR-ASSOC-QUERY-ID">cdr-assoc-query-id</a> id alist))
          val)
        alist)
      state)))</pre>
  </div>

<div class="form-block macro" id="def-query-on-exit" data-defines="QUERY-ON-EXIT" data-references="STATE,EXIT,SET-QUERY-VAL,QUASIQUOTE,TOGGLE,QUOTE,VAL,&OPTIONAL,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="QUERY-ON-EXIT">query-on-exit</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-query-on-exit" data-sym="QUERY-ON-EXIT" title="(defmacro query-on-exit (&amp;optional (val &#39;toggle))
  `(set-query-val &#39;acl2-pc::exit &#39;,val state))">query-on-exit</a>
  (&amp;optional (val 'toggle))
  `(<a class="sym-link local-def" href="#def-set-query-val" data-sym="SET-QUERY-VAL" title="(defun set-query-val (id val state)
  (let ((alist (ld-query-control-alist state)))
    (set-ld-query-control-alist
     (put-cdr-assoc-query-id id
                             (if (eq val &#39;toggle)
...">set-query-val</a> '<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a> ',VAL state))</pre>
  </div>

<div class="form-block function" id="def-replay-query" data-defines="REPLAY-QUERY" data-references="EXIT,QUOTE,ACL2-QUERY,STATE,DEFUN" data-part-name="REPLAY-QUERY" data-part-args="STATE" data-part-body="STATE,EXIT,QUOTE,ACL2-QUERY" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REPLAY-QUERY">replay-query</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-replay-query" data-sym="REPLAY-QUERY" title="(defun replay-query (state)
  (acl2-query &#39;acl2-pc::exit
              &#39;(&quot;~%Do you want to submit this event?  Possible replies are:~%~
                         Y (Yes), R (yes and Replay commands), N (No, but exit), A (Abort exiting).~|~ &quot;
                :y :y :r :r :n :n :a :a)">replay-query</a>
  (state)
  (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> '<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>
    '(<span class="string">"~%Do you want to submit this event?  Possible replies are:~%~
                         Y (Yes), R (yes and Replay commands), N (No, but exit), A (Abort exiting).~|~ "</span> <span class="keyword">:y</span> <span class="keyword">:y</span> <span class="keyword">:r</span> <span class="keyword">:r</span> <span class="keyword">:n</span> <span class="keyword">:n</span> <span class="keyword">:a</span> <span class="keyword">:a</span>)
    nil
    state))</pre>
  </div>

<div class="form-block other" id="form-21" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a> <a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>
  (&amp;optional event-name rule-classes do-it-flg)
  (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-verify-flg state))
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
      '<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>
      <span class="string">"You may not invoke the EXIT command unless inside the ~
           interactive loop."</span>)
    (if <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((event-name-and-types-and-raw-term (event-name-and-types-and-raw-term state-stack)) (event-name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-name (car event-name-and-types-and-raw-term)))
          (instructions (instructions-of-state-stack state-stack nil)))
        (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((event-name (if event-name
               (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> event-name)
               (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                   nil
                   state
                   nil
                   (fms0 <span class="string">"Please supply an event name (or :A to ~
                                   abort)~%&gt;&gt; "</span>))
                 (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a> state)))))
          (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> event-name <span class="keyword">:a</span>)
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder nil state nil (fms0 <span class="string">"~|Exit aborted.~%"</span>))
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))
            (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((rule-classes (if (consp (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
                     rule-classes
                     (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) nil))
                       (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> event-name-and-types-and-raw-term)
                       '(<span class="keyword">:rewrite</span>)))) (event-form `(<a class="sym-link system" href="axioms.html#def-defthm" data-sym="DEFTHM">defthm</a> ,EVENT-NAME
                      ,(CADDR EVENT-NAME-AND-TYPES-AND-RAW-TERM)
                      ,@(IF (EQUAL RULE-CLASSES &#39;(:REWRITE))
      NIL
      (LIST :RULE-CLASSES RULE-CLASSES))
                      <span class="keyword">:instructions</span> ,INSTRUCTIONS)))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp stobjs-out/vals state)
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-pc-defthm event-form state)
                    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp ans state)
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (do-it-flg (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:y</span>))
                        ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> event-name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:n</span>))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-replay-query" data-sym="REPLAY-QUERY" title="(defun replay-query (state)
  (acl2-query &#39;acl2-pc::exit
              &#39;(&quot;~%Do you want to submit this event?  Possible replies are:~%~
                         Y (Yes), R (yes and Replay commands), N (No, but exit), A (Abort exiting).~|~ &quot;
                :y :y :r :r :n :n :a :a)">replay-query</a> state)))
                      (declare (ignore erp))
                      (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> ans
                        (<span class="keyword">:y</span> (trans-eval-default-warning event-form
                            '<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>
                            state
                            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
                        (<span class="keyword">:r</span> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (state-from-instructions (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> event-form)
                              event-name
                              rule-classes
                              instructions
                              '(signal <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>)
                              state)
                            (trans-eval-default-warning event-form
                              '<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>
                              state
                              <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                        (<span class="keyword">:a</span> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '(nil . <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))
                        (otherwise (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> '(nil) state)))))
                  (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (car stobjs-out/vals)))
                    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (cdr stobjs-out/vals) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder nil state nil (fms0 <span class="string">"~|Exit aborted.~%"</span>))
                        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> *pc-complete-signal* nil state))
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> *pc-complete-signal* event-name state))))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                  nil
                  state
                  (instructions event-name-and-types-and-raw-term state-stack)
                  (fms0 <span class="string">"~%Not exiting, as there remain unproved ~
                                   goals:  ~&amp;0.~%The original goal is:~%~ ~ ~ ~
                                   ~ ~y1~|  Here is the current instruction ~
                                   list, starting with the first:~%~ ~ ~ ~ ~
                                   ~y2~|"</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (goal-names (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                      (cons #\1 (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> event-name-and-types-and-raw-term))
                      (cons #\2 instructions))))
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))))))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder nil state nil (fms0 <span class="string">"~|Exiting....~%"</span>))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> *pc-complete-signal* nil state)))))</pre>
  </div>

<div class="form-block other" id="form-22" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a> undo
  (&amp;optional n)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp n) (&lt; <span class="number">0</span> n))))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The optional argument to undo must be a positive integer."</span>)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))
    (let ((m (min (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> state-stack)))))
      (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr state-stack))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"Already at the start."</span>)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (pc-assign old-ss state-stack)
          (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
            nil
            state
            (state-stack m)
            (fms0 <span class="string">"~|Undoing:  ~y0~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state
                    (car (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> m) state-stack))
                    <span class="keyword">:instruction</span>)))))
          (pc-assign state-stack (<a class="sym-link system" href="axioms.html#def-nthcdr" data-sym="NTHCDR">nthcdr</a> m state-stack))
          (if (consp (cdr (state-stack)))
            state
            (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              nil
              (fms0 <span class="string">"Back to the start.~%"</span>)))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))))</pre>
  </div>

<div class="form-block other" id="form-23" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a> restore
  nil
  (let ((old-ss (pc-value old-ss)))
    (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> old-ss)
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
          nil
          state
          nil
          (fms0 <span class="string">"~%Nothing to restore from!~%"</span>))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state))
      (let ((saved-ss state-stack))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (pc-assign state-stack old-ss)
          (pc-assign old-ss saved-ss)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))))))</pre>
  </div>

<div class="form-block function" id="def-print-commands" data-defines="PRINT-COMMANDS" data-references="CONS,LIST,PPROGN,CDR,CDAR,CAR,FMS0,PROOF-BUILDER,IO?,CAAR,NULL,IF,STATE,INDEXED-INSTRS,DEFUN" data-part-name="PRINT-COMMANDS" data-part-args="STATE,INDEXED-INSTRS" data-part-body="PRINT-COMMANDS,CONS,LIST,PPROGN,CDR,CDAR,CAR,FMS0,PROOF-BUILDER,IO?,CAAR,STATE,INDEXED-INSTRS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-COMMANDS">print-commands</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-commands" data-sym="PRINT-COMMANDS" title="(defun print-commands (indexed-instrs state)
  (if (null indexed-instrs)
      state
      (if (null (caar indexed-instrs))
          (io? proof-builder nil state (indexed-instrs)
...">print-commands</a>
  (indexed-instrs state)
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> indexed-instrs)
    state
    (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> indexed-instrs))
      (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
        nil
        state
        (indexed-instrs)
        (fms0 (car (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> indexed-instrs))
          (cdr (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> indexed-instrs))))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
          nil
          state
          (indexed-instrs)
          (fms0 <span class="string">"~|~x0. ~y1~|"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> indexed-instrs))
              (cons #\1 (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> indexed-instrs)))))
        (<a class="sym-link local-def" href="#def-print-commands" data-sym="PRINT-COMMANDS" title="(defun print-commands (indexed-instrs state)
  (if (null indexed-instrs)
      state
      (if (null (caar indexed-instrs))
          (io? proof-builder nil state (indexed-instrs)
...">print-commands</a> (cdr indexed-instrs) state)))))</pre>
  </div>

<div class="form-block function" id="def-make-pretty-start-instr" data-defines="MAKE-PRETTY-START-INSTR" data-references="CONS,LIST,IF,CADR,TYPES,CAR,NAME,EVENT-NAME-AND-TYPES-AND-RAW-TERM,TRIPLE,LET*,STATE-STACK,DEFUN" data-used-by="RAW-INDEXED-INSTRS" data-part-name="MAKE-PRETTY-START-INSTR" data-part-args="STATE-STACK" data-part-body="CONS,LIST,IF,CADR,TYPES,CAR,NAME,STATE-STACK,EVENT-NAME-AND-TYPES-AND-RAW-TERM,TRIPLE,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-PRETTY-START-INSTR">make-pretty-start-instr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-pretty-start-instr" data-sym="MAKE-PRETTY-START-INSTR" title="(defun make-pretty-start-instr (state-stack)
  (let* ((triple (event-name-and-types-and-raw-term state-stack))
         (name (car triple))
         (types (cadr triple)))
    (if name
...">make-pretty-start-instr</a>
  (state-stack)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((triple (event-name-and-types-and-raw-term state-stack)) (name (car triple))
      (types (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> triple)))
    (if name
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"~|[started with (~x0 ~x1 ...)]~%"</span>
        (cons #\0 name)
        (cons #\1 types))
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="string">"~|&lt;&lt; no event name specified at start &gt;&gt;~%"</span>))))</pre>
  </div>

<div class="form-block function" id="def-raw-indexed-instrs" data-defines="RAW-INDEXED-INSTRS" data-references="MAKE-PRETTY-START-INSTR,LIST,CDR,1+,CAR,PC-STATE,ACCESS,CONS,<,IF,TRUE-LISTP,<=,INTEGERP,AND,XARGS,DECLARE,STATE-STACK,FINISH-INDEX,START-INDEX,DEFUN" data-part-name="RAW-INDEXED-INSTRS" data-part-args="STATE-STACK,FINISH-INDEX,START-INDEX" data-part-declare="STATE-STACK,TRUE-LISTP,<=,FINISH-INDEX,START-INDEX,INTEGERP,AND,XARGS,DECLARE" data-part-body="MAKE-PRETTY-START-INSTR,LIST,CDR,1+,RAW-INDEXED-INSTRS,STATE-STACK,CAR,PC-STATE,ACCESS,CONS,FINISH-INDEX,START-INDEX,<,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RAW-INDEXED-INSTRS">raw-indexed-instrs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-raw-indexed-instrs" data-sym="RAW-INDEXED-INSTRS" title="(defun raw-indexed-instrs (start-index finish-index state-stack)
  (declare
   (xargs :guard
    (and (integerp start-index) (integerp finish-index)
         (&lt;= start-index finish-index) (true-listp state-stack))))
...">raw-indexed-instrs</a>
  (start-index finish-index state-stack)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp start-index)
        (integerp finish-index)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> start-index finish-index)
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> state-stack))))
  (if (&lt; start-index finish-index)
    (cons (cons start-index
        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state (car state-stack) <span class="keyword">:instruction</span>))
      (<a class="sym-link local-def" href="#def-raw-indexed-instrs" data-sym="RAW-INDEXED-INSTRS" title="(defun raw-indexed-instrs (start-index finish-index state-stack)
  (declare
   (xargs :guard
    (and (integerp start-index) (integerp finish-index)
         (&lt;= start-index finish-index) (true-listp state-stack))))
...">raw-indexed-instrs</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> start-index)
        finish-index
        (cdr state-stack)))
    (if (cdr state-stack)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons start-index
          (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state (car state-stack) <span class="keyword">:instruction</span>)))
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons nil (<a class="sym-link local-def" href="#def-make-pretty-start-instr" data-sym="MAKE-PRETTY-START-INSTR" title="(defun make-pretty-start-instr (state-stack)
  (let* ((triple (event-name-and-types-and-raw-term state-stack))
         (name (car triple))
         (types (cadr triple)))
    (if name
...">make-pretty-start-instr</a> state-stack))))))</pre>
  </div>

<div class="form-block other" id="form-27" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> sequence-no-restore
  (instr-list)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(sequence ,INSTR-LIST nil nil nil nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-28" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> skip
  nil
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(sequence-no-restore nil)))</pre>
  </div>

<div class="form-block macro" id="def-define-pc-help" data-defines="DEFINE-PC-HELP" data-references="SKIP,QUOTE,VALUE,PPROGN,DEFINE-PC-MACRO,QUASIQUOTE,BODY,&REST,ARGS,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-HELP">define-pc-help</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a>
  (name <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> &amp;rest <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)
  `(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> ,NAME
    ,ARGS
    ,@(BUTLAST BODY 1)
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> ,(CAR (LAST BODY)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'skip))))</pre>
  </div>

<div class="form-block function" id="def-evisc-indexed-instrs-1" data-defines="EVISC-INDEXED-INSTRS-1" data-references="EQUAL,MAKE-PRETTY-PC-COMMAND,EQ,AND,&,X,QUOTE,COMM,CASE-MATCH,CAR,CDR,INSTR,LET,CONSP,IF,REV-INDEXED-INSTRS,NAME,DEFUN" data-used-by="EVISC-INDEXED-INSTRS-REC" data-part-name="EVISC-INDEXED-INSTRS-1" data-part-args="REV-INDEXED-INSTRS,NAME" data-part-body="EVISC-INDEXED-INSTRS-1,NAME,EQUAL,MAKE-PRETTY-PC-COMMAND,EQ,AND,&,X,QUOTE,COMM,CASE-MATCH,CAR,CDR,INSTR,LET,REV-INDEXED-INSTRS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISC-INDEXED-INSTRS-1">evisc-indexed-instrs-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisc-indexed-instrs-1" data-sym="EVISC-INDEXED-INSTRS-1" title="(defun evisc-indexed-instrs-1 (name rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs))))
        (case-match instr
                    ((comm &#39;:end x . &amp;)
...">evisc-indexed-instrs-1</a>
  (name rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
    (let ((instr (cdr (car rev-indexed-instrs))))
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> instr
        ((comm '<span class="keyword">:end</span> x . &amp;) (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> comm (make-pretty-pc-command <span class="keyword">:comment</span>))
              (equal x name))
            rev-indexed-instrs
            (<a class="sym-link local-def" href="#def-evisc-indexed-instrs-1" data-sym="EVISC-INDEXED-INSTRS-1" title="(defun evisc-indexed-instrs-1 (name rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs))))
        (case-match instr
                    ((comm &#39;:end x . &amp;)
...">evisc-indexed-instrs-1</a> name (cdr rev-indexed-instrs))))
        (&amp; (<a class="sym-link local-def" href="#def-evisc-indexed-instrs-1" data-sym="EVISC-INDEXED-INSTRS-1" title="(defun evisc-indexed-instrs-1 (name rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs))))
        (case-match instr
                    ((comm &#39;:end x . &amp;)
...">evisc-indexed-instrs-1</a> name (cdr rev-indexed-instrs)))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-evisc-indexed-instrs-rec" data-defines="EVISC-INDEXED-INSTRS-REC" data-references="CONS,EVISC-INDEXED-INSTRS-1,RST,MAKE-PRETTY-PC-COMMAND,EQ,&,NAME,QUOTE,COMM,CASE-MATCH,EVISC-CDR,CAR,CDR,INSTR,LET,CONSP,IF,REV-INDEXED-INSTRS,DEFUN" data-used-by="EVISC-INDEXED-INSTRS" data-part-name="EVISC-INDEXED-INSTRS-REC" data-part-args="REV-INDEXED-INSTRS" data-part-body="CONS,EVISC-INDEXED-INSTRS-1,RST,MAKE-PRETTY-PC-COMMAND,EQ,&,NAME,QUOTE,COMM,CASE-MATCH,EVISC-INDEXED-INSTRS-REC,EVISC-CDR,CAR,CDR,INSTR,LET,REV-INDEXED-INSTRS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISC-INDEXED-INSTRS-REC">evisc-indexed-instrs-rec</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisc-indexed-instrs-rec" data-sym="EVISC-INDEXED-INSTRS-REC" title="(defun evisc-indexed-instrs-rec (rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs)))
            (evisc-cdr (evisc-indexed-instrs-rec (cdr rev-indexed-instrs))))
        (case-match instr
...">evisc-indexed-instrs-rec</a>
  (rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
    (let ((instr (cdr (car rev-indexed-instrs))) (evisc-cdr (<a class="sym-link local-def" href="#def-evisc-indexed-instrs-rec" data-sym="EVISC-INDEXED-INSTRS-REC" title="(defun evisc-indexed-instrs-rec (rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs)))
            (evisc-cdr (evisc-indexed-instrs-rec (cdr rev-indexed-instrs))))
        (case-match instr
...">evisc-indexed-instrs-rec</a> (cdr rev-indexed-instrs))))
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> instr
        ((comm '<span class="keyword">:begin</span> name . &amp;) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> comm (make-pretty-pc-command <span class="keyword">:comment</span>))
            (let ((rst (<a class="sym-link local-def" href="#def-evisc-indexed-instrs-1" data-sym="EVISC-INDEXED-INSTRS-1" title="(defun evisc-indexed-instrs-1 (name rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs))))
        (case-match instr
                    ((comm &#39;:end x . &amp;)
...">evisc-indexed-instrs-1</a> name evisc-cdr)))
              (if rst
                (cons (cons (car (car rev-indexed-instrs))
                    (cons <span class="string">"***HIDING***"</span> instr))
                  (cdr rst))
                (cons (car rev-indexed-instrs) evisc-cdr)))
            (cons (car rev-indexed-instrs) evisc-cdr)))
        (&amp; (cons (car rev-indexed-instrs) evisc-cdr))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-mark-unfinished-instrs" data-defines="MARK-UNFINISHED-INSTRS" data-references="CONS,MAKE-PRETTY-PC-COMMAND,EQ,&,QUOTE,COMM,CASE-MATCH,CAR,CDR,INSTR,LET,CONSP,IF,INDEXED-INSTRS,DEFUN" data-used-by="EVISC-INDEXED-INSTRS" data-part-name="MARK-UNFINISHED-INSTRS" data-part-args="INDEXED-INSTRS" data-part-body="MARK-UNFINISHED-INSTRS,CONS,MAKE-PRETTY-PC-COMMAND,EQ,&,QUOTE,COMM,CASE-MATCH,CAR,CDR,INSTR,LET,INDEXED-INSTRS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MARK-UNFINISHED-INSTRS">mark-unfinished-instrs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-mark-unfinished-instrs" data-sym="MARK-UNFINISHED-INSTRS" title="(defun mark-unfinished-instrs (indexed-instrs)
  (if (consp indexed-instrs)
      (let ((instr (cdr (car indexed-instrs))))
        (case-match instr
                    ((comm &#39;:begin &amp; . &amp;)
...">mark-unfinished-instrs</a>
  (indexed-instrs)
  (if (consp indexed-instrs)
    (let ((instr (cdr (car indexed-instrs))))
      (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> instr
        ((comm '<span class="keyword">:begin</span> &amp; . &amp;) (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> comm (make-pretty-pc-command <span class="keyword">:comment</span>))
            (cons (cons (car (car indexed-instrs))
                (cons <span class="string">"***UNFINISHED***"</span> instr))
              (<a class="sym-link local-def" href="#def-mark-unfinished-instrs" data-sym="MARK-UNFINISHED-INSTRS" title="(defun mark-unfinished-instrs (indexed-instrs)
  (if (consp indexed-instrs)
      (let ((instr (cdr (car indexed-instrs))))
        (case-match instr
                    ((comm &#39;:begin &amp; . &amp;)
...">mark-unfinished-instrs</a> (cdr indexed-instrs)))
            (cons (car indexed-instrs)
              (<a class="sym-link local-def" href="#def-mark-unfinished-instrs" data-sym="MARK-UNFINISHED-INSTRS" title="(defun mark-unfinished-instrs (indexed-instrs)
  (if (consp indexed-instrs)
      (let ((instr (cdr (car indexed-instrs))))
        (case-match instr
                    ((comm &#39;:begin &amp; . &amp;)
...">mark-unfinished-instrs</a> (cdr indexed-instrs)))))
        (&amp; (cons (car indexed-instrs)
            (<a class="sym-link local-def" href="#def-mark-unfinished-instrs" data-sym="MARK-UNFINISHED-INSTRS" title="(defun mark-unfinished-instrs (indexed-instrs)
  (if (consp indexed-instrs)
      (let ((instr (cdr (car indexed-instrs))))
        (case-match instr
                    ((comm &#39;:begin &amp; . &amp;)
...">mark-unfinished-instrs</a> (cdr indexed-instrs))))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-evisc-indexed-instrs" data-defines="EVISC-INDEXED-INSTRS" data-references="EVISC-INDEXED-INSTRS-REC,REVERSE,MARK-UNFINISHED-INSTRS,INDEXED-INSTRS,DEFUN" data-part-name="EVISC-INDEXED-INSTRS" data-part-args="INDEXED-INSTRS" data-part-body="INDEXED-INSTRS,EVISC-INDEXED-INSTRS-REC,REVERSE,MARK-UNFINISHED-INSTRS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EVISC-INDEXED-INSTRS">evisc-indexed-instrs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-evisc-indexed-instrs" data-sym="EVISC-INDEXED-INSTRS" title="(defun evisc-indexed-instrs (indexed-instrs)
  (mark-unfinished-instrs
   (reverse (evisc-indexed-instrs-rec (reverse indexed-instrs)))))">evisc-indexed-instrs</a>
  (indexed-instrs)
  (<a class="sym-link local-def" href="#def-mark-unfinished-instrs" data-sym="MARK-UNFINISHED-INSTRS" title="(defun mark-unfinished-instrs (indexed-instrs)
  (if (consp indexed-instrs)
      (let ((instr (cdr (car indexed-instrs))))
        (case-match instr
                    ((comm &#39;:begin &amp; . &amp;)
...">mark-unfinished-instrs</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> (<a class="sym-link local-def" href="#def-evisc-indexed-instrs-rec" data-sym="EVISC-INDEXED-INSTRS-REC" title="(defun evisc-indexed-instrs-rec (rev-indexed-instrs)
  (if (consp rev-indexed-instrs)
      (let ((instr (cdr (car rev-indexed-instrs)))
            (evisc-cdr (evisc-indexed-instrs-rec (cdr rev-indexed-instrs))))
        (case-match instr
...">evisc-indexed-instrs-rec</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> indexed-instrs)))))</pre>
  </div>

<div class="form-block other" id="form-34" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> commands
  (&amp;optional n evisc-p)
  (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> n (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp n) (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> n <span class="number">0</span>))))
    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
      nil
      state
      (n)
      (fms0 <span class="string">"*** The first optional argument to the COMMANDS command must ~
                  be a positive integer, but ~x0 is not.~|"</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 n))))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((indexed-instrs (<a class="sym-link local-def" href="#def-raw-indexed-instrs" data-sym="RAW-INDEXED-INSTRS" title="(defun raw-indexed-instrs (start-index finish-index state-stack)
  (declare
   (xargs :guard
    (and (integerp start-index) (integerp finish-index)
         (&lt;= start-index finish-index) (true-listp state-stack))))
...">raw-indexed-instrs</a> <span class="number">1</span>
           (if n
             (min n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> state-stack))
             (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> state-stack))
           state-stack)))
      (<a class="sym-link local-def" href="#def-print-commands" data-sym="PRINT-COMMANDS" title="(defun print-commands (indexed-instrs state)
  (if (null indexed-instrs)
      state
      (if (null (caar indexed-instrs))
          (io? proof-builder nil state (indexed-instrs)
...">print-commands</a> (if evisc-p
          (<a class="sym-link local-def" href="#def-evisc-indexed-instrs" data-sym="EVISC-INDEXED-INSTRS" title="(defun evisc-indexed-instrs (indexed-instrs)
  (mark-unfinished-instrs
   (reverse (evisc-indexed-instrs-rec (reverse indexed-instrs)))))">evisc-indexed-instrs</a> indexed-instrs)
          indexed-instrs)
        state))))</pre>
  </div>

<div class="form-block other" id="form-35" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> comm
  (&amp;optional n)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'commands n <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-promote-guts" data-defines="PROMOTE-GUTS" data-references="CDR,FLATTEN-ANDS-IN-LIT,LIST,IF,APPEND,CAR,GOAL,CHANGE,CONS,CHANGE-PC-STATE,NO-FLATTEN-FLG,Y,X,HYPS,GOALS,PC-STATE,DEFUN" data-part-name="PROMOTE-GUTS" data-part-args="NO-FLATTEN-FLG,Y,X,HYPS,GOALS,PC-STATE" data-part-body="CDR,Y,FLATTEN-ANDS-IN-LIT,X,LIST,NO-FLATTEN-FLG,IF,HYPS,APPEND,GOALS,CAR,GOAL,CHANGE,CONS,PC-STATE,CHANGE-PC-STATE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROMOTE-GUTS">promote-guts</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-promote-guts" data-sym="PROMOTE-GUTS" title="(defun promote-guts (pc-state goals hyps x y no-flatten-flg)
  (change-pc-state pc-state :goals
                   (cons
                    (change goal (car goals) :hyps
                            (append hyps
...">promote-guts</a>
  (pc-state goals hyps x y no-flatten-flg)
  (change-pc-state pc-state
    <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
        (car goals)
        <span class="keyword">:hyps</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> hyps
          (if no-flatten-flg
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> x)
            (flatten-ands-in-lit x)))
        <span class="keyword">:conc</span> y)
      (cdr goals))))</pre>
  </div>

<div class="form-block other" id="form-37" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> promote
  (&amp;optional do-not-flatten-flag)
  (if current-addr
    (print-no-change2 <span class="string">"You must be at the top ~
                         of the goal in order to promote the ~
                         antecedents of an implication. Try TOP first."</span>)
    (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> conc
      (('<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> x y) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link local-def" href="#def-promote-guts" data-sym="PROMOTE-GUTS" title="(defun promote-guts (pc-state goals hyps x y no-flatten-flg)
  (change-pc-state pc-state :goals
                   (cons
                    (change goal (car goals) :hyps
                            (append hyps
...">promote-guts</a> pc-state goals hyps x y do-not-flatten-flag)
          state))
      (('if x y <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link local-def" href="#def-promote-guts" data-sym="PROMOTE-GUTS" title="(defun promote-guts (pc-state goals hyps x y no-flatten-flg)
  (change-pc-state pc-state :goals
                   (cons
                    (change goal (car goals) :hyps
                            (append hyps
...">promote-guts</a> pc-state goals hyps x y do-not-flatten-flag)
          state))
      (&amp; (print-no-change2 <span class="string">"The goal must be of the form ~x0 or ~x1."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 '(<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> p q))
            (cons #\1
              '(if p
                q
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-remove-by-indices" data-defines="REMOVE-BY-INDICES" data-references="CAR,CONS,CDR,1+,MEMBER-EQUAL,CONSP,IF,LST,INDICES,M,DEFUN" data-part-name="REMOVE-BY-INDICES" data-part-args="LST,INDICES,M" data-part-body="CAR,CONS,CDR,1+,REMOVE-BY-INDICES,INDICES,M,MEMBER-EQUAL,LST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-BY-INDICES">remove-by-indices</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-by-indices" data-sym="REMOVE-BY-INDICES" title="(defun remove-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (remove-by-indices (1+ m) indices (cdr lst))
          (cons (car lst) (remove-by-indices (1+ m) indices (cdr lst))))">remove-by-indices</a>
  (m indices lst)
  (if (consp lst)
    (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> m indices)
      (<a class="sym-link local-def" href="#def-remove-by-indices" data-sym="REMOVE-BY-INDICES" title="(defun remove-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (remove-by-indices (1+ m) indices (cdr lst))
          (cons (car lst) (remove-by-indices (1+ m) indices (cdr lst))))">remove-by-indices</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> m) indices (cdr lst))
      (cons (car lst)
        (<a class="sym-link local-def" href="#def-remove-by-indices" data-sym="REMOVE-BY-INDICES" title="(defun remove-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (remove-by-indices (1+ m) indices (cdr lst))
          (cons (car lst) (remove-by-indices (1+ m) indices (cdr lst))))">remove-by-indices</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> m) indices (cdr lst))))
    nil))</pre>
  </div>

<div class="form-block other" id="form-39" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> print
  (form &amp;optional without-evisc)
  (let ((print-form `(fms0 <span class="string">"~|~y0~|"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 ,FORM)))))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp ,(IF WITHOUT-EVISC
     `(WITHOUT-EVISC ,PRINT-FORM)
     PRINT-FORM)))))</pre>
  </div>

<div class="form-block function" id="def-fetch-term-and-cl" data-defines="FETCH-TERM-AND-CL" data-references="FARGS,1-,NTH,&,IMPLIES,DUMB-NEGATE-LIT,CONS,CDR,=,T3,T2,T1,IF,CASE-MATCH,LENGTH,<,CAR,INTEGERP,AND,FQUOTEP,VARIABLEP,OR,NULL,MV,T,EQ,COND,INFINITY,QUOTE,BOUNDED-INTEGER-LISTP,XARGS,DECLARE,CL,ADDR,TERM,DEFUN" data-used-by="GOVERNORS,FETCH-TERM" data-part-name="FETCH-TERM-AND-CL" data-part-args="CL,ADDR,TERM" data-part-declare="ADDR,INFINITY,QUOTE,BOUNDED-INTEGER-LISTP,XARGS,DECLARE" data-part-body="FARGS,1-,NTH,&,IMPLIES,DUMB-NEGATE-LIT,CONS,CDR,FETCH-TERM-AND-CL,=,T3,T2,T1,IF,QUOTE,CASE-MATCH,LENGTH,<,CAR,INTEGERP,AND,FQUOTEP,VARIABLEP,OR,TERM,ADDR,NULL,MV,T,CL,EQ,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FETCH-TERM-AND-CL">fetch-term-and-cl</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a>
  (term addr cl)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="basis-a.html#def-bounded-integer-listp" data-sym="BOUNDED-INTEGER-LISTP">bounded-integer-listp</a> <span class="number">1</span> 'infinity addr)))
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> cl <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> addr) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> term cl))
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp (car addr))
       (&lt; <span class="number">0</span> (car addr))
       (&lt; (car addr) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> term))) (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
        (('if t1 t2 t3) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span> (car addr)) (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> t1 (cdr addr) cl))
            ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> <span class="number">2</span> (car addr)) (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> t2 (cdr addr) (cons t1 cl)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> t3
                (cdr addr)
                (cons (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> t1) cl)))))
        (('<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> t1 t2) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span> (car addr)) (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> t1
                (cdr addr)
                (cons (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> t2) cl)))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> t2 (cdr addr) (cons t1 cl)))))
        (&amp; (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term))
            (cdr addr)
            cl))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block function" id="def-fetch-term" data-defines="FETCH-TERM" data-references="QUOTE,HARD,ER,T,EQ,IF,FETCH-TERM-AND-CL,CL,MV-LET,ADDR,TERM,DEFUN" data-used-by="EXPAND-ADDRESS,P-BODY" data-part-name="FETCH-TERM" data-part-args="ADDR,TERM" data-part-body="FETCH-TERM,QUOTE,HARD,ER,T,EQ,IF,ADDR,FETCH-TERM-AND-CL,CL,TERM,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FETCH-TERM">fetch-term</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a>
  (term addr)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (term cl)
    (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> term addr nil)
    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> cl <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a>
        <span class="string">"FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1."</span>
        term
        addr)
      term)))</pre>
  </div>

<div class="form-block function" id="def-governors" data-defines="GOVERNORS" data-references="IGNORE,DECLARE,FETCH-TERM-AND-CL,CL,MV-LET,ADDR,TERM,DEFUN" data-used-by="PROOF-BUILDER-ASSUMPTIONS" data-part-name="GOVERNORS" data-part-args="ADDR,TERM" data-part-body="IGNORE,DECLARE,ADDR,FETCH-TERM-AND-CL,CL,TERM,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GOVERNORS">governors</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>
  (term addr)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (term cl)
    (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> term addr nil)
    (declare (ignore term))
    cl))</pre>
  </div>

<div class="form-block function" id="def-term-id-iff" data-defines="TERM-ID-IFF" data-references="NOT,IFF,IMPLIES,MEMBER-EQ,T,=,QUOTE,FFN-SYMB,EQ,COND,CDR,CAR,NTH,NULL,IF,IFF-FLG,ADDRESS,TERM,DEFUN" data-used-by="P-BODY" data-part-name="TERM-ID-IFF" data-part-args="IFF-FLG,ADDRESS,TERM" data-part-body="NOT,IFF,IMPLIES,MEMBER-EQ,T,=,QUOTE,FFN-SYMB,EQ,COND,CDR,TERM,CAR,NTH,TERM-ID-IFF,IFF-FLG,ADDRESS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TERM-ID-IFF">term-id-iff</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a>
  (term address iff-flg)
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> address)
    iff-flg
    (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (car address) term)
      (cdr address)
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) 'if) (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car address) <span class="number">1</span>)
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            iff-flg))
        ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) '(<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> <a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a> <a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>)) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))))</pre>
  </div>

<div class="form-block macro" id="def-_3F" data-defines="?" data-references="QUOTE,?-FN,QUASIQUOTE,X,DEFMACRO" data-used-by="PC-REWRITE*-1,ABBREVIATION-RAW-TERM-P,ABBREVIATIONS-ALIST-?" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="?">?</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-_3F" data-sym="?" title="(defmacro ? (x) `(?-fn &#39;,x))">?</a> (x) `(?-fn ',X))</pre>
  </div>

<div class="form-block other" id="form-45" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="basis-b.html#def-defstub" data-sym="DEFSTUB">defstub</a> ?-fn (x) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)</pre>
  </div>

<div class="form-block function" id="def-abbreviations-alist" data-defines="ABBREVIATIONS-ALIST" data-references="CDR,CDAR,CAAR,KWOTE,?-FN,QUOTE,FCONS-TERM*,CONS,CONSP,IF,ABBREVIATIONS,DEFUN" data-used-by="TRANSLATE-ABB,REMOVE-?S" data-part-name="ABBREVIATIONS-ALIST" data-part-args="ABBREVIATIONS" data-part-body="CDR,ABBREVIATIONS-ALIST,CDAR,CAAR,KWOTE,?-FN,QUOTE,FCONS-TERM*,CONS,ABBREVIATIONS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABBREVIATIONS-ALIST">abbreviations-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-abbreviations-alist" data-sym="ABBREVIATIONS-ALIST" title="(defun abbreviations-alist (abbreviations)
  (if (consp abbreviations)
      (cons
       (cons (fcons-term* &#39;?-fn (kwote (caar abbreviations)))
             (cdar abbreviations))
...">abbreviations-alist</a>
  (abbreviations)
  (if (consp abbreviations)
    (cons (cons (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '?-fn (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> abbreviations)))
        (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> abbreviations))
      (<a class="sym-link local-def" href="#def-abbreviations-alist" data-sym="ABBREVIATIONS-ALIST" title="(defun abbreviations-alist (abbreviations)
  (if (consp abbreviations)
      (cons
       (cons (fcons-term* &#39;?-fn (kwote (caar abbreviations)))
             (cdar abbreviations))
...">abbreviations-alist</a> (cdr abbreviations)))
    nil))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-chk-_3Fs" data-defines="CHK-?S" data-references="CDR,CAR,CONSP,TERM-LST,T,FARGS,CHK-?S-LST,LAMBDA-BODY,ER-PROGN,FLAMBDAP,HARD,SOFT,ER,IF,VAR,&,CASE-MATCH,?-FN,QUOTE,FFN-SYMB,EQ,VALUE,FQUOTEP,VARIABLEP,OR,COND,STATE,CTX,TERM,DEFUN,MUTUAL-RECURSION" data-used-by="REMOVE-?S" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHK-?S">chk-?s</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-chk-_3Fs" data-sym="CHK-?S" title="(mutual-recursion
 (defun chk-?s (term ctx state)
   (cond ((or (variablep term) (fquotep term)) (value nil))
         ((eq (ffn-symb term) &#39;?-fn)
          (case-match term
...">chk-?s</a>
    (term ctx state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term)) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
      ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) '?-fn) (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
          ((&amp; ('quote var)) (if (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> var)
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                ctx
                <span class="string">"The variable ~x0 is not among the current abbreviations."</span>
                var)
              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft ctx <span class="string">"Expected a variable in place of ~x0."</span> var)))
          (&amp; (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                ctx
                <span class="string">"Bad call of ?-FN, ~x0.  ?-FN must be called on the quotation of ~
                                        a variable."</span>
                term)))))
      ((<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-_3Fs" data-sym="CHK-?S" title="(mutual-recursion
 (defun chk-?s (term ctx state)
   (cond ((or (variablep term) (fquotep term)) (value nil))
         ((eq (ffn-symb term) &#39;?-fn)
          (case-match term
...">chk-?s</a> (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) ctx state)
          (chk-?s-lst (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term) ctx state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (chk-?s-lst (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term) ctx state))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> chk-?s-lst
    (term-lst ctx state)
    (if (consp term-lst)
      (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-_3Fs" data-sym="CHK-?S" title="(mutual-recursion
 (defun chk-?s (term ctx state)
   (cond ((or (variablep term) (fquotep term)) (value nil))
         ((eq (ffn-symb term) &#39;?-fn)
          (case-match term
...">chk-?s</a> (car term-lst) ctx state)
        (chk-?s-lst (cdr term-lst) ctx state))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))</pre>
  </div>

<div class="form-block function" id="def-remove-_3Fs" data-defines="REMOVE-?S" data-references="VALUE,CHK-?S,ER-PROGN,SUBLIS-EXPR-NON-QUOTEPS,NEWTERM,LET,STATE,CTX,ABBREVIATIONS-ALIST,TERM,DEFUN" data-used-by="TRANSLATE-ABB" data-part-name="REMOVE-?S" data-part-args="STATE,CTX,ABBREVIATIONS-ALIST,TERM" data-part-body="VALUE,STATE,CTX,CHK-?S,ER-PROGN,TERM,ABBREVIATIONS-ALIST,SUBLIS-EXPR-NON-QUOTEPS,NEWTERM,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-?S">remove-?s</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-_3Fs" data-sym="REMOVE-?S" title="(defun remove-?s (term abbreviations-alist ctx state)
  (let ((newterm (sublis-expr-non-quoteps abbreviations-alist term)))
    (er-progn (chk-?s newterm ctx state) (value newterm))))">remove-?s</a>
  (term <a class="sym-link local-def" href="#def-abbreviations-alist" data-sym="ABBREVIATIONS-ALIST" title="(defun abbreviations-alist (abbreviations)
  (if (consp abbreviations)
      (cons
       (cons (fcons-term* &#39;?-fn (kwote (caar abbreviations)))
             (cdar abbreviations))
...">abbreviations-alist</a> ctx state)
  (let ((newterm (sublis-expr-non-quoteps <a class="sym-link local-def" href="#def-abbreviations-alist" data-sym="ABBREVIATIONS-ALIST" title="(defun abbreviations-alist (abbreviations)
  (if (consp abbreviations)
      (cons
       (cons (fcons-term* &#39;?-fn (kwote (caar abbreviations)))
             (cdar abbreviations))
...">abbreviations-alist</a> term)))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link local-def" href="#def-chk-_3Fs" data-sym="CHK-?S" title="(mutual-recursion
 (defun chk-?s (term ctx state)
   (cond ((or (variablep term) (fquotep term)) (value nil))
         ((eq (ffn-symb term) &#39;?-fn)
          (case-match term
...">chk-?s</a> newterm ctx state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> newterm))))</pre>
  </div>

<div class="form-block function" id="def-translate-abb" data-defines="TRANSLATE-ABB" data-references="ABBREVIATIONS-ALIST,REMOVE-?S,MV,IF,W,T,TRANSLATE,TERM,ERP,MV-LET,STATE,CTX,ABBREVIATIONS,X,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST-1,TRANS0" data-part-name="TRANSLATE-ABB" data-part-args="STATE,CTX,ABBREVIATIONS,X" data-part-body="ABBREVIATIONS,ABBREVIATIONS-ALIST,REMOVE-?S,MV,IF,W,CTX,T,X,TRANSLATE,STATE,TERM,ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-ABB">translate-abb</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-abb" data-sym="TRANSLATE-ABB" title="(defun translate-abb (x abbreviations ctx state)
  (mv-let (erp term state) (translate x t t t ctx (w state) state)
          (if erp
              (mv erp term state)
              (remove-?s term (abbreviations-alist abbreviations) ctx state))))">translate-abb</a>
  (x abbreviations ctx state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp term state)
    (translate x <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> ctx (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state) state)
    (if erp
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp term state)
      (<a class="sym-link local-def" href="#def-remove-_3Fs" data-sym="REMOVE-?S" title="(defun remove-?s (term abbreviations-alist ctx state)
  (let ((newterm (sublis-expr-non-quoteps abbreviations-alist term)))
    (er-progn (chk-?s newterm ctx state) (value newterm))))">remove-?s</a> term
        (<a class="sym-link local-def" href="#def-abbreviations-alist" data-sym="ABBREVIATIONS-ALIST" title="(defun abbreviations-alist (abbreviations)
  (if (consp abbreviations)
      (cons
       (cons (fcons-term* &#39;?-fn (kwote (caar abbreviations)))
             (cdar abbreviations))
...">abbreviations-alist</a> abbreviations)
        ctx
        state))))</pre>
  </div>

<div class="form-block macro" id="def-trans0" data-defines="TRANS0" data-references="STATE,TRANSLATE-ABB,QUASIQUOTE,CTX,ABBREVIATIONS,&OPTIONAL,X,DEFMACRO" data-used-by="CHECK-CARS-ARE-VARIABLES,TRANSLATE-SUBST-ABB1" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANS0">trans0</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a>
  (x &amp;optional abbreviations ctx)
  `(<a class="sym-link local-def" href="#def-translate-abb" data-sym="TRANSLATE-ABB" title="(defun translate-abb (x abbreviations ctx state)
  (mv-let (erp term state) (translate x t t t ctx (w state) state)
          (if erp
              (mv erp term state)
              (remove-?s term (abbreviations-alist abbreviations) ctx state))))">translate-abb</a> ,X ,ABBREVIATIONS ,(OR CTX &#39;&#39;TRANS0) state))</pre>
  </div>

<div class="form-block function" id="def-p-body" data-defines="P-BODY" data-references="T,TERM-ID-IFF,FETCH-TERM,UNTRANS0,CONS,LIST,FMS0,PROOF-BUILDER,IO?,STATE,ABBREVIATIONS,CURRENT-ADDR,CONC,DEFUN" data-part-name="P-BODY" data-part-args="STATE,ABBREVIATIONS,CURRENT-ADDR,CONC" data-part-body="T,TERM-ID-IFF,FETCH-TERM,UNTRANS0,CONS,LIST,FMS0,CONC,CURRENT-ADDR,ABBREVIATIONS,STATE,PROOF-BUILDER,IO?" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="P-BODY">p-body</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-p-body" data-sym="P-BODY" title="(defun p-body (conc current-addr abbreviations state)
  (io? proof-builder nil state (abbreviations current-addr conc)
       (fms0 &quot;~|~y0~|&quot;
             (list
              (cons #\0
...">p-body</a>
  (conc current-addr abbreviations state)
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
    nil
    state
    (abbreviations current-addr conc)
    (fms0 <span class="string">"~|~y0~|"</span>
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
          (untrans0 (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr)
            (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> conc current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
            abbreviations))))))</pre>
  </div>

<div class="form-block other" id="form-52" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> p
  nil
  (when-goals (<a class="sym-link local-def" href="#def-p-body" data-sym="P-BODY" title="(defun p-body (conc current-addr abbreviations state)
  (io? proof-builder nil state (abbreviations current-addr conc)
       (fms0 &quot;~|~y0~|&quot;
             (list
              (cons #\0
...">p-body</a> (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state)))</pre>
  </div>

<div class="form-block other" id="form-53" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> pp
  nil
  (when-goals (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
      nil
      state
      (state-stack)
      (fms0 <span class="string">"~|~y0~|"</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-take-by-indices" data-defines="TAKE-BY-INDICES" data-references="CDR,1+,CAR,CONS,MEMBER-EQUAL,CONSP,IF,LST,INDICES,M,DEFUN" data-part-name="TAKE-BY-INDICES" data-part-args="LST,INDICES,M" data-part-body="CDR,1+,TAKE-BY-INDICES,CAR,CONS,INDICES,M,MEMBER-EQUAL,LST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TAKE-BY-INDICES">take-by-indices</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-take-by-indices" data-sym="TAKE-BY-INDICES" title="(defun take-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (cons (car lst) (take-by-indices (1+ m) indices (cdr lst)))
          (take-by-indices (1+ m) indices (cdr lst)))">take-by-indices</a>
  (m indices lst)
  (if (consp lst)
    (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> m indices)
      (cons (car lst) (<a class="sym-link local-def" href="#def-take-by-indices" data-sym="TAKE-BY-INDICES" title="(defun take-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (cons (car lst) (take-by-indices (1+ m) indices (cdr lst)))
          (take-by-indices (1+ m) indices (cdr lst)))">take-by-indices</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> m) indices (cdr lst)))
      (<a class="sym-link local-def" href="#def-take-by-indices" data-sym="TAKE-BY-INDICES" title="(defun take-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (cons (car lst) (take-by-indices (1+ m) indices (cdr lst)))
          (take-by-indices (1+ m) indices (cdr lst)))">take-by-indices</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> m) indices (cdr lst)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-print-hyps" data-defines="PRINT-HYPS" data-references="CDR,T,CDAR,UNTRANS0,CAAR,CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,NULL,IF,>,INTEGERP,EQLABLE-ALISTP,AND,XARGS,DECLARE,STATE,ABBREVIATIONS,NDIGITS,INDEXED-HYPS,DEFUN" data-used-by="PRINT-GOVERNORS-TOP,PRINT-HYPS-TOP" data-part-name="PRINT-HYPS" data-part-args="STATE,ABBREVIATIONS,NDIGITS,INDEXED-HYPS" data-part-declare=">,NDIGITS,INTEGERP,INDEXED-HYPS,EQLABLE-ALISTP,AND,XARGS,DECLARE" data-part-body="CDR,PRINT-HYPS,T,CDAR,UNTRANS0,CAAR,CONS,LIST,FMS0,NDIGITS,ABBREVIATIONS,PROOF-BUILDER,IO?,PPROGN,STATE,INDEXED-HYPS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-HYPS">print-hyps</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-hyps" data-sym="PRINT-HYPS" title="(defun print-hyps (indexed-hyps ndigits abbreviations state)
  (declare
   (xargs :guard
    (and (eqlable-alistp indexed-hyps) (integerp ndigits) (&gt; ndigits 0))))
  (if (null indexed-hyps)
...">print-hyps</a>
  (indexed-hyps ndigits abbreviations state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eqlable-alistp" data-sym="EQLABLE-ALISTP">eqlable-alistp</a> indexed-hyps)
        (integerp ndigits)
        (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> ndigits <span class="number">0</span>))))
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> indexed-hyps)
    state
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
        nil
        state
        (abbreviations ndigits indexed-hyps)
        (fms0 <span class="string">"~c0. ~y1~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> indexed-hyps) ndigits))
            (cons #\1 (untrans0 (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> indexed-hyps) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> abbreviations)))))
      (<a class="sym-link local-def" href="#def-print-hyps" data-sym="PRINT-HYPS" title="(defun print-hyps (indexed-hyps ndigits abbreviations state)
  (declare
   (xargs :guard
    (and (eqlable-alistp indexed-hyps) (integerp ndigits) (&gt; ndigits 0))))
  (if (null indexed-hyps)
...">print-hyps</a> (cdr indexed-hyps) ndigits abbreviations state))))</pre>
  </div>

<div class="form-block function" id="def-some-_3E" data-defines="SOME->" data-references="CDR,CAR,>,OR,IF,RATIONALP,RATIONAL-LISTP,AND,XARGS,DECLARE,N,LST,DEFUN" data-used-by="PRINT-GOVERNORS-TOP,PRINT-HYPS-TOP" data-part-name="SOME->" data-part-args="N,LST" data-part-declare="N,RATIONALP,LST,RATIONAL-LISTP,AND,XARGS,DECLARE" data-part-body="CDR,SOME->,N,CAR,>,OR,LST,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SOME->">some-&gt;</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-some-_3E" data-sym="SOME-&gt;" title="(defun some-&gt; (lst n)
  (declare (xargs :guard (and (rational-listp lst) (rationalp n))))
  (if lst
      (or (&gt; (car lst) n) (some-&gt; (cdr lst) n))
      nil))">some-&gt;</a>
  (lst n)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-rational-listp" data-sym="RATIONAL-LISTP">rational-listp</a> lst) (rationalp n))))
  (if lst
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> (car lst) n) (<a class="sym-link local-def" href="#def-some-_3E" data-sym="SOME-&gt;" title="(defun some-&gt; (lst n)
  (declare (xargs :guard (and (rational-listp lst) (rationalp n))))
  (if lst
      (or (&gt; (car lst) n) (some-&gt; (cdr lst) n))
      nil))">some-&gt;</a> (cdr lst) n))
    nil))</pre>
  </div>

<div class="form-block function" id="def-print-hyps-top" data-defines="PRINT-HYPS-TOP" data-references="STRIP-CARS,SOME->,PRINT-HYPS,FMS0,PROOF-BUILDER,IO?,NULL,IF,EQLABLE-ALISTP,XARGS,DECLARE,STATE,ABBREVIATIONS,INDEXED-HYPS,DEFUN" data-part-name="PRINT-HYPS-TOP" data-part-args="STATE,ABBREVIATIONS,INDEXED-HYPS" data-part-declare="INDEXED-HYPS,EQLABLE-ALISTP,XARGS,DECLARE" data-part-body="ABBREVIATIONS,STRIP-CARS,SOME->,PRINT-HYPS,FMS0,STATE,PROOF-BUILDER,IO?,INDEXED-HYPS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-HYPS-TOP">print-hyps-top</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-hyps-top" data-sym="PRINT-HYPS-TOP" title="(defun print-hyps-top (indexed-hyps abbreviations state)
  (declare (xargs :guard (eqlable-alistp indexed-hyps)))
  (if (null indexed-hyps)
      (io? proof-builder nil state nil
           (fms0 &quot;~|There are no top-level hypotheses.~|&quot;))
...">print-hyps-top</a>
  (indexed-hyps abbreviations state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-eqlable-alistp" data-sym="EQLABLE-ALISTP">eqlable-alistp</a> indexed-hyps)))
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> indexed-hyps)
    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
      nil
      state
      nil
      (fms0 <span class="string">"~|There are no top-level hypotheses.~|"</span>))
    (<a class="sym-link local-def" href="#def-print-hyps" data-sym="PRINT-HYPS" title="(defun print-hyps (indexed-hyps ndigits abbreviations state)
  (declare
   (xargs :guard
    (and (eqlable-alistp indexed-hyps) (integerp ndigits) (&gt; ndigits 0))))
  (if (null indexed-hyps)
...">print-hyps</a> indexed-hyps
      (if (<a class="sym-link local-def" href="#def-some-_3E" data-sym="SOME-&gt;" title="(defun some-&gt; (lst n)
  (declare (xargs :guard (and (rational-listp lst) (rationalp n))))
  (if lst
      (or (&gt; (car lst) n) (some-&gt; (cdr lst) n))
      nil))">some-&gt;</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> indexed-hyps) <span class="number">9</span>)
        <span class="number">2</span>
        <span class="number">1</span>)
      abbreviations
      state)))</pre>
  </div>

<div class="form-block function" id="def-print-governors-top" data-defines="PRINT-GOVERNORS-TOP" data-references="STRIP-CARS,SOME->,PRINT-HYPS,FMS0,PROOF-BUILDER,IO?,NULL,IF,EQLABLE-ALISTP,XARGS,DECLARE,STATE,ABBREVIATIONS,INDEXED-HYPS,DEFUN" data-part-name="PRINT-GOVERNORS-TOP" data-part-args="STATE,ABBREVIATIONS,INDEXED-HYPS" data-part-declare="INDEXED-HYPS,EQLABLE-ALISTP,XARGS,DECLARE" data-part-body="ABBREVIATIONS,STRIP-CARS,SOME->,PRINT-HYPS,FMS0,STATE,PROOF-BUILDER,IO?,INDEXED-HYPS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-GOVERNORS-TOP">print-governors-top</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-governors-top" data-sym="PRINT-GOVERNORS-TOP" title="(defun print-governors-top (indexed-hyps abbreviations state)
  (declare (xargs :guard (eqlable-alistp indexed-hyps)))
  (if (null indexed-hyps)
      (io? proof-builder nil state nil (fms0 &quot;~|There are no governors.~|&quot;))
      (print-hyps indexed-hyps
...">print-governors-top</a>
  (indexed-hyps abbreviations state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-eqlable-alistp" data-sym="EQLABLE-ALISTP">eqlable-alistp</a> indexed-hyps)))
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> indexed-hyps)
    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
      nil
      state
      nil
      (fms0 <span class="string">"~|There are no governors.~|"</span>))
    (<a class="sym-link local-def" href="#def-print-hyps" data-sym="PRINT-HYPS" title="(defun print-hyps (indexed-hyps ndigits abbreviations state)
  (declare
   (xargs :guard
    (and (eqlable-alistp indexed-hyps) (integerp ndigits) (&gt; ndigits 0))))
  (if (null indexed-hyps)
...">print-hyps</a> indexed-hyps
      (if (<a class="sym-link local-def" href="#def-some-_3E" data-sym="SOME-&gt;" title="(defun some-&gt; (lst n)
  (declare (xargs :guard (and (rational-listp lst) (rationalp n))))
  (if lst
      (or (&gt; (car lst) n) (some-&gt; (cdr lst) n))
      nil))">some-&gt;</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> indexed-hyps) <span class="number">9</span>)
        <span class="number">2</span>
        <span class="number">1</span>)
      abbreviations
      state)))</pre>
  </div>

<div class="form-block function" id="def-pair-indices" data-defines="PAIR-INDICES" data-references="CAR,CONS,MEMBER,CDR,1+,REST-LST,LET,IF,LENGTH,BOUNDED-INTEGER-LISTP,TRUE-LISTP,INTEGERP,AND,XARGS,DECLARE,LST,INDICES,SEED,DEFUN" data-part-name="PAIR-INDICES" data-part-args="LST,INDICES,SEED" data-part-declare="INDICES,LENGTH,BOUNDED-INTEGER-LISTP,LST,TRUE-LISTP,SEED,INTEGERP,AND,XARGS,DECLARE" data-part-body="CAR,CONS,MEMBER,CDR,INDICES,SEED,1+,PAIR-INDICES,REST-LST,LET,LST,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PAIR-INDICES">pair-indices</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pair-indices" data-sym="PAIR-INDICES" title="(defun pair-indices (seed indices lst)
  (declare
   (xargs :guard
    (and (integerp seed) (true-listp lst)
         (bounded-integer-listp 1 (length lst) indices))))
...">pair-indices</a>
  (seed indices lst)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp seed)
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst)
        (<a class="sym-link system" href="basis-a.html#def-bounded-integer-listp" data-sym="BOUNDED-INTEGER-LISTP">bounded-integer-listp</a> <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> lst) indices))))
  (if lst
    (let ((rest-lst (<a class="sym-link local-def" href="#def-pair-indices" data-sym="PAIR-INDICES" title="(defun pair-indices (seed indices lst)
  (declare
   (xargs :guard
    (and (integerp seed) (true-listp lst)
         (bounded-integer-listp 1 (length lst) indices))))
...">pair-indices</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> seed) indices (cdr lst))))
      (if (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> seed indices)
        (cons (cons seed (car lst)) rest-lst)
        rest-lst))
    nil))</pre>
  </div>

<div class="form-block other" id="form-60" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> hyps
  (&amp;optional hyps-indices govs-indices)
  (when-goals-trip (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hyps (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (len-hyps (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps))
        (govs (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> govs-indices (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
        (len-govs (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> govs))
        (abbs (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (hyps-indices (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> hyps-indices (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> hyps-indices <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             (<a class="sym-link system" href="basis-a.html#def-bounded-integer-listp" data-sym="BOUNDED-INTEGER-LISTP">bounded-integer-listp</a> <span class="number">1</span> len-hyps hyps-indices))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (len-hyps hyps-indices)
              (fms0 <span class="string">"~|Bad hypothesis-list argument to HYPS, ~X0n.  The ~
                    hypothesis-list argument should either be T or should be a ~
                    list of integers between 1 and the number of top-level ~
                    hypotheses, ~x1.~%"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 hyps-indices)
                  (cons #\n nil)
                  (cons #\1 len-hyps))))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
        ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> govs-indices <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
             (<a class="sym-link system" href="basis-a.html#def-bounded-integer-listp" data-sym="BOUNDED-INTEGER-LISTP">bounded-integer-listp</a> <span class="number">1</span> len-govs govs-indices))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (len-govs govs-indices)
              (fms0 <span class="string">"~|Bad governors-list argument to HYPS,~%  ~X0n.~%The ~
                    governors-list argument should either be T or should be a ~
                    list of integers between 1 and the number of top-level ~
                    governors, ~x1."</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 govs-indices)
                  (cons #\n nil)
                  (cons #\1 len-govs))))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> hyps-indices) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> govs-indices)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              nil
              (fms0 <span class="string">"~|You have specified no printing of either hypotheses or ~
                    governors!  Perhaps you should read the documentation for ~
                    the HYPS command.~|"</span>))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((hyps-to-print (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> hyps-indices <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                 (count-off <span class="number">1</span> hyps)
                 (<a class="sym-link local-def" href="#def-pair-indices" data-sym="PAIR-INDICES" title="(defun pair-indices (seed indices lst)
  (declare
   (xargs :guard
    (and (integerp seed) (true-listp lst)
         (bounded-integer-listp 1 (length lst) indices))))
...">pair-indices</a> <span class="number">1</span> hyps-indices hyps))) (govs-to-print (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> govs-indices <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                  (count-off <span class="number">1</span> govs)
                  (<a class="sym-link local-def" href="#def-pair-indices" data-sym="PAIR-INDICES" title="(defun pair-indices (seed indices lst)
  (declare
   (xargs :guard
    (and (integerp seed) (true-listp lst)
         (bounded-integer-listp 1 (length lst) indices))))
...">pair-indices</a> <span class="number">1</span> govs-indices govs))))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if hyps-indices
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> hyps-indices <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      nil
                      (fms0 <span class="string">"~|*** Top-level hypotheses:~|"</span>))
                    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      nil
                      (fms0 <span class="string">"~|*** Specified top-level hypotheses:~|"</span>)))
                  (<a class="sym-link local-def" href="#def-print-hyps-top" data-sym="PRINT-HYPS-TOP" title="(defun print-hyps-top (indexed-hyps abbreviations state)
  (declare (xargs :guard (eqlable-alistp indexed-hyps)))
  (if (null indexed-hyps)
      (io? proof-builder nil state nil
           (fms0 &quot;~|There are no top-level hypotheses.~|&quot;))
...">print-hyps-top</a> hyps-to-print abbs state))
                state)
              (if govs-indices
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> govs-indices <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      nil
                      (fms0 <span class="string">"~|~%*** Governors:~|"</span>))
                    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      nil
                      (fms0 <span class="string">"~|~%*** Specified governors:~|"</span>)))
                  (<a class="sym-link local-def" href="#def-print-governors-top" data-sym="PRINT-GOVERNORS-TOP" title="(defun print-governors-top (indexed-hyps abbreviations state)
  (declare (xargs :guard (eqlable-alistp indexed-hyps)))
  (if (null indexed-hyps)
      (io? proof-builder nil state nil (fms0 &quot;~|There are no governors.~|&quot;))
      (print-hyps indexed-hyps
...">print-governors-top</a> govs-to-print abbs state))
                state)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'skip))))))))</pre>
  </div>

<div class="form-block other" id="form-61" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> demote
  (&amp;rest rest-args)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (current-addr (print-no-change2 <span class="string">"You must be at the top of the conclusion in order to ~
                       demote hypotheses. Try TOP first."</span>))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> hyps) (print-no-change2 <span class="string">"There are no top-level hypotheses."</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((badindices (<a class="sym-link local-def" href="#def-non-bounded-nums" data-sym="NON-BOUNDED-NUMS" title="(defun non-bounded-nums (nums lower upper)
  (declare
   (xargs :guard (and (rationalp lower) (rationalp upper) (true-listp nums))))
  (if (consp nums)
      (if (and (integerp (car nums)) (&lt;= lower (car nums))
...">non-bounded-nums</a> rest-args <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps))))
        (if badindices
          (print-no-change2 <span class="string">"The arguments to DEMOTE ~
                             must be indices of active top-level hypotheses, ~
                             but the following are not:  ~&amp;0."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 badindices)))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
              <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                  (car goals)
                  <span class="keyword">:hyps</span> (if rest-args
                    (<a class="sym-link local-def" href="#def-remove-by-indices" data-sym="REMOVE-BY-INDICES" title="(defun remove-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (remove-by-indices (1+ m) indices (cdr lst))
          (cons (car lst) (remove-by-indices (1+ m) indices (cdr lst))))">remove-by-indices</a> <span class="number">1</span> rest-args hyps)
                    nil)
                  <span class="keyword">:conc</span> (make-implication (if rest-args
                      (<a class="sym-link local-def" href="#def-take-by-indices" data-sym="TAKE-BY-INDICES" title="(defun take-by-indices (m indices lst)
  (if (consp lst)
      (if (member-equal m indices)
          (cons (car lst) (take-by-indices (1+ m) indices (cdr lst)))
          (take-by-indices (1+ m) indices (cdr lst)))">take-by-indices</a> <span class="number">1</span> rest-args hyps)
                      hyps)
                    conc))
                (cdr goals)))
            state))))))</pre>
  </div>

<div class="form-block function" id="def-pair-keywords" data-defines="PAIR-KEYWORDS" data-references="REMOVE-KEYWORD,CADR,CONS,MV,CAR,ASSOC-KEYWORD,TAIL,LET,CDR,RST,ALIST,MV-LET,CONSP,IF,KEYWORD-VALUE-LISTP,KEYWORD-LISTP,AND,XARGS,DECLARE,LST,KEYWORDS,DEFUN" data-used-by="PROVER-CALL" data-part-name="PAIR-KEYWORDS" data-part-args="LST,KEYWORDS" data-part-declare="LST,KEYWORD-VALUE-LISTP,KEYWORDS,KEYWORD-LISTP,AND,XARGS,DECLARE" data-part-body="REMOVE-KEYWORD,CADR,CONS,MV,CAR,ASSOC-KEYWORD,TAIL,LET,LST,CDR,PAIR-KEYWORDS,RST,ALIST,MV-LET,KEYWORDS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PAIR-KEYWORDS">pair-keywords</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a>
  (keywords lst)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (keyword-listp keywords) (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> lst))))
  (if (consp keywords)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (alist rst)
      (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> (cdr keywords) lst)
      (let ((tail (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> (car keywords) rst)))
        (if tail
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons (cons (car tail) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> tail)) alist)
            (remove-keyword (car keywords) rst))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> alist rst))))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil lst)))</pre>
  </div>

<div class="form-block function" id="def-null-pool" data-defines="NULL-POOL" data-references="CDR,BEING-PROVED-BY-INDUCTION,QUOTE,CAR,POOL-ELEMENT,ACCESS,EQ,T,NULL,COND,POOL,DEFUN" data-part-name="NULL-POOL" data-part-args="POOL" data-part-body="CDR,NULL-POOL,BEING-PROVED-BY-INDUCTION,QUOTE,CAR,POOL-ELEMENT,ACCESS,EQ,T,POOL,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NULL-POOL">null-pool</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-null-pool" data-sym="NULL-POOL" title="(defun null-pool (pool)
  (cond ((null pool) t)
        ((eq (access pool-element (car pool) :tag) &#39;being-proved-by-induction)
         (null-pool (cdr pool)))
        (t nil)))">null-pool</a>
  (pool)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pool) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pool-element (car pool) <span class="keyword">:tag</span>)
       'being-proved-by-induction) (<a class="sym-link local-def" href="#def-null-pool" data-sym="NULL-POOL" title="(defun null-pool (pool)
  (cond ((null pool) t)
        ((eq (access pool-element (car pool) :tag) &#39;being-proved-by-induction)
         (null-pool (cdr pool)))
        (t nil)))">null-pool</a> (cdr pool)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil)))</pre>
  </div>

<div class="form-block function" id="def-initial-pspv" data-defines="INITIAL-PSPV" data-references="INITIAL-RCNST-FROM-ENS,*EMPTY-PROVE-SPEC-VAR*,PROVE-SPEC-VAR,CHANGE,ORIG-HINTS,SPLITTER-OUTPUT,STATE,WRLD,ENS,OTF-FLG,DISPLAYED-GOAL,TERM,DEFUN" data-used-by="PC-PROVE" data-part-name="INITIAL-PSPV" data-part-args="ORIG-HINTS,SPLITTER-OUTPUT,STATE,WRLD,ENS,OTF-FLG,DISPLAYED-GOAL,TERM" data-part-body="ORIG-HINTS,OTF-FLG,DISPLAYED-GOAL,TERM,SPLITTER-OUTPUT,STATE,WRLD,ENS,INITIAL-RCNST-FROM-ENS,*EMPTY-PROVE-SPEC-VAR*,PROVE-SPEC-VAR,CHANGE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INITIAL-PSPV">initial-pspv</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-initial-pspv" data-sym="INITIAL-PSPV" title="(defun initial-pspv
       (term displayed-goal otf-flg ens wrld state splitter-output orig-hints)
  (change prove-spec-var *empty-prove-spec-var* :rewrite-constant
          (initial-rcnst-from-ens ens wrld state splitter-output)
          :user-supplied-term term :displayed-goal displayed-goal :otf-flg">initial-pspv</a>
  (term displayed-goal
    otf-flg
    ens
    wrld
    state
    <a class="sym-link system" href="prove.html#def-splitter-output" data-sym="SPLITTER-OUTPUT">splitter-output</a>
    orig-hints)
  (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> prove-spec-var
    *empty-prove-spec-var*
    <span class="keyword">:rewrite-constant</span> (initial-rcnst-from-ens ens wrld state <a class="sym-link system" href="prove.html#def-splitter-output" data-sym="SPLITTER-OUTPUT">splitter-output</a>)
    <span class="keyword">:user-supplied-term</span> term
    <span class="keyword">:displayed-goal</span> displayed-goal
    <span class="keyword">:otf-flg</span> otf-flg
    <span class="keyword">:orig-hints</span> orig-hints))</pre>
  </div>

<div class="form-block function" id="def-pc-prove" data-defines="PC-PROVE" data-references="VALUE,CHK-ASSUMPTION-FREE-TTREE,ER-PROGN,PROVE-LOOP,PUSH-CURRENT-ACL2-WORLD,SAVED-OUTPUT-REVERSED,F-PUT-GLOBAL,PPROGN,SAVED-OUTPUT-TOKEN-LST,T,SAVED-OUTPUT-P,STATE-GLOBAL-LET*,IN-VERIFY-FLG,QUOTE,F-GET-GLOBAL,IF,LIST,CLAUSES,SPLITTER-OUTPUT,INITIAL-PSPV,PSPV,LET,TTREE,ER-LET*,STATE,CTX,WRLD,ENS,OTF-FLG,HINTS,DISPLAYED-GOAL,TERM,DEFUN" data-used-by="PROVER-CALL" data-part-name="PC-PROVE" data-part-args="STATE,CTX,WRLD,ENS,OTF-FLG,HINTS,DISPLAYED-GOAL,TERM" data-part-body="VALUE,CHK-ASSUMPTION-FREE-TTREE,ER-PROGN,CTX,PROVE-LOOP,PUSH-CURRENT-ACL2-WORLD,SAVED-OUTPUT-REVERSED,F-PUT-GLOBAL,PPROGN,SAVED-OUTPUT-TOKEN-LST,T,SAVED-OUTPUT-P,STATE-GLOBAL-LET*,IN-VERIFY-FLG,QUOTE,F-GET-GLOBAL,IF,LIST,CLAUSES,HINTS,SPLITTER-OUTPUT,STATE,WRLD,ENS,OTF-FLG,DISPLAYED-GOAL,TERM,INITIAL-PSPV,PSPV,LET,TTREE,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-PROVE">pc-prove</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-prove" data-sym="PC-PROVE" title="(defun pc-prove (term displayed-goal hints otf-flg ens wrld ctx state)
  (er-let*
   ((ttree
     (let ((pspv
            (initial-pspv term displayed-goal otf-flg ens wrld state
...">pc-prove</a>
  (term displayed-goal hints otf-flg ens wrld ctx state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((ttree (let ((pspv (<a class="sym-link local-def" href="#def-initial-pspv" data-sym="INITIAL-PSPV" title="(defun initial-pspv
       (term displayed-goal otf-flg ens wrld state splitter-output orig-hints)
  (change prove-spec-var *empty-prove-spec-var* :rewrite-constant
          (initial-rcnst-from-ens ens wrld state splitter-output)
          :user-supplied-term term :displayed-goal displayed-goal :otf-flg">initial-pspv</a> term
              displayed-goal
              otf-flg
              ens
              wrld
              state
              (<a class="sym-link system" href="prove.html#def-splitter-output" data-sym="SPLITTER-OUTPUT">splitter-output</a>)
              hints)) (clauses (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> term))))
         (if (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-verify-flg state)
           (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((saved-output-p <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (saved-output-token-lst <span class="keyword">:all</span>))
             (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'saved-output-reversed nil state)
               (<a class="sym-link system" href="prove.html#def-push-current-acl2-world" data-sym="PUSH-CURRENT-ACL2-WORLD">push-current-acl2-world</a> 'saved-output-reversed state)
               (<a class="sym-link system" href="prove.html#def-prove-loop" data-sym="PROVE-LOOP">prove-loop</a> clauses pspv hints ens wrld ctx state)))
           (<a class="sym-link system" href="prove.html#def-prove-loop" data-sym="PROVE-LOOP">prove-loop</a> clauses pspv hints ens wrld ctx state)))))
    (<a class="sym-link system" href="axioms.html#def-er-progn" data-sym="ER-PROGN">er-progn</a> (<a class="sym-link system" href="prove.html#def-chk-assumption-free-ttree" data-sym="CHK-ASSUMPTION-FREE-TTREE">chk-assumption-free-ttree</a> ttree ctx state)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> ttree))))</pre>
  </div>

<div class="form-block function" id="def-abbreviations-alist-_3F" data-defines="ABBREVIATIONS-ALIST-?" data-references="CDR,CDAR,CAAR,?,QUOTE,FCONS-TERM*,CONS,CONSP,IF,ABBREVIATIONS,DEFUN" data-used-by="PROVER-CALL" data-part-name="ABBREVIATIONS-ALIST-?" data-part-args="ABBREVIATIONS" data-part-body="CDR,ABBREVIATIONS-ALIST-?,CDAR,CAAR,?,QUOTE,FCONS-TERM*,CONS,ABBREVIATIONS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABBREVIATIONS-ALIST-?">abbreviations-alist-?</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-abbreviations-alist-_3F" data-sym="ABBREVIATIONS-ALIST-?" title="(defun abbreviations-alist-? (abbreviations)
  (if (consp abbreviations)
      (cons (cons (fcons-term* &#39;? (caar abbreviations)) (cdar abbreviations))
            (abbreviations-alist-? (cdr abbreviations)))
      nil))">abbreviations-alist-?</a>
  (abbreviations)
  (if (consp abbreviations)
    (cons (cons (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link local-def" href="#def-_3F" data-sym="?" title="(defmacro ? (x) `(?-fn &#39;,x))">?</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> abbreviations))
        (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> abbreviations))
      (<a class="sym-link local-def" href="#def-abbreviations-alist-_3F" data-sym="ABBREVIATIONS-ALIST-?" title="(defun abbreviations-alist-? (abbreviations)
  (if (consp abbreviations)
      (cons (cons (fcons-term* &#39;? (caar abbreviations)) (cdar abbreviations))
            (abbreviations-alist-? (cdr abbreviations)))
      nil))">abbreviations-alist-?</a> (cdr abbreviations)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-find-_3F-fn" data-defines="FIND-?-FN" data-references="CDR,UNION-EQUAL,CADR,LIST,?-FN,QUOTE,CAR,EQ,ATOM,IF,X,DEFUN" data-used-by="PROVER-CALL" data-part-name="FIND-?-FN" data-part-args="X" data-part-body="CDR,FIND-?-FN,UNION-EQUAL,CADR,LIST,?-FN,QUOTE,CAR,EQ,X,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-?-FN">find-?-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-_3F-fn" data-sym="FIND-?-FN" title="(defun find-?-fn (x)
  (if (atom x)
      nil
      (if (eq (car x) &#39;?-fn)
          (list (cadr x))">find-?-fn</a>
  (x)
  (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> x)
    nil
    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '?-fn)
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> x))
      (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (<a class="sym-link local-def" href="#def-find-_3F-fn" data-sym="FIND-?-FN" title="(defun find-?-fn (x)
  (if (atom x)
      nil
      (if (eq (car x) &#39;?-fn)
          (list (cadr x))">find-?-fn</a> (car x)) (<a class="sym-link local-def" href="#def-find-_3F-fn" data-sym="FIND-?-FN" title="(defun find-?-fn (x)
  (if (atom x)
      nil
      (if (eq (car x) &#39;?-fn)
          (list (cadr x))">find-?-fn</a> (cdr x))))))</pre>
  </div>

<div class="form-block function" id="def-unproved-pc-prove-clauses" data-defines="UNPROVED-PC-PROVE-CLAUSES" data-references="TAGGED-OBJECTS,REVERSE-STRIP-CDRS,TTREE,DEFUN" data-part-name="UNPROVED-PC-PROVE-CLAUSES" data-part-args="TTREE" data-part-body="TTREE,TAGGED-OBJECTS,REVERSE-STRIP-CDRS" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNPROVED-PC-PROVE-CLAUSES">unproved-pc-prove-clauses</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-unproved-pc-prove-clauses" data-sym="UNPROVED-PC-PROVE-CLAUSES" title="(defun unproved-pc-prove-clauses (ttree)
  (reverse-strip-cdrs (tagged-objects :bye ttree) nil))">unproved-pc-prove-clauses</a>
  (ttree)
  (<a class="sym-link system" href="axioms.html#def-reverse-strip-cdrs" data-sym="REVERSE-STRIP-CDRS">reverse-strip-cdrs</a> (tagged-objects <span class="keyword">:bye</span> ttree) nil))</pre>
  </div>

<div class="form-block function" id="def-prover-call" data-defines="PROVER-CALL" data-references="UNTRANSLATE,PC-PROVE,PROVER-CALL-TTREE,PROVER-CALL-OTF-FLG,DEFAULT-HINTS,TRANSLATE-HINTS+,FMS0,PROOF-BUILDER,IO?,LENGTH,ZERO-ONE-OR-MORE,FIND-?-FN,?-EXPRS,ASSOC-EQ,CDR,ABBREVIATIONS-ALIST-?,SUBLIS-EQUAL,UN-?-HINTS,PROVER-CALL-HINTS,PROVER-CALL-ERP,T,MV,MAKE-PRETTY-PC-INSTR,CONS,LIST,PRINT-NO-CHANGE,PPROGN,IF,QUOTE,PAIR-KEYWORDS,PROVER-CALL-TAIL,PROVER-CALL-PAIRS,MV-LET,MAKE-PC-ENS,PROVER-CALL-PC-ENS,W,PROVER-CALL-WRLD,ACCESS,PROVER-CALL-ABBREVIATIONS,LET,KEYWORDP,XARGS,DECLARE,STATE,PC-STATE,REST-ARGS,TERM-TO-PROVE,COMM,DEFUN" data-part-name="PROVER-CALL" data-part-args="STATE,PC-STATE,REST-ARGS,TERM-TO-PROVE,COMM" data-part-declare="COMM,KEYWORDP,XARGS,DECLARE" data-part-body="UNTRANSLATE,TERM-TO-PROVE,PC-PROVE,PROVER-CALL-TTREE,PROVER-CALL-OTF-FLG,DEFAULT-HINTS,TRANSLATE-HINTS+,FMS0,PROOF-BUILDER,IO?,LENGTH,ZERO-ONE-OR-MORE,FIND-?-FN,?-EXPRS,ASSOC-EQ,CDR,ABBREVIATIONS-ALIST-?,SUBLIS-EQUAL,UN-?-HINTS,PROVER-CALL-HINTS,PROVER-CALL-ERP,T,MV,MAKE-PRETTY-PC-INSTR,COMM,CONS,LIST,PRINT-NO-CHANGE,PPROGN,IF,REST-ARGS,QUOTE,PAIR-KEYWORDS,PROVER-CALL-TAIL,PROVER-CALL-PAIRS,MV-LET,MAKE-PC-ENS,PROVER-CALL-PC-ENS,STATE,W,PROVER-CALL-WRLD,PC-STATE,ACCESS,PROVER-CALL-ABBREVIATIONS,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROVER-CALL">prover-call</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-prover-call" data-sym="PROVER-CALL" title="(defun prover-call (comm term-to-prove rest-args pc-state state)
  (declare (xargs :guard (keywordp comm)))
  (let ((prover-call-abbreviations (access pc-state pc-state :abbreviations))
        (prover-call-wrld (w state)))
    (let ((prover-call-pc-ens
...">prover-call</a>
  (comm term-to-prove rest-args pc-state state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> comm)))
  (let ((prover-call-abbreviations (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state pc-state <span class="keyword">:abbreviations</span>)) (prover-call-wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
    (let ((prover-call-pc-ens (make-pc-ens (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state pc-state <span class="keyword">:pc-ens</span>) state)))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (prover-call-pairs prover-call-tail)
        (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> '(<span class="keyword">:otf-flg</span> <span class="keyword">:hints</span>) rest-args)
        (if prover-call-tail
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The only keywords allowed in the arguments to the ~x0 command ~
                     are :otf-flg and :hints.  Your ~
                     instruction ~x1 violates this requirement."</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 comm)
                (cons #\1 (make-pretty-pc-instr (cons comm rest-args)))))
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (prover-call-erp prover-call-hints state)
            (let ((un-?-hints (sublis-equal (<a class="sym-link local-def" href="#def-abbreviations-alist-_3F" data-sym="ABBREVIATIONS-ALIST-?" title="(defun abbreviations-alist-? (abbreviations)
  (if (consp abbreviations)
      (cons (cons (fcons-term* &#39;? (caar abbreviations)) (cdar abbreviations))
            (abbreviations-alist-? (cdr abbreviations)))
      nil))">abbreviations-alist-?</a> prover-call-abbreviations)
                   (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:hints</span> prover-call-pairs)))))
              (let ((?-exprs (<a class="sym-link local-def" href="#def-find-_3F-fn" data-sym="FIND-?-FN" title="(defun find-?-fn (x)
  (if (atom x)
      nil
      (if (eq (car x) &#39;?-fn)
          (list (cadr x))">find-?-fn</a> un-?-hints)))
                (if ?-exprs
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"You appear to have attempted to use the following ~
                                   abbreviation variable~#0~[~/~/s~], which however ~
                                   ~#0~[~/is~/are~] not among ~
                                   the current abbreviation variables (see SHOW-ABBREVIATIONS):  ~&amp;1."</span>
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> ?-exprs)))
                        (cons #\1 ?-exprs)))
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      nil
                      (fms0 <span class="string">"~|***** Now entering the theorem ~
                                           prover *****~|"</span>))
                    (<a class="sym-link system" href="history-management.html#def-translate-hints_2B" data-sym="TRANSLATE-HINTS+">translate-hints+</a> 'proof-builder
                      un-?-hints
                      (<a class="sym-link system" href="axioms.html#def-default-hints" data-sym="DEFAULT-HINTS">default-hints</a> prover-call-wrld)
                      comm
                      prover-call-wrld
                      state)))))
            (if prover-call-erp
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"Failed to translate hints successfully."</span>)
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
              (let ((prover-call-otf-flg (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:otf-flg</span> prover-call-pairs))))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (prover-call-erp prover-call-ttree state)
                  (<a class="sym-link local-def" href="#def-pc-prove" data-sym="PC-PROVE" title="(defun pc-prove (term displayed-goal hints otf-flg ens wrld ctx state)
  (er-let*
   ((ttree
     (let ((pspv
            (initial-pspv term displayed-goal otf-flg ens wrld state
...">pc-prove</a> term-to-prove
                    (untranslate term-to-prove <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> prover-call-wrld)
                    prover-call-hints
                    prover-call-otf-flg
                    prover-call-pc-ens
                    prover-call-wrld
                    comm
                    state)
                  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder nil state nil (fms0 <span class="string">"~%"</span>))
                    (if prover-call-erp
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"Proof failed."</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
                      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil prover-call-ttree state))))))))))))</pre>
  </div>

<div class="form-block function" id="def-make-new-goals" data-defines="MAKE-NEW-GOALS" data-references="1+,CDR,BUTLAST,DUMB-NEGATE-LIT-LST,LAST,CAR,GOAL,MAKE,CONS,CONSP,IF,START-INDEX,GOAL-NAME,CL-SET,DEFUN" data-part-name="MAKE-NEW-GOALS" data-part-args="START-INDEX,GOAL-NAME,CL-SET" data-part-body="1+,CDR,MAKE-NEW-GOALS,START-INDEX,GOAL-NAME,BUTLAST,DUMB-NEGATE-LIT-LST,LAST,CAR,GOAL,MAKE,CONS,CL-SET,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-NEW-GOALS">make-new-goals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-new-goals" data-sym="MAKE-NEW-GOALS" title="(defun make-new-goals (cl-set goal-name start-index)
  (if (consp cl-set)
      (cons
       (make goal :conc (car (last (car cl-set))) :hyps
             (dumb-negate-lit-lst (butlast (car cl-set) 1)) :current-addr nil
...">make-new-goals</a>
  (cl-set goal-name start-index)
  (if (consp cl-set)
    (cons (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> goal
        <span class="keyword">:conc</span> (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> (car cl-set)))
        <span class="keyword">:hyps</span> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> (car cl-set) <span class="number">1</span>))
        <span class="keyword">:current-addr</span> nil
        <span class="keyword">:goal-name</span> (cons goal-name start-index)
        <span class="keyword">:depends-on</span> <span class="number">1</span>)
      (<a class="sym-link local-def" href="#def-make-new-goals" data-sym="MAKE-NEW-GOALS" title="(defun make-new-goals (cl-set goal-name start-index)
  (if (consp cl-set)
      (cons
       (make goal :conc (car (last (car cl-set))) :hyps
             (dumb-negate-lit-lst (butlast (car cl-set) 1)) :current-addr nil
...">make-new-goals</a> (cdr cl-set) goal-name (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> start-index)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-same-goal" data-defines="SAME-GOAL" data-references="GOAL,ACCESS,EQUAL,AND,GOAL2,GOAL1,DEFUN" data-part-name="SAME-GOAL" data-part-args="GOAL2,GOAL1" data-part-body="GOAL2,GOAL1,GOAL,ACCESS,EQUAL,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAME-GOAL">same-goal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-same-goal" data-sym="SAME-GOAL" title="(defun same-goal (goal1 goal2)
  (and (equal (access goal goal1 :hyps) (access goal goal2 :hyps))
       (equal (access goal goal1 :conc) (access goal goal2 :conc))))">same-goal</a>
  (goal1 goal2)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal1 <span class="keyword">:hyps</span>) (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal2 <span class="keyword">:hyps</span>))
    (equal (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal1 <span class="keyword">:conc</span>) (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal2 <span class="keyword">:conc</span>))))</pre>
  </div>

<div class="form-block function" id="def-remove-byes-from-tag-tree" data-defines="REMOVE-BYES-FROM-TAG-TREE" data-references="REMOVE-TAG-FROM-TAG-TREE,TTREE,DEFUN" data-part-name="REMOVE-BYES-FROM-TAG-TREE" data-part-args="TTREE" data-part-body="TTREE,REMOVE-TAG-FROM-TAG-TREE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-BYES-FROM-TAG-TREE">remove-byes-from-tag-tree</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-remove-byes-from-tag-tree" data-sym="REMOVE-BYES-FROM-TAG-TREE" title="(defun remove-byes-from-tag-tree (ttree) (remove-tag-from-tag-tree :bye ttree))">remove-byes-from-tag-tree</a>
  (ttree)
  (remove-tag-from-tag-tree <span class="keyword">:bye</span> ttree))</pre>
  </div>

<div class="form-block other" id="form-73" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> <a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a>
  (&amp;rest rest-args)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (current-addr (print-no-change2 <span class="string">"The PROVE command should only be used at ~
                       the top.  Use (= T) if that is what you want."</span>))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> rest-args)) (print-no-change2 <span class="string">"The argument list for the PROVE command should ~
                       be empty or a list of even length with keywords in the odd ~
                       positions.  See the documentation for examples and details."</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp ttree state)
        (<a class="sym-link local-def" href="#def-prover-call" data-sym="PROVER-CALL" title="(defun prover-call (comm term-to-prove rest-args pc-state state)
  (declare (xargs :guard (keywordp comm)))
  (let ((prover-call-abbreviations (access pc-state pc-state :abbreviations))
        (prover-call-wrld (w state)))
    (let ((prover-call-pc-ens
...">prover-call</a> <span class="keyword">:prove</span> (make-implication hyps conc)
          rest-args
          pc-state
          state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-clauses (<a class="sym-link local-def" href="#def-unproved-pc-prove-clauses" data-sym="UNPROVED-PC-PROVE-CLAUSES" title="(defun unproved-pc-prove-clauses (ttree)
  (reverse-strip-cdrs (tagged-objects :bye ttree) nil))">unproved-pc-prove-clauses</a> ttree)) (new-goals (<a class="sym-link local-def" href="#def-make-new-goals" data-sym="MAKE-NEW-GOALS" title="(defun make-new-goals (cl-set goal-name start-index)
  (if (consp cl-set)
      (cons
       (make goal :conc (car (last (car cl-set))) :hyps
             (dumb-negate-lit-lst (butlast (car cl-set) 1)) :current-addr nil
...">make-new-goals</a> new-clauses goal-name depends-on))
                (len-new-goals (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new-goals)))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal len-new-goals <span class="number">1</span>)
                   (<a class="sym-link local-def" href="#def-same-goal" data-sym="SAME-GOAL" title="(defun same-goal (goal1 goal2)
  (and (equal (access goal goal1 :hyps) (access goal goal2 :hyps))
       (equal (access goal goal1 :conc) (access goal goal2 :conc))))">same-goal</a> (car new-goals) (car goals))) (print-no-change2 <span class="string">"Exactly one new goal was created by your PROVE ~
                              command, and it has exactly the same hypotheses ~
                              and conclusion as did the current goal."</span>))
                ((tagged-objects 'assumption ttree) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                      <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                          (car goals)
                          <span class="keyword">:conc</span> <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>
                          <span class="keyword">:depends-on</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:depends-on</span>) len-new-goals))
                        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-goals (cdr goals)))
                      <span class="keyword">:local-tag-tree</span> (<a class="sym-link local-def" href="#def-remove-byes-from-tag-tree" data-sym="REMOVE-BYES-FROM-TAG-TREE" title="(defun remove-byes-from-tag-tree (ttree) (remove-tag-from-tag-tree :bye ttree))">remove-byes-from-tag-tree</a> ttree))
                    state))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                      <span class="keyword">:goals</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-goals (cdr goals))
                      <span class="keyword">:local-tag-tree</span> (<a class="sym-link local-def" href="#def-remove-byes-from-tag-tree" data-sym="REMOVE-BYES-FROM-TAG-TREE" title="(defun remove-byes-from-tag-tree (ttree) (remove-tag-from-tag-tree :bye ttree))">remove-byes-from-tag-tree</a> ttree))
                    state))))))))))</pre>
  </div>

<div class="form-block function" id="def-add-string-val-pair-to-string-val-alist-1" data-defines="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" data-references="CAR,T,CDR,REMOVE-KEYWORD,LIST*,CONS,CDAR,ASSOC-KEYWORD,IF,STRING-EQUAL,CAAR,STRINGP,AND,LIST,NULL,COND,REPLACE-P,ALIST,VAL,KEY1,KEY,DEFUN" data-used-by="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!,ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST" data-part-name="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" data-part-args="REPLACE-P,ALIST,VAL,KEY1,KEY" data-part-body="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1,CAR,T,CDR,REMOVE-KEYWORD,LIST*,CONS,REPLACE-P,CDAR,ASSOC-KEYWORD,IF,STRING-EQUAL,CAAR,STRINGP,AND,VAL,KEY1,KEY,LIST,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1">add-string-val-pair-to-string-val-alist-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist-1" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" title="(defun add-string-val-pair-to-string-val-alist-1 (key key1 val alist replace-p)
  (cond ((null alist) (list (list key key1 val)))
        ((and (stringp (caar alist)) (string-equal key (caar alist)))
         (if (assoc-keyword key1 (cdar alist))
             (if replace-p
...">add-string-val-pair-to-string-val-alist-1</a>
  (key key1 val alist replace-p)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> key key1 val)))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (stringp (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)) (<a class="sym-link system" href="axioms.html#def-string-equal" data-sym="STRING-EQUAL">string-equal</a> key (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))) (if (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> key1 (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))
        (if replace-p
          (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)
              key1
              val
              (remove-keyword key1 (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist)))
            (cdr alist))
          alist)
        (cons (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) key1 val (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))
          (cdr alist))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car alist)
        (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist-1" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" title="(defun add-string-val-pair-to-string-val-alist-1 (key key1 val alist replace-p)
  (cond ((null alist) (list (list key key1 val)))
        ((and (stringp (caar alist)) (string-equal key (caar alist)))
         (if (assoc-keyword key1 (cdar alist))
             (if replace-p
...">add-string-val-pair-to-string-val-alist-1</a> key
          key1
          val
          (cdr alist)
          replace-p)))))</pre>
  </div>

<div class="form-block function" id="def-add-string-val-pair-to-string-val-alist" data-defines="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST" data-references="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1,ALIST,VAL,KEY1,KEY,DEFUN" data-part-name="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST" data-part-args="ALIST,VAL,KEY1,KEY" data-part-body="ALIST,VAL,KEY1,KEY,ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST">add-string-val-pair-to-string-val-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST" title="(defun add-string-val-pair-to-string-val-alist (key key1 val alist)
  (add-string-val-pair-to-string-val-alist-1 key key1 val alist nil))">add-string-val-pair-to-string-val-alist</a>
  (key key1 val alist)
  (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist-1" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" title="(defun add-string-val-pair-to-string-val-alist-1 (key key1 val alist replace-p)
  (cond ((null alist) (list (list key key1 val)))
        ((and (stringp (caar alist)) (string-equal key (caar alist)))
         (if (assoc-keyword key1 (cdar alist))
             (if replace-p
...">add-string-val-pair-to-string-val-alist-1</a> key
    key1
    val
    alist
    nil))</pre>
  </div>

<div class="form-block function" id="def-add-string-val-pair-to-string-val-alist_21" data-defines="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!" data-references="T,ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1,ALIST,VAL,KEY1,KEY,DEFUN" data-part-name="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!" data-part-args="ALIST,VAL,KEY1,KEY" data-part-body="T,ALIST,VAL,KEY1,KEY,ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!">add-string-val-pair-to-string-val-alist!</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist_21" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!" title="(defun add-string-val-pair-to-string-val-alist! (key key1 val alist)
  (add-string-val-pair-to-string-val-alist-1 key key1 val alist t))">add-string-val-pair-to-string-val-alist!</a>
  (key key1 val alist)
  (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist-1" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST-1" title="(defun add-string-val-pair-to-string-val-alist-1 (key key1 val alist replace-p)
  (cond ((null alist) (list (list key key1 val)))
        ((and (stringp (caar alist)) (string-equal key (caar alist)))
         (if (assoc-keyword key1 (cdar alist))
             (if replace-p
...">add-string-val-pair-to-string-val-alist-1</a> key
    key1
    val
    alist
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block constant" id="def-_2Abash-skip-forcing-round-hints_2A" data-defines="*BASH-SKIP-FORCING-ROUND-HINTS*" data-references="QUOTE,DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*BASH-SKIP-FORCING-ROUND-HINTS*">*bash-skip-forcing-round-hints*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Abash-skip-forcing-round-hints_2A" data-sym="*BASH-SKIP-FORCING-ROUND-HINTS*" title="(defconst *bash-skip-forcing-round-hints*
          &#39;((&quot;[1]Goal&quot; :by nil) (&quot;[1]Subgoal 1&quot; :by nil)
            (&quot;[1]Subgoal 2&quot; :by nil) (&quot;[1]Subgoal 3&quot; :by nil)
            (&quot;[1]Subgoal 4&quot; :by nil) (&quot;[1]Subgoal 5&quot; :by nil)
            (&quot;[1]Subgoal 6&quot; :by nil) (&quot;[1]Subgoal 7&quot; :by nil)
...">*bash-skip-forcing-round-hints*</a>
  '((<span class="string">"[1]Goal"</span> <span class="keyword">:by</span> nil) (<span class="string">"[1]Subgoal 1"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 2"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 3"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 4"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 5"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 6"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 7"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 8"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 9"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 10"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 11"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 12"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 13"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 14"</span> <span class="keyword">:by</span> nil)
    (<span class="string">"[1]Subgoal 15"</span> <span class="keyword">:by</span> nil)))</pre>
  </div>

<div class="form-block other" id="form-78" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> bash
  (&amp;rest hints)
  (if (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> hints)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:prove</span> <span class="keyword">:hints</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> <a class="sym-link local-def" href="#def-_2Abash-skip-forcing-round-hints_2A" data-sym="*BASH-SKIP-FORCING-ROUND-HINTS*" title="(defconst *bash-skip-forcing-round-hints*
          &#39;((&quot;[1]Goal&quot; :by nil) (&quot;[1]Subgoal 1&quot; :by nil)
            (&quot;[1]Subgoal 2&quot; :by nil) (&quot;[1]Subgoal 3&quot; :by nil)
            (&quot;[1]Subgoal 4&quot; :by nil) (&quot;[1]Subgoal 5&quot; :by nil)
            (&quot;[1]Subgoal 6&quot; :by nil) (&quot;[1]Subgoal 7&quot; :by nil)
...">*bash-skip-forcing-round-hints*</a>
          (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST" title="(defun add-string-val-pair-to-string-val-alist (key key1 val alist)
  (add-string-val-pair-to-string-val-alist-1 key key1 val alist nil))">add-string-val-pair-to-string-val-alist</a> <span class="string">"Goal"</span>
            <span class="keyword">:do-not</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quote
              '(generalize eliminate-destructors
                fertilize
                eliminate-irrelevance))
            (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist_21" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!" title="(defun add-string-val-pair-to-string-val-alist! (key key1 val alist)
  (add-string-val-pair-to-string-val-alist-1 key key1 val alist t))">add-string-val-pair-to-string-val-alist!</a> <span class="string">"Goal"</span>
              <span class="keyword">:do-not-induct</span> 'proof-builder
              hints)))
        <span class="keyword">:otf-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"A BASH instruction must be of the form~%~ ~ ~
              (:BASH (goal_name_1 ...) ... (goal_name_n ...)),~%and hence ~
              your instruction,~%~ ~ ~x0,~%is not legal."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons <span class="keyword">:bash</span> hints))))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))</pre>
  </div>

<div class="form-block other" id="form-79" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> dive
  (n &amp;rest rest-addr)
  (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-a.html#def-bounded-integer-listp" data-sym="BOUNDED-INTEGER-LISTP">bounded-integer-listp</a> <span class="number">1</span> 'infinity <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
    (print-no-change2 <span class="string">"The arguments to DIVE must all be positive integers."</span>)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (subterm cl)
      (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> nil)
      (declare (ignore subterm))
      (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> cl <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (print-no-change2 <span class="string">"Unable to DIVE according to the address~%~ ~ ~y0."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons n rest-addr))))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
            <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                (car goals)
                <span class="keyword">:current-addr</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:current-addr</span>) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
              (cdr goals)))
          state)))))</pre>
  </div>

<div class="form-block other" id="form-80" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> split
  nil
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(<span class="keyword">:prove</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:do-not-induct</span> proof-builder
         <span class="keyword">:do-not</span> '(generalize eliminate-destructors
           fertilize
           eliminate-irrelevance)
         <span class="keyword">:in-theory</span> (theory 'minimal-theory))))))</pre>
  </div>

<div class="form-block other" id="form-81" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> add-abbreviation
  (var &amp;optional raw-term)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp term state)
    (if (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
      (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> raw-term abbreviations <span class="keyword">:add-abbreviation</span>)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state))
      ((<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> var) (if (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> var abbreviations)
          (print-no-change2 <span class="string">"The abbreviation ~x0 has already been used, and stands for  ~x1."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 var)
              (cons #\1 (untrans0 (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> var abbreviations))))))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
              <span class="keyword">:abbreviations</span> (cons (cons var term) abbreviations))
            state)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (print-no-change2 <span class="string">"An abbreviation must be a variable, but ~x0 is not."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 var)))))))</pre>
  </div>

<div class="form-block function" id="def-not-in-domain-eq" data-defines="NOT-IN-DOMAIN-EQ" data-references="CONS,CDR,CAR,ASSOC-EQ,CONSP,SYMBOL-ALISTP,ALISTP,SYMBOL-LISTP,IF,XARGS,DECLARE,ALIST,LST,DEFUN" data-part-name="NOT-IN-DOMAIN-EQ" data-part-args="ALIST,LST" data-part-declare="SYMBOL-ALISTP,ALIST,ALISTP,LST,SYMBOL-LISTP,IF,XARGS,DECLARE" data-part-body="CONS,CDR,NOT-IN-DOMAIN-EQ,ALIST,CAR,ASSOC-EQ,LST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NOT-IN-DOMAIN-EQ">not-in-domain-eq</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-not-in-domain-eq" data-sym="NOT-IN-DOMAIN-EQ" title="(defun not-in-domain-eq (lst alist)
  (declare
   (xargs :guard
    (if (symbol-listp lst)
        (alistp alist)
...">not-in-domain-eq</a>
  (lst alist)
  (declare (xargs <span class="keyword">:guard</span> (if (<a class="sym-link system" href="axioms.html#def-symbol-listp" data-sym="SYMBOL-LISTP">symbol-listp</a> lst)
        (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> alist)
        (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist))))
  (if (consp lst)
    (if (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car lst) alist)
      (<a class="sym-link local-def" href="#def-not-in-domain-eq" data-sym="NOT-IN-DOMAIN-EQ" title="(defun not-in-domain-eq (lst alist)
  (declare
   (xargs :guard
    (if (symbol-listp lst)
        (alistp alist)
...">not-in-domain-eq</a> (cdr lst) alist)
      (cons (car lst) (<a class="sym-link local-def" href="#def-not-in-domain-eq" data-sym="NOT-IN-DOMAIN-EQ" title="(defun not-in-domain-eq (lst alist)
  (declare
   (xargs :guard
    (if (symbol-listp lst)
        (alistp alist)
...">not-in-domain-eq</a> (cdr lst) alist)))
    nil))</pre>
  </div>

<div class="form-block other" id="form-83" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> remove-abbreviations
  (&amp;rest vars)
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> abbreviations)
    (print-no-change2 <span class="string">"There are currently no abbreviations."</span>)
    (let ((badvars (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> (<a class="sym-link local-def" href="#def-not-in-domain-eq" data-sym="NOT-IN-DOMAIN-EQ" title="(defun not-in-domain-eq (lst alist)
  (declare
   (xargs :guard
    (if (symbol-listp lst)
        (alistp alist)
...">not-in-domain-eq</a> vars abbreviations))))
      (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> badvars)
        (print-no-change2 <span class="string">"The variable~#0~[~/~/s~] ~&amp;1 ~
                             ~#0~[~/is not currently an abbreviation variable~/~
                                    are not currently abbreviation variables~]."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> badvars)))
            (cons #\1 badvars)))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
            <span class="keyword">:abbreviations</span> (if <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
              (<a class="sym-link system" href="prove.html#def-remove1-assoc-eq-lst" data-sym="REMOVE1-ASSOC-EQ-LST">remove1-assoc-eq-lst</a> vars abbreviations)
              nil))
          state)))))</pre>
  </div>

<div class="form-block function" id="def-print-abbreviations" data-defines="PRINT-ABBREVIATIONS" data-references="EQUAL,REMOVE1-ASSOC-EQ,UNTRANS-2,CDR,UNTRANS0,UNTRANS-1,CONS,LIST,CAR,ASSOC-EQUAL,PAIR,LET,FMS0,PROOF-BUILDER,IO?,PPROGN,NULL,IF,SYMBOL-ALISTP,TRUE-LISTP,AND,XARGS,DECLARE,STATE,ABBREVIATIONS,VARS,DEFUN" data-part-name="PRINT-ABBREVIATIONS" data-part-args="STATE,ABBREVIATIONS,VARS" data-part-declare="ABBREVIATIONS,SYMBOL-ALISTP,VARS,TRUE-LISTP,AND,XARGS,DECLARE" data-part-body="PRINT-ABBREVIATIONS,EQUAL,REMOVE1-ASSOC-EQ,UNTRANS-2,CDR,UNTRANS0,UNTRANS-1,CONS,LIST,ABBREVIATIONS,CAR,ASSOC-EQUAL,PAIR,LET,FMS0,PROOF-BUILDER,IO?,PPROGN,STATE,VARS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ABBREVIATIONS">print-abbreviations</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-abbreviations" data-sym="PRINT-ABBREVIATIONS" title="(defun print-abbreviations (vars abbreviations state)
  (declare
   (xargs :guard (and (true-listp vars) (symbol-alistp abbreviations))))
  (if (null vars)
      state
...">print-abbreviations</a>
  (vars abbreviations state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> vars) (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> abbreviations))))
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> vars)
    state
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder nil state nil (fms0 <span class="string">"~%"</span>))
      (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-equal" data-sym="ASSOC-EQUAL">assoc-equal</a> (car vars) abbreviations)))
        (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pair)
          (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
            nil
            state
            (vars)
            (fms0 <span class="string">"*** ~x0 does not abbreviate a term.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (car vars)))))
          (let ((untrans-1 (untrans0 (cdr pair))) (untrans-2 (untrans0 (cdr pair)
                  nil
                  (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> (car pair) abbreviations))))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                nil
                state
                (pair)
                (fms0 <span class="string">"(? ~x0) is an abbreviation for:~%~ ~ "</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (car pair)))))
              (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                nil
                state
                (untrans-1)
                (fms0 <span class="string">"~y0~|"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 untrans-1)) <span class="number">2</span>))
              (if (equal untrans-1 untrans-2)
                state
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder nil state nil (fms0 <span class="string">"i.e. for~%~ ~ "</span>))
                  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                    nil
                    state
                    (untrans-2)
                    (fms0 <span class="string">"~y0~|"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 untrans-2)) <span class="number">2</span>))))))))
      (<a class="sym-link local-def" href="#def-print-abbreviations" data-sym="PRINT-ABBREVIATIONS" title="(defun print-abbreviations (vars abbreviations state)
  (declare
   (xargs :guard (and (true-listp vars) (symbol-alistp abbreviations))))
  (if (null vars)
      state
...">print-abbreviations</a> (cdr vars) abbreviations state))))</pre>
  </div>

<div class="form-block other" id="form-85" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> show-abbreviations
  (&amp;rest vars)
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
      nil
      state
      nil
      (fms0 <span class="string">"~|There are currently no abbreviations.~%"</span>))
    (<a class="sym-link local-def" href="#def-print-abbreviations" data-sym="PRINT-ABBREVIATIONS" title="(defun print-abbreviations (vars abbreviations state)
  (declare
   (xargs :guard (and (true-listp vars) (symbol-alistp abbreviations))))
  (if (null vars)
      state
...">print-abbreviations</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> vars (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      state)))</pre>
  </div>

<div class="form-block function" id="def-drop-from-end" data-defines="DROP-FROM-END" data-references="-,TAKE,LENGTH,<=,TRUE-LISTP,<,NOT,INTEGERP,AND,XARGS,DECLARE,L,N,DEFUN" data-part-name="DROP-FROM-END" data-part-args="L,N" data-part-declare="LENGTH,<=,L,TRUE-LISTP,<,NOT,N,INTEGERP,AND,XARGS,DECLARE" data-part-body="N,L,LENGTH,-,TAKE" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DROP-FROM-END">drop-from-end</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-drop-from-end" data-sym="DROP-FROM-END" title="(defun drop-from-end (n l)
  (declare
   (xargs :guard
    (and (integerp n) (not (&lt; n 0)) (true-listp l) (&lt;= n (length l)))))
  (take (- (length l) n) l))">drop-from-end</a>
  (n l)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp n)
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (&lt; n <span class="number">0</span>))
        (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> l)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> l)))))
  (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> l) n) l))</pre>
  </div>

<div class="form-block other" id="form-87" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> up
  (&amp;optional n)
  (let ((n (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> n <span class="number">1</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> current-addr) (print-no-change2 <span class="string">"Already at the top."</span>))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp n) (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> n <span class="number">0</span>))) (print-no-change2 <span class="string">"If UP is supplied with an argument, it must be ~
                              a positive integer or NIL, unlike ~x0."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 n))))
      ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> current-addr)) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
            <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                (car goals)
                <span class="keyword">:current-addr</span> (<a class="sym-link local-def" href="#def-drop-from-end" data-sym="DROP-FROM-END" title="(defun drop-from-end (n l)
  (declare
   (xargs :guard
    (and (integerp n) (not (&lt; n 0)) (true-listp l) (&lt;= n (length l)))))
  (take (- (length l) n) l))">drop-from-end</a> n current-addr))
              (cdr goals)))
          state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (print-no-change2 <span class="string">"Can only go up ~x0 level~#1~[~/~/s~]."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> current-addr))
            (cons #\1 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> current-addr)))))))))</pre>
  </div>

<div class="form-block other" id="form-88" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> top
  nil
  (when-goals-trip (let ((current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:up</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> current-addr))))))</pre>
  </div>

<div class="form-block macro" id="def-expand-address-recurse" data-defines="EXPAND-ADDRESS-RECURSE" data-references="MV,IF,WRLD,ABBREVIATIONS,EXPAND-ADDRESS,ERP,MV-LET,QUASIQUOTE,ACCUMULATED-ADDR-R,NEW-ACCUMULATED-ADDR-R,NEW-IFF-FLG,TERM,NEW-TERM,RAW-TERM,NTH,NEW-RAW-TERM,CDR,NEW-ADDR,REST-ADDR,ADDR,CAR,CONS,QUOTE,ANS,&KEY,DEFMACRO" data-used-by="EXPAND-ADDRESS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-ADDRESS-RECURSE">expand-address-recurse</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a>
  (&amp;key (ans '(cons (car addr) rest-addr))
    (new-addr '(cdr addr))
    (new-raw-term '(<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (car addr) raw-term))
    (new-term '(<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (car addr) term))
    (new-iff-flg 'nil)
    (new-accumulated-addr-r '(cons (car addr) accumulated-addr-r)))
  `(<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp rest-addr)
    (<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a> ,NEW-ADDR
      ,NEW-RAW-TERM
      ,NEW-TERM
      abbreviations
      ,NEW-IFF-FLG
      ,NEW-ACCUMULATED-ADDR-R
      wrld)
    (if erp
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp rest-addr)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil ,ANS))))</pre>
  </div>

<div class="form-block macro" id="def-dive-once-more-error" data-defines="DIVE-ONCE-MORE-ERROR" data-references="ADDR,CAR,ACCUMULATED-ADDR-R,REVERSE,RAW-TERM,CONS,LIST,MV,QUOTE,DEFMACRO" data-used-by="EXPAND-ADDRESS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DIVE-ONCE-MORE-ERROR">dive-once-more-error</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-dive-once-more-error" data-sym="DIVE-ONCE-MORE-ERROR" title="(defmacro dive-once-more-error ()
  &#39;(mv &quot;When diving to subterm ~x0 using address ~x1, ~
              the additional dive to ~x2 was impossible.&quot;
       (list (cons #\0 raw-term) (cons #\1 (reverse accumulated-addr-r))
             (cons #\2 (car addr)))))">dive-once-more-error</a>
  nil
  '(<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"When diving to subterm ~x0 using address ~x1, ~
              the additional dive to ~x2 was impossible."</span>
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 raw-term)
      (cons #\1 (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> accumulated-addr-r))
      (cons #\2 (car addr)))))</pre>
  </div>

<div class="form-block function" id="def-abbreviation-raw-term-p" data-defines="ABBREVIATION-RAW-TERM-P" data-references="?,QUOTE,CAR,EQ,CONSP,AND,X,DEFUN" data-used-by="EXPAND-ADDRESS" data-part-name="ABBREVIATION-RAW-TERM-P" data-part-args="X" data-part-body="?,QUOTE,CAR,EQ,X,CONSP,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ABBREVIATION-RAW-TERM-P">abbreviation-raw-term-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-abbreviation-raw-term-p" data-sym="ABBREVIATION-RAW-TERM-P" title="(defun abbreviation-raw-term-p (x) (and (consp x) (eq (car x) &#39;?)))">abbreviation-raw-term-p</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp x) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car x) '<a class="sym-link local-def" href="#def-_3F" data-sym="?" title="(defmacro ? (x) `(?-fn &#39;,x))">?</a>)))</pre>
  </div>

<div class="form-block macro" id="def-addr-recur" data-defines="ADDR-RECUR" data-references="NOT,QUOTE,EQ,CONS,MV,MSGP,NOT-FLG,NEW-IFF-FLG,NEW-TERM,ADDR,MV-LET,INTEGERP,IF,QUASIQUOTE,B,POS,DEFMACRO" data-used-by="AND-ADDR,OR-ADDR" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADDR-RECUR">addr-recur</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-addr-recur" data-sym="ADDR-RECUR" title="(defmacro addr-recur (pos b)
  `(if (integerp ,pos)
       (mv-let (addr new-term new-iff-flg not-flg) ,b
               (if (msgp addr)
                   (mv addr nil nil nil)
...">addr-recur</a>
  (pos b)
  `(if (integerp ,POS)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (addr new-term new-iff-flg not-flg)
      ,B
      (if (<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a> addr)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> addr nil nil nil)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (cons ,POS addr) new-term new-iff-flg not-flg)))
    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> ,POS '<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>)
      ,(CASE-MATCH B ((&#39;MV &#39;NIL X Y &#39;NIL) `(MV NIL ,X ,Y T))
             (&amp; &#39;(MV &quot;a NOT term unexpected by the code; sorry&quot; NIL NIL NIL)))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ,POS nil nil nil))))</pre>
  </div>

<div class="form-block function" id="def-or-addr" data-defines="OR-ADDR" data-references="&,MSG,NOT,FFN-SYMB-P,*T*,T,1-,ADDR-RECUR,MV,INT=,COND,IGNORE,DECLARE,X2,X1,IF,QUOTE,CASE-MATCH,IFF-FLG,TERM,N,DEFUN" data-used-by="EXPAND-ADDRESS" data-part-name="OR-ADDR" data-part-args="IFF-FLG,TERM,N" data-part-body="&,MSG,NOT,FFN-SYMB-P,*T*,T,IFF-FLG,1-,OR-ADDR,ADDR-RECUR,MV,N,INT=,COND,IGNORE,DECLARE,X2,X1,IF,QUOTE,TERM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="OR-ADDR">or-addr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-or-addr" data-sym="OR-ADDR" title="(defun or-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x1 x2) (declare (ignore x1))
               (cond
                ((int= n 1)
...">or-addr</a>
  (n term iff-flg)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
    (('if x1 x1 x2) (declare (ignore x1))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"of an ambiguity: the first argument of the OR term occurs ~
                  twice in the IF term that represents the OR term"</span>
            nil
            nil
            nil))
        ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">2</span>) (<a class="sym-link local-def" href="#def-addr-recur" data-sym="ADDR-RECUR" title="(defmacro addr-recur (pos b)
  `(if (integerp ,pos)
       (mv-let (addr new-term new-iff-flg not-flg) ,b
               (if (msgp addr)
                   (mv addr nil nil nil)
...">addr-recur</a> <span class="number">3</span> (<a class="sym-link local-def" href="#def-or-addr" data-sym="OR-ADDR" title="(defun or-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x1 x2) (declare (ignore x1))
               (cond
                ((int= n 1)
...">or-addr</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) x2 iff-flg)))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"of an index that is out of range"</span> nil nil nil))))
    (('if x1 x2 <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> x1 '<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '(<span class="number">1</span>) x1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"that dive has led us to the first argument of ~
                             the term ~x0, but we expected to reach a call of ~
                             ~x1"</span>
                  term
                  '<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>)
                nil
                nil
                nil))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-addr-recur" data-sym="ADDR-RECUR" title="(defmacro addr-recur (pos b)
  `(if (integerp ,pos)
       (mv-let (addr new-term new-iff-flg not-flg) ,b
               (if (msgp addr)
                   (mv addr nil nil nil)
...">addr-recur</a> <span class="number">2</span> (<a class="sym-link local-def" href="#def-or-addr" data-sym="OR-ADDR" title="(defun or-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x1 x2) (declare (ignore x1))
               (cond
                ((int= n 1)
...">or-addr</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) x2 iff-flg)))))
    (('if x1 <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a> x2) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '(<span class="number">1</span>) x1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-addr-recur" data-sym="ADDR-RECUR" title="(defmacro addr-recur (pos b)
  `(if (integerp ,pos)
       (mv-let (addr new-term new-iff-flg not-flg) ,b
               (if (msgp addr)
                   (mv addr nil nil nil)
...">addr-recur</a> <span class="number">3</span> (<a class="sym-link local-def" href="#def-or-addr" data-sym="OR-ADDR" title="(defun or-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x1 x2) (declare (ignore x1))
               (cond
                ((int= n 1)
...">or-addr</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) x2 iff-flg)))))
    (&amp; (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil term iff-flg nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"a non-IF term was encountered when diving to the first ~
                 argument (perhaps because your DV argument was greater than ~
                 the number of disjuncts)."</span>
            nil
            nil
            nil))))))</pre>
  </div>

<div class="form-block function" id="def-and-addr" data-defines="AND-ADDR" data-references="&,NOT,FFN-SYMB-P,1-,ADDR-RECUR,T,MV,INT=,COND,*NIL*,X2,X1,IF,QUOTE,CASE-MATCH,IFF-FLG,TERM,N,DEFUN" data-used-by="EXPAND-ADDRESS" data-part-name="AND-ADDR" data-part-args="IFF-FLG,TERM,N" data-part-body="&,NOT,FFN-SYMB-P,IFF-FLG,1-,AND-ADDR,ADDR-RECUR,T,MV,N,INT=,COND,*NIL*,X2,X1,IF,QUOTE,TERM,CASE-MATCH" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="AND-ADDR">and-addr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-and-addr" data-sym="AND-ADDR" title="(defun and-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x2 *nil*)
               (cond ((int= n 1) (mv &#39;(1) x1 t nil))
                     (t (addr-recur 2 (and-addr (1- n) x2 iff-flg)))))
...">and-addr</a>
  (n term iff-flg)
  (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> term
    (('if x1 x2 <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '(<span class="number">1</span>) x1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-addr-recur" data-sym="ADDR-RECUR" title="(defmacro addr-recur (pos b)
  `(if (integerp ,pos)
       (mv-let (addr new-term new-iff-flg not-flg) ,b
               (if (msgp addr)
                   (mv addr nil nil nil)
...">addr-recur</a> <span class="number">2</span> (<a class="sym-link local-def" href="#def-and-addr" data-sym="AND-ADDR" title="(defun and-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x2 *nil*)
               (cond ((int= n 1) (mv &#39;(1) x1 t nil))
                     (t (addr-recur 2 (and-addr (1- n) x2 iff-flg)))))
...">and-addr</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) x2 iff-flg)))))
    (('if x1 <a class="sym-link system" href="axioms.html#def-_2Anil_2A" data-sym="*NIL*">*nil*</a> x2) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> x1 '<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> '(<span class="number">1</span>) x1 <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"of an unexpected case of diving to the first ~
                        argument: for an if-then-else term with THEN branch ~
                        of nil, the TEST was expected to be a call of NOT"</span>
                nil
                nil
                nil))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-addr-recur" data-sym="ADDR-RECUR" title="(defmacro addr-recur (pos b)
  `(if (integerp ,pos)
       (mv-let (addr new-term new-iff-flg not-flg) ,b
               (if (msgp addr)
                   (mv addr nil nil nil)
...">addr-recur</a> <span class="number">3</span> (<a class="sym-link local-def" href="#def-and-addr" data-sym="AND-ADDR" title="(defun and-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x2 *nil*)
               (cond ((int= n 1) (mv &#39;(1) x1 t nil))
                     (t (addr-recur 2 (and-addr (1- n) x2 iff-flg)))))
...">and-addr</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) x2 iff-flg)))))
    (&amp; (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> n <span class="number">1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil term iff-flg nil))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"a non-IF term was encountered when diving to the first ~
                 argument (perhaps because your DV argument was greater than ~
                 the number of conjuncts)"</span>
            nil
            nil
            nil))))))</pre>
  </div>

<div class="form-block other" id="form-95" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-set-table-guard" data-sym="SET-TABLE-GUARD">set-table-guard</a> <a class="sym-link local-def" href="#def-dive-into-macros-table" data-sym="DIVE-INTO-MACROS-TABLE" title="(defun dive-into-macros-table (wrld)
  (declare (xargs :guard (plist-worldp wrld)))
  (table-alist &#39;dive-into-macros-table wrld))">dive-into-macros-table</a>
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp key)
    (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> val world)
        (equal (<a class="sym-link system" href="axioms.html#def-stobjs-in" data-sym="STOBJS-IN">stobjs-in</a> val world) '(nil nil nil nil))
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> val <a class="sym-link system" href="axioms.html#def-_2Attag-fns_2A" data-sym="*TTAG-FNS*">*ttag-fns*</a>))
        (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> val (<a class="sym-link system" href="axioms.html#def-global-val" data-sym="GLOBAL-VAL">global-val</a> 'untouchable-fns world))))
      (integerp val)
      (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val))))</pre>
  </div>

<div class="form-block macro" id="def-add-dive-into-macro" data-defines="ADD-DIVE-INTO-MACRO" data-references="QUOTE,DIVE-INTO-MACROS-TABLE,TABLE,QUASIQUOTE,VAL,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ADD-DIVE-INTO-MACRO">add-dive-into-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-add-dive-into-macro" data-sym="ADD-DIVE-INTO-MACRO" title="(defmacro add-dive-into-macro (name val)
  `(table dive-into-macros-table &#39;,name &#39;,val))">add-dive-into-macro</a>
  (name val)
  `(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> <a class="sym-link local-def" href="#def-dive-into-macros-table" data-sym="DIVE-INTO-MACROS-TABLE" title="(defun dive-into-macros-table (wrld)
  (declare (xargs :guard (plist-worldp wrld)))
  (table-alist &#39;dive-into-macros-table wrld))">dive-into-macros-table</a> ',NAME ',VAL))</pre>
  </div>

<div class="form-block macro" id="def-remove-dive-into-macro" data-defines="REMOVE-DIVE-INTO-MACRO" data-references="QUOTE,DIVE-INTO-MACROS-TABLE,TABLE,QUASIQUOTE,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="REMOVE-DIVE-INTO-MACRO">remove-dive-into-macro</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-remove-dive-into-macro" data-sym="REMOVE-DIVE-INTO-MACRO" title="(defmacro remove-dive-into-macro (name)
  `(table dive-into-macros-table &#39;,name nil))">remove-dive-into-macro</a>
  (name)
  `(<a class="sym-link system" href="axioms.html#def-table" data-sym="TABLE">table</a> <a class="sym-link local-def" href="#def-dive-into-macros-table" data-sym="DIVE-INTO-MACROS-TABLE" title="(defun dive-into-macros-table (wrld)
  (declare (xargs :guard (plist-worldp wrld)))
  (table-alist &#39;dive-into-macros-table wrld))">dive-into-macros-table</a> ',NAME nil))</pre>
  </div>

<div class="form-block function" id="def-dive-into-macros-table" data-defines="DIVE-INTO-MACROS-TABLE" data-references="QUOTE,TABLE-ALIST,PLIST-WORLDP,XARGS,DECLARE,WRLD,DEFUN" data-used-by="EXPAND-ADDRESS,REMOVE-DIVE-INTO-MACRO,ADD-DIVE-INTO-MACRO" data-part-name="DIVE-INTO-MACROS-TABLE" data-part-args="WRLD" data-part-declare="WRLD,PLIST-WORLDP,XARGS,DECLARE" data-part-body="WRLD,DIVE-INTO-MACROS-TABLE,QUOTE,TABLE-ALIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DIVE-INTO-MACROS-TABLE">dive-into-macros-table</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-dive-into-macros-table" data-sym="DIVE-INTO-MACROS-TABLE" title="(defun dive-into-macros-table (wrld)
  (declare (xargs :guard (plist-worldp wrld)))
  (table-alist &#39;dive-into-macros-table wrld))">dive-into-macros-table</a>
  (wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-plist-worldp" data-sym="PLIST-WORLDP">plist-worldp</a> wrld)))
  (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> '<a class="sym-link local-def" href="#def-dive-into-macros-table" data-sym="DIVE-INTO-MACROS-TABLE" title="(defun dive-into-macros-table (wrld)
  (declare (xargs :guard (plist-worldp wrld)))
  (table-alist &#39;dive-into-macros-table wrld))">dive-into-macros-table</a> wrld))</pre>
  </div>

<div class="form-block function" id="def-rassoc-eq-as-car" data-defines="RASSOC-EQ-AS-CAR" data-references="T,CDR,CAR,EQ,ENDP,COND,ALIST,KEY,DEFUN" data-used-by="EXPAND-ADDRESS" data-part-name="RASSOC-EQ-AS-CAR" data-part-args="ALIST,KEY" data-part-body="RASSOC-EQ-AS-CAR,T,CDR,CAR,KEY,EQ,ALIST,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RASSOC-EQ-AS-CAR">rassoc-eq-as-car</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-rassoc-eq-as-car" data-sym="RASSOC-EQ-AS-CAR" title="(defun rassoc-eq-as-car (key alist)
  (cond ((endp alist) nil) ((eq key (car (cdr (car alist)))) (car alist))
        (t (rassoc-eq-as-car key (cdr alist)))))">rassoc-eq-as-car</a>
  (key alist)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> alist) nil)
    ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> key (car (cdr (car alist)))) (car alist))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-rassoc-eq-as-car" data-sym="RASSOC-EQ-AS-CAR" title="(defun rassoc-eq-as-car (key alist)
  (cond ((endp alist) nil) ((eq key (car (cdr (car alist)))) (car alist))
        (t (rassoc-eq-as-car key (cdr alist)))))">rassoc-eq-as-car</a> key (cdr alist)))))</pre>
  </div>

<div class="form-block constant" id="def-_2Aca_3Cd_5En_3Er-alist_2A" data-defines="*CA<D^N>R-ALIST*" data-references="CDDDDR,CDADDR,CDDAAR,CDAAAR,CADDDR,CAADDR,CADAAR,CAAAAR,CDDDAR,CDADAR,CDDADR,CDAADR,CADDAR,CAADAR,CADADR,CAAADR,CDDDR,CADDR,CDAAR,CAAAR,CDDAR,CADAR,CDADR,CAADR,CDDR,CAAR,CDAR,CADR,QUOTE,DEFCONST" data-used-by="EXPAND-ADDRESS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*CA<D^N>R-ALIST*">*ca&lt;d^n&gt;r-alist*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Aca_3Cd_5En_3Er-alist_2A" data-sym="*CA&lt;D^N&gt;R-ALIST*" title="(defconst *ca&lt;d^n&gt;r-alist*
          &#39;((cadr . 2) (cdar . 2) (caar . 2) (cddr . 2) (caadr . 3) (cdadr . 3)
            (cadar . 3) (cddar . 3) (caaar . 3) (cdaar . 3) (caddr . 3)
            (cdddr . 3) (caaadr . 4) (cadadr . 4) (caadar . 4) (caddar . 4)
            (cdaadr . 4) (cddadr . 4) (cdadar . 4) (cdddar . 4) (caaaar . 4)
...">*ca&lt;d^n&gt;r-alist*</a>
  '((<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> . <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> . <span class="number">2</span>)
    (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> . <span class="number">2</span>)
    (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> . <span class="number">2</span>)
    (<a class="sym-link system" href="axioms.html#def-caadr" data-sym="CAADR">caadr</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-cdadr" data-sym="CDADR">cdadr</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-cddar" data-sym="CDDAR">cddar</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-caaar" data-sym="CAAAR">caaar</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-cdaar" data-sym="CDAAR">cdaar</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> . <span class="number">3</span>)
    (<a class="sym-link system" href="axioms.html#def-caaadr" data-sym="CAAADR">caaadr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cadadr" data-sym="CADADR">cadadr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-caadar" data-sym="CAADAR">caadar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-caddar" data-sym="CADDAR">caddar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cdaadr" data-sym="CDAADR">cdaadr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cddadr" data-sym="CDDADR">cddadr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cdadar" data-sym="CDADAR">cdadar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cdddar" data-sym="CDDDAR">cdddar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-caaaar" data-sym="CAAAAR">caaaar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cadaar" data-sym="CADAAR">cadaar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-caaddr" data-sym="CAADDR">caaddr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cadddr" data-sym="CADDDR">cadddr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cdaaar" data-sym="CDAAAR">cdaaar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cddaar" data-sym="CDDAAR">cddaar</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cdaddr" data-sym="CDADDR">cdaddr</a> . <span class="number">4</span>)
    (<a class="sym-link system" href="axioms.html#def-cddddr" data-sym="CDDDDR">cddddr</a> . <span class="number">4</span>)))</pre>
  </div>

<div class="form-block function" id="def-car_2Fcdr_5En" data-defines="CAR/CDR^N" data-references="FARGN,1-,T,QUASIQUOTE,HARD,ER,CDR,QUOTE,CAR,MEMBER-EQ,NOT,VARIABLEP,OR,ZP,COND,TERM,N,DEFUN" data-used-by="EXPAND-ADDRESS" data-part-name="CAR/CDR^N" data-part-args="TERM,N" data-part-body="FARGN,1-,T,QUASIQUOTE,CAR/CDR^N,HARD,ER,CDR,QUOTE,CAR,MEMBER-EQ,NOT,VARIABLEP,OR,TERM,N,ZP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CAR/CDR^N">car/cdr^n</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-car_2Fcdr_5En" data-sym="CAR/CDR^N" title="(defun car/cdr^n (n term)
  (cond ((zp n) term)
        ((or (variablep term) (not (member-eq (car term) &#39;(car cdr))))
         (er hard &#39;car/cdr^n
             &quot;Illegal call: ~x0.~|If you encountered this call in the ~
...">car/cdr^n</a>
  (n term)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-zp" data-sym="ZP">zp</a> n) term)
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car term) '(car cdr)))) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
        '<a class="sym-link local-def" href="#def-car_2Fcdr_5En" data-sym="CAR/CDR^N" title="(defun car/cdr^n (n term)
  (cond ((zp n) term)
        ((or (variablep term) (not (member-eq (car term) &#39;(car cdr))))
         (er hard &#39;car/cdr^n
             &quot;Illegal call: ~x0.~|If you encountered this call in the ~
...">car/cdr^n</a>
        <span class="string">"Illegal call: ~x0.~|If you encountered this call in the ~
         proof-builder, please contact the ACL2 implementors."</span>
        `(<a class="sym-link local-def" href="#def-car_2Fcdr_5En" data-sym="CAR/CDR^N" title="(defun car/cdr^n (n term)
  (cond ((zp n) term)
        ((or (variablep term) (not (member-eq (car term) &#39;(car cdr))))
         (er hard &#39;car/cdr^n
             &quot;Illegal call: ~x0.~|If you encountered this call in the ~
...">car/cdr^n</a> ,N ,TERM)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-car_2Fcdr_5En" data-sym="CAR/CDR^N" title="(defun car/cdr^n (n term)
  (cond ((zp n) term)
        ((or (variablep term) (not (member-eq (car term) &#39;(car cdr))))
         (er hard &#39;car/cdr^n
             &quot;Illegal call: ~x0.~|If you encountered this call in the ~
...">car/cdr^n</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">1</span>)))))</pre>
  </div>

<div class="form-block macro" id="def-expand-address-msg" data-defines="EXPAND-ADDRESS-MSG" data-references="REVERSE,MSG,ACCUMULATED-ADDR-R,IF,CONS,MV,QUASIQUOTE,ARGS,&REST,STR,DEFMACRO" data-used-by="EXPAND-ADDRESS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-ADDRESS-MSG">expand-address-msg</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a>
  (str &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  `(<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> ,STR
    (cons (cons #\0
        (if accumulated-addr-r
          (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"The dive via address ~x0 brings us to"</span>
            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> accumulated-addr-r))
          <span class="string">"The current subterm is"</span>))
      (cons (cons #\f
          (if accumulated-addr-r
            <span class="string">" further"</span>
            <span class="string">""</span>))
        ,(MAKE-FMT-BINDINGS (CDR *BASE-10-CHARS*) ARGS)))))</pre>
  </div>

<div class="form-block function" id="def-expand-address" data-defines="EXPAND-ADDRESS" data-references="CAR/CDR^N,*CA<D^N>R-ALIST*,IFF,IMPLIES,REVERSE,-,MEMBER-EQUAL,CDDR,INT=,EXPAND-ADDRESS-MSG,MSGP,OR-ADDR,ABBREVIATE,AND-ADDR,FINISH-NOT-P,NEW-IFF-FLG,NEW-TERM,AND-OR-ADDR,<=,LST0,LIST*,CASE,SUBTERM,MAKE-LIST,1-,=,LST,LET*,ARITY,UNTRANS-TABLE,RASSOC-EQ-AS-CAR,FETCH-TERM,APPEND,STRINGP,EV-FNCALL-W,VAL,ERP,MV-LET,DIVE-INTO-MACROS-TABLE,DIVE-FN,ATOM,NTH,CDDDR,REST-ADDR,1+,EXPAND-ADDRESS-RECURSE,CADDR,MEMBER,NATP,>=,EQ,CONSP,EQL,FLAMBDA-APPLICATIONP,DIVE-ONCE-MORE-ERROR,LENGTH,FQUOTEP,VARIABLEP,LIST,<,INTEGERP,AND,NOT,HARD,ER,T,CAR,CONS,REMOVE1-EQUAL,CDR,IF,CADR,ASSOC-EQ,PAIR,LET,ABBREVIATION-RAW-TERM-P,MV,QUOTE,EQUAL,NULL,OR,COND,WRLD,ACCUMULATED-ADDR-R,IFF-FLG,ABBREVIATIONS,TERM,RAW-TERM,ADDR,DEFUN" data-used-by="EXPAND-ADDRESS-RECURSE" data-part-name="EXPAND-ADDRESS" data-part-args="WRLD,ACCUMULATED-ADDR-R,IFF-FLG,ABBREVIATIONS,TERM,RAW-TERM,ADDR" data-part-body="CAR/CDR^N,*CA<D^N>R-ALIST*,IFF,IMPLIES,REVERSE,-,MEMBER-EQUAL,CDDR,INT=,EXPAND-ADDRESS-MSG,MSGP,OR-ADDR,ABBREVIATE,AND-ADDR,FINISH-NOT-P,NEW-IFF-FLG,NEW-TERM,AND-OR-ADDR,<=,LST0,LIST*,CASE,SUBTERM,MAKE-LIST,1-,=,LST,LET*,ARITY,UNTRANS-TABLE,RASSOC-EQ-AS-CAR,FETCH-TERM,APPEND,STRINGP,EV-FNCALL-W,VAL,ERP,MV-LET,DIVE-INTO-MACROS-TABLE,DIVE-FN,ATOM,NTH,CDDDR,REST-ADDR,1+,EXPAND-ADDRESS-RECURSE,CADDR,MEMBER,NATP,>=,EQ,CONSP,EQL,FLAMBDA-APPLICATIONP,DIVE-ONCE-MORE-ERROR,LENGTH,FQUOTEP,VARIABLEP,LIST,<,INTEGERP,AND,NOT,HARD,ER,T,WRLD,ACCUMULATED-ADDR-R,CAR,CONS,IFF-FLG,REMOVE1-EQUAL,TERM,CDR,EXPAND-ADDRESS,IF,ABBREVIATIONS,CADR,ASSOC-EQ,PAIR,LET,RAW-TERM,ABBREVIATION-RAW-TERM-P,MV,QUOTE,EQUAL,ADDR,NULL,OR,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXPAND-ADDRESS">expand-address</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a>
  (addr raw-term
    term
    abbreviations
    iff-flg
    accumulated-addr-r
    wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> addr) (equal addr '(<span class="number">0</span>))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil))
    ((<a class="sym-link local-def" href="#def-abbreviation-raw-term-p" data-sym="ABBREVIATION-RAW-TERM-P" title="(defun abbreviation-raw-term-p (x) (and (consp x) (eq (car x) &#39;?)))">abbreviation-raw-term-p</a> raw-term) (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> raw-term) abbreviations)))
        (if pair
          (<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a> (cdr addr)
            (cdr pair)
            term
            (<a class="sym-link system" href="axioms.html#def-remove1-equal" data-sym="REMOVE1-EQUAL">remove1-equal</a> pair abbreviations)
            iff-flg
            (cons (car addr) accumulated-addr-r)
            wrld)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
              '<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a>
              <span class="string">"Found abbreviation variable ~x0 that is not in the ~
                        current abbreviations alist, ~x1."</span>
              (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> raw-term)
              abbreviations)))))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp (car addr)) (&lt; <span class="number">0</span> (car addr)))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"All members of an address must be positive integers (except ~
              that 0 is allowed in circumstances involving CASE, COND, and ~
              abbreviations, which do not apply here).  ~x0 violates this ~
              requirement."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (car addr)))))
    ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> raw-term)
       (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> raw-term)
       (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (&lt; (car addr) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> raw-term)))) (<a class="sym-link local-def" href="#def-dive-once-more-error" data-sym="DIVE-ONCE-MORE-ERROR" title="(defmacro dive-once-more-error ()
  &#39;(mv &quot;When diving to subterm ~x0 using address ~x1, ~
              the additional dive to ~x2 was impossible.&quot;
       (list (cons #\0 raw-term) (cons #\1 (reverse accumulated-addr-r))
             (cons #\2 (car addr)))))">dive-once-more-error</a>))
    ((<a class="sym-link system" href="basis-b.html#def-flambda-applicationp" data-sym="FLAMBDA-APPLICATIONP">flambda-applicationp</a> term) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (car addr) <span class="number">2</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Unable to dive to the body of a LET, which is really part of ~
                 the function symbol of the translated LAMBDA term."</span>
            nil))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp raw-term)
           (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car raw-term) 'let)
           (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> addr) <span class="number">3</span>)
           (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (car addr) <span class="number">1</span>)
           (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr))
           (&lt; (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> raw-term)))
           (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> addr) '(<span class="number">0</span> <span class="number">1</span>))) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> addr) <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Unable to dive to a variable of a LET."</span> nil))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (cons (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr)) rest-addr)
                <span class="keyword">:new-addr</span> (<a class="sym-link system" href="axioms.html#def-cdddr" data-sym="CDDDR">cdddr</a> addr)
                <span class="keyword">:new-raw-term</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> raw-term)))
                <span class="keyword">:new-term</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (car addr)) term)
                <span class="keyword">:new-accumulated-addr-r</span> (cons (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (car addr)) accumulated-addr-r)))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"Unable to expand LAMBDA (LET) term."</span> nil))))
    ((<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> raw-term) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
          '<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a>
          <span class="string">"Surprise!  Found an unexpected raw-term atom, ~x0."</span>
          raw-term)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((dive-fn (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car raw-term) (<a class="sym-link local-def" href="#def-dive-into-macros-table" data-sym="DIVE-INTO-MACROS-TABLE" title="(defun dive-into-macros-table (wrld)
  (declare (xargs :guard (plist-worldp wrld)))
  (table-alist &#39;dive-into-macros-table wrld))">dive-into-macros-table</a> wrld)))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (dive-fn (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val)
              (ev-fncall-w dive-fn
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car addr) raw-term term wrld)
                wrld
                nil
                nil
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                nil
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (stringp (car val))) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car val) (cdr val)))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> val rest-addr)
                    <span class="keyword">:new-iff-flg</span> nil
                    <span class="keyword">:new-term</span> (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> term val))))))
          ((let ((pair (<a class="sym-link local-def" href="#def-rassoc-eq-as-car" data-sym="RASSOC-EQ-AS-CAR" title="(defun rassoc-eq-as-car (key alist)
  (cond ((endp alist) nil) ((eq key (car (cdr (car alist)))) (car alist))
        (t (rassoc-eq-as-car key (cdr alist)))))">rassoc-eq-as-car</a> (car raw-term) (<a class="sym-link system" href="axioms.html#def-untrans-table" data-sym="UNTRANS-TABLE">untrans-table</a> wrld))))
             (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> pair (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="basis-b.html#def-arity" data-sym="ARITY">arity</a> (car pair) wrld) <span class="number">2</span>))) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> raw-term))) (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) <span class="keyword">:initial-element</span> <span class="number">2</span>))
                   (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) <span class="keyword">:initial-element</span> <span class="number">2</span>) '(<span class="number">1</span>))))) (subterm (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> term lst)))
              (if subterm
                (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst rest-addr)
                  <span class="keyword">:new-iff-flg</span> nil
                  <span class="keyword">:new-term</span> subterm)
                (<a class="sym-link local-def" href="#def-dive-once-more-error" data-sym="DIVE-ONCE-MORE-ERROR" title="(defmacro dive-once-more-error ()
  &#39;(mv &quot;When diving to subterm ~x0 using address ~x1, ~
              the additional dive to ~x2 was impossible.&quot;
       (list (cons #\0 raw-term) (cons #\1 (reverse accumulated-addr-r))
             (cons #\2 (car addr)))))">dive-once-more-error</a>))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (car raw-term)
              ((<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a>) (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst0 (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) <span class="keyword">:initial-element</span> <span class="number">2</span>)) (lst (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car raw-term) '<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a>)
                        (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst0 '(<span class="number">1</span>))
                        lst0))
                    (subterm (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> term lst)))
                  (if subterm
                    (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst rest-addr)
                      <span class="keyword">:new-iff-flg</span> nil
                      <span class="keyword">:new-term</span> subterm)
                    (<a class="sym-link local-def" href="#def-dive-once-more-error" data-sym="DIVE-ONCE-MORE-ERROR" title="(defmacro dive-once-more-error ()
  &#39;(mv &quot;When diving to subterm ~x0 using address ~x1, ~
              the additional dive to ~x2 was impossible.&quot;
       (list (cons #\0 raw-term) (cons #\1 (reverse accumulated-addr-r))
             (cons #\2 (car addr)))))">dive-once-more-error</a>))))
              (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member" data-sym="MEMBER">member</a> (car addr) '(<span class="number">1</span> <span class="number">2</span>))) (<a class="sym-link local-def" href="#def-dive-once-more-error" data-sym="DIVE-ONCE-MORE-ERROR" title="(defmacro dive-once-more-error ()
  &#39;(mv &quot;When diving to subterm ~x0 using address ~x1, ~
              the additional dive to ~x2 was impossible.&quot;
       (list (cons #\0 raw-term) (cons #\1 (reverse accumulated-addr-r))
             (cons #\2 (car addr)))))">dive-once-more-error</a>))
                  ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) <span class="number">1</span>) (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (cons <span class="number">1</span> (cons <span class="number">2</span> rest-addr))
                      <span class="keyword">:new-iff-flg</span> nil
                      <span class="keyword">:new-term</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">2</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> term))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (cons <span class="number">1</span> (cons <span class="number">1</span> rest-addr))
                      <span class="keyword">:new-iff-flg</span> nil
                      <span class="keyword">:new-term</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> <span class="number">1</span> term))))))
              ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (and-or-addr new-term new-iff-flg finish-not-p)
                  (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car raw-term) '<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a>)
                    (<a class="sym-link local-def" href="#def-and-addr" data-sym="AND-ADDR" title="(defun and-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x2 *nil*)
               (cond ((int= n 1) (mv &#39;(1) x1 t nil))
                     (t (addr-recur 2 (and-addr (1- n) x2 iff-flg)))))
...">and-addr</a> (car addr)
                      (abbreviate term abbreviations)
                      iff-flg)
                    (<a class="sym-link local-def" href="#def-or-addr" data-sym="OR-ADDR" title="(defun or-addr (n term iff-flg)
  (case-match term
              ((&#39;if x1 x1 x2) (declare (ignore x1))
               (cond
                ((int= n 1)
...">or-addr</a> (car addr) (abbreviate term abbreviations) iff-flg))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-msgp" data-sym="MSGP">msgp</a> and-or-addr) (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the ~x4 term~%~ ~ ~y1,~|~%which translates ~
                            to~%~ ~ ~y2.~|~%The requested dive into this ~x4 ~
                            term is problematic, because ~@3.  Try using DIVE ~
                            instead (you may use PP to find the appropriate ~
                            address)."</span>
                        raw-term
                        term
                        and-or-addr
                        (car raw-term)))
                    (finish-not-p (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (cdr addr) (<a class="sym-link system" href="axioms.html#def-int_3D" data-sym="INT=">int=</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) <span class="number">1</span>)) (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> and-or-addr rest-addr)
                            <span class="keyword">:new-addr</span> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> addr)
                            <span class="keyword">:new-term</span> new-term
                            <span class="keyword">:new-iff-flg</span> new-iff-flg
                            <span class="keyword">:new-accumulated-addr-r</span> (cons <span class="number">1</span> (cons (car addr) accumulated-addr-r))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((accumulated-addr-r (cons (car addr) accumulated-addr-r)))
                            (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the NOT term ~x1, which does not actually ~
                                exist in the internal syntax of the current ~
                                term, namely:~%~x2.  Try using DIVE instead ~
                                (you may use PP to find the appropriate ~
                                address)."</span>
                              (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (car addr) raw-term)
                              term)))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> and-or-addr rest-addr)
                        <span class="keyword">:new-term</span> new-term
                        <span class="keyword">:new-iff-flg</span> new-iff-flg)))))
              (<a class="sym-link system" href="axioms.html#def-case" data-sym="CASE">case</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) <span class="number">1</span>) (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the CASE term~%~ ~ ~x1,~%which corresponds to the ~
                     translated term~%~ ~ ~x2.~%A~@f dive to the first ~
                     argument doesn&#39;t really make sense here."</span>
                      raw-term
                      term))
                  ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr addr)) (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) '(<span class="number">0</span> <span class="number">1</span>)))) (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the CASE term~%~ ~ ~x1,~%A~@f dive past argument ~
                     number ~x2 to the zeroth or first ``argument&#39;&#39; is ~
                     required at this point.~%"</span>
                      raw-term
                      (car addr)))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) <span class="number">0</span>)
                     (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> raw-term)))) (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the CASE term~%~ ~ ~x1,~%A~@f dive to the ~
                     ``otherwise&#39;&#39; expression is not allowed."</span>
                      raw-term))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) <span class="number">1</span>)
                           (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> raw-term)))
                             (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (car addr) <span class="number">2</span>) <span class="keyword">:initial-element</span> <span class="number">3</span>)
                             (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (car addr) <span class="number">2</span>) <span class="keyword">:initial-element</span> <span class="number">3</span>)
                               '(<span class="number">2</span>)))
                           (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def--" data-sym="-">-</a> (car addr) <span class="number">2</span>) <span class="keyword">:initial-element</span> <span class="number">3</span>)
                             '(<span class="number">1</span> <span class="number">2</span>)))) (subterm (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> term lst)))
                      (if subterm
                        (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst rest-addr)
                          <span class="keyword">:new-addr</span> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> addr)
                          <span class="keyword">:new-raw-term</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (car addr)) raw-term))
                          <span class="keyword">:new-term</span> subterm
                          <span class="keyword">:new-iff-flg</span> iff-flg
                          <span class="keyword">:new-accumulated-addr-r</span> (cons (car addr) (cons (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) accumulated-addr-r)))
                        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                          (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                            '<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a>
                            <span class="string">"Surprise!  Unable to dive into raw-term ~x0, ~
                                which is term ~x1, using list ~x2.  So far we ~
                                have DV-ed using ~x3."</span>
                            raw-term
                            term
                            lst
                            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> accumulated-addr-r))))))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp (cdr addr)) (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) '(<span class="number">0</span> <span class="number">1</span>)))) (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the COND term~%~ ~ ~x1,~%A~@f dive past argument ~
                    number ~x2 to the zeroth or first ``argument&#39;&#39; is ~
                    required at this point.~%"</span>
                      raw-term
                      (car addr)))
                  ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) <span class="number">0</span>)
                     (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> raw-term)))) (<a class="sym-link local-def" href="#def-expand-address-msg" data-sym="EXPAND-ADDRESS-MSG" title="(defmacro expand-address-msg (str &amp;rest args)
  `(mv ,str
       (cons
        (cons #\0
              (if accumulated-addr-r
...">expand-address-msg</a> <span class="string">"~@0 the COND term~%~ ~ ~x1,~%A~@f dive to the ``T&#39;&#39; ~
                    expression is not allowed."</span>
                      raw-term))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((lst (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) <span class="number">1</span>)
                           (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> raw-term)))
                             (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) <span class="keyword">:initial-element</span> <span class="number">3</span>)
                             (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) <span class="keyword">:initial-element</span> <span class="number">3</span>) '(<span class="number">2</span>)))
                           (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) <span class="keyword">:initial-element</span> <span class="number">3</span>) '(<span class="number">1</span>)))) (subterm (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> term lst)))
                      (if subterm
                        (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> lst rest-addr)
                          <span class="keyword">:new-addr</span> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> addr)
                          <span class="keyword">:new-raw-term</span> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (car addr)) raw-term))
                          <span class="keyword">:new-term</span> subterm
                          <span class="keyword">:new-iff-flg</span> iff-flg
                          <span class="keyword">:new-accumulated-addr-r</span> (cons (car addr) (cons (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> addr) accumulated-addr-r)))
                        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                          (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                            '<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a>
                            <span class="string">"Surprise!  Unable to dive into raw-term ~x0, ~
                               which is term ~x1, using list ~x2.  So far we ~
                               have DV-ed using ~x3."</span>
                            raw-term
                            term
                            lst
                            (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> accumulated-addr-r))))))))
              (if (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:new-iff-flg</span> (if (<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> (car addr) <span class="number">1</span>)
                    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                    iff-flg)))
              ((<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> <a class="sym-link system" href="axioms.html#def-iff" data-sym="IFF">iff</a>) (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:new-iff-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
              (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((pair (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp raw-term)
                       (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (car raw-term) <a class="sym-link local-def" href="#def-_2Aca_3Cd_5En_3Er-alist_2A" data-sym="*CA&lt;D^N&gt;R-ALIST*" title="(defconst *ca&lt;d^n&gt;r-alist*
          &#39;((cadr . 2) (cdar . 2) (caar . 2) (cddr . 2) (caadr . 3) (cdadr . 3)
            (cadar . 3) (cddar . 3) (caaar . 3) (cdaar . 3) (caddr . 3)
            (cdddr . 3) (caaadr . 4) (cadadr . 4) (caadar . 4) (caddar . 4)
            (cdaadr . 4) (cddadr . 4) (cdadar . 4) (cdddar . 4) (caaaar . 4)
...">*ca&lt;d^n&gt;r-alist*</a>))))
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (pair (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a> <span class="keyword">:ans</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-make-list" data-sym="MAKE-LIST">make-list</a> (cdr pair) <span class="keyword">:initial-element</span> <span class="number">1</span>) rest-addr)
                        <span class="keyword">:new-term</span> (<a class="sym-link local-def" href="#def-car_2Fcdr_5En" data-sym="CAR/CDR^N" title="(defun car/cdr^n (n term)
  (cond ((zp n) term)
        ((or (variablep term) (not (member-eq (car term) &#39;(car cdr))))
         (er hard &#39;car/cdr^n
             &quot;Illegal call: ~x0.~|If you encountered this call in the ~
...">car/cdr^n</a> (cdr pair) term)))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-expand-address-recurse" data-sym="EXPAND-ADDRESS-RECURSE" title="(defmacro expand-address-recurse
          (
           &amp;key (ans &#39;(cons (car addr) rest-addr)) (new-addr &#39;(cdr addr))
           (new-raw-term &#39;(nth (car addr) raw-term))
           (new-term &#39;(nth (car addr) term)) (new-iff-flg &#39;nil)
...">expand-address-recurse</a>))))))))))))</pre>
  </div>

<div class="form-block macro" id="def-dv-error" data-defines="DV-ERROR" data-references="STATE,T,MV,CURRENT-TERM,CONS,STRING-APPEND,PRINT-NO-CHANGE,PPROGN,QUASIQUOTE,ALIST,STR,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DV-ERROR">dv-error</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-dv-error" data-sym="DV-ERROR" title="(defmacro dv-error (str alist)
  `(pprogn
    (print-no-change
     (string-append &quot;Unable to perform the requested dive.~|~%&quot; ,str)
     (cons (cons #\t current-term) ,alist))">dv-error</a>
  (str alist)
  `(<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> <span class="string">"Unable to perform the requested dive.~|~%"</span>
        ,STR)
      (cons (cons #\t current-term) ,ALIST))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))</pre>
  </div>

<div class="form-block other" id="form-105" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> dv
  (&amp;rest rest-args)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (abbreviations (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
      (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> conc current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp addr)
      (<a class="sym-link local-def" href="#def-expand-address" data-sym="EXPAND-ADDRESS" title="(defun expand-address
       (addr raw-term term abbreviations iff-flg accumulated-addr-r wrld)
  (cond ((or (null addr) (equal addr &#39;(0))) (mv nil nil))
        ((abbreviation-raw-term-p raw-term)
         (let ((pair (assoc-eq (cadr raw-term) abbreviations)))
...">expand-address</a> rest-args
        (untrans0 current-term <a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> abbreviations)
        current-term
        abbreviations
        <a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a>
        nil
        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
      (if erp
        (<a class="sym-link local-def" href="#def-dv-error" data-sym="DV-ERROR" title="(defmacro dv-error (str alist)
  `(pprogn
    (print-no-change
     (string-append &quot;Unable to perform the requested dive.~|~%&quot; ,str)
     (cons (cons #\t current-term) ,alist))">dv-error</a> erp addr)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (cons '<span class="keyword">:dive</span> addr) state)))))</pre>
  </div>

<div class="form-block mutual-recursion" id="def-deposit-term" data-defines="DEPOSIT-TERM" data-references="1-,CONS,=,N,LST,CDR,CAR,FARGS,DEPOSIT-TERM-LST,FFN-SYMB,CONS-TERM,T,NULL,COND,SUBTERM,ADDR,TERM,DEFUN,MUTUAL-RECURSION" data-used-by="DEPOSIT-TERM-IN-GOAL" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEPOSIT-TERM">deposit-term</span><span class="form-type">mutual-recursion</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-mutual-recursion" data-sym="MUTUAL-RECURSION">mutual-recursion</a> (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deposit-term" data-sym="DEPOSIT-TERM" title="(mutual-recursion
 (defun deposit-term (term addr subterm)
   (cond ((null addr) subterm)
         (t
          (cons-term (ffn-symb term)
...">deposit-term</a>
    (term addr subterm)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> addr) subterm)
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-cons-term" data-sym="CONS-TERM">cons-term</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)
          (deposit-term-lst (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
            (car addr)
            (cdr addr)
            subterm)))))
  (<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> deposit-term-lst
    (lst n addr subterm)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a> <span class="number">1</span> n) (cons (<a class="sym-link local-def" href="#def-deposit-term" data-sym="DEPOSIT-TERM" title="(mutual-recursion
 (defun deposit-term (term addr subterm)
   (cond ((null addr) subterm)
         (t
          (cons-term (ffn-symb term)
...">deposit-term</a> (car lst) addr subterm) (cdr lst)))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cons (car lst)
          (deposit-term-lst (cdr lst) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) addr subterm))))))</pre>
  </div>

<div class="form-block function" id="def-geneqv-at-subterm" data-defines="GENEQV-AT-SUBTERM" data-references="CDR,GENEQV-AND-PEQUIV-INFO-FOR-REWRITE,CHILD-PEQUIV-INFO,CHILD-GENEQV,FARGS,SPLIT-AT-POSITION,CUR/POST,PRE-REV,PEQUIVS-FOR-REWRITE-ARGS,SHALLOW-PEQUIV-LST,DEEP-PEQUIV-LST,MV-LET,FFN-SYMB,GENEQV-LST,CAR,1-,NTH,CHILD-GENEQV0,LET,T,NULL,COND,WRLD,ENS,PEQUIV-INFO,GENEQV,ADDR,TERM,DEFUN" data-used-by="GENEQV-AT-SUBTERM-TOP" data-part-name="GENEQV-AT-SUBTERM" data-part-args="WRLD,ENS,PEQUIV-INFO,GENEQV,ADDR,TERM" data-part-body="CDR,GENEQV-AT-SUBTERM,GENEQV-AND-PEQUIV-INFO-FOR-REWRITE,CHILD-PEQUIV-INFO,CHILD-GENEQV,FARGS,SPLIT-AT-POSITION,CUR/POST,PRE-REV,PEQUIV-INFO,PEQUIVS-FOR-REWRITE-ARGS,SHALLOW-PEQUIV-LST,DEEP-PEQUIV-LST,MV-LET,WRLD,ENS,TERM,FFN-SYMB,GENEQV-LST,CAR,1-,NTH,CHILD-GENEQV0,LET,T,GENEQV,ADDR,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GENEQV-AT-SUBTERM">geneqv-at-subterm</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-geneqv-at-subterm" data-sym="GENEQV-AT-SUBTERM" title="(defun geneqv-at-subterm (term addr geneqv pequiv-info ens wrld)
  (cond ((null addr) geneqv)
        (t
         (let ((child-geneqv0
                (nth (1- (car addr))
...">geneqv-at-subterm</a>
  (term addr geneqv pequiv-info ens wrld)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> addr) geneqv)
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((child-geneqv0 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr))
             (<a class="sym-link system" href="rewrite.html#def-geneqv-lst" data-sym="GENEQV-LST">geneqv-lst</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term) geneqv ens wrld))))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (deep-pequiv-lst shallow-pequiv-lst)
          (<a class="sym-link system" href="rewrite.html#def-pequivs-for-rewrite-args" data-sym="PEQUIVS-FOR-REWRITE-ARGS">pequivs-for-rewrite-args</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)
            geneqv
            pequiv-info
            wrld
            ens)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (pre-rev cur/post)
            (<a class="sym-link system" href="defthm.html#def-split-at-position" data-sym="SPLIT-AT-POSITION">split-at-position</a> (car addr) (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term) nil)
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (child-geneqv child-pequiv-info)
              (<a class="sym-link system" href="rewrite.html#def-geneqv-and-pequiv-info-for-rewrite" data-sym="GENEQV-AND-PEQUIV-INFO-FOR-REWRITE">geneqv-and-pequiv-info-for-rewrite</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)
                (car addr)
                pre-rev
                cur/post
                nil
                geneqv
                child-geneqv0
                deep-pequiv-lst
                shallow-pequiv-lst
                wrld)
              (<a class="sym-link local-def" href="#def-geneqv-at-subterm" data-sym="GENEQV-AT-SUBTERM" title="(defun geneqv-at-subterm (term addr geneqv pequiv-info ens wrld)
  (cond ((null addr) geneqv)
        (t
         (let ((child-geneqv0
                (nth (1- (car addr))
...">geneqv-at-subterm</a> (car cur/post)
                (cdr addr)
                child-geneqv
                child-pequiv-info
                ens
                wrld))))))))</pre>
  </div>

<div class="form-block function" id="def-geneqv-at-subterm-top" data-defines="GENEQV-AT-SUBTERM-TOP" data-references="*GENEQV-IFF*,GENEQV-AT-SUBTERM,WRLD,ENS,ADDR,TERM,DEFUN" data-used-by="APPLICABLE-REWRITE-RULES" data-part-name="GENEQV-AT-SUBTERM-TOP" data-part-args="WRLD,ENS,ADDR,TERM" data-part-body="WRLD,ENS,*GENEQV-IFF*,ADDR,TERM,GENEQV-AT-SUBTERM" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GENEQV-AT-SUBTERM-TOP">geneqv-at-subterm-top</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a>
  (term addr ens wrld)
  (<a class="sym-link local-def" href="#def-geneqv-at-subterm" data-sym="GENEQV-AT-SUBTERM" title="(defun geneqv-at-subterm (term addr geneqv pequiv-info ens wrld)
  (cond ((null addr) geneqv)
        (t
         (let ((child-geneqv0
                (nth (1- (car addr))
...">geneqv-at-subterm</a> term addr <a class="sym-link system" href="rewrite.html#def-_2Ageneqv-iff_2A" data-sym="*GENEQV-IFF*">*geneqv-iff*</a> nil ens wrld))</pre>
  </div>

<div class="form-block function" id="def-maybe-truncate-current-address" data-defines="MAYBE-TRUNCATE-CURRENT-ADDRESS" data-references="FARGS,CAR,1-,NTH,CDR,T,CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,REVERSE,NEW-ADDR,LET,FQUOTEP,QUOTE,HARD,ER,MV,VARIABLEP,COND,IF,TRUE-LISTP,XARGS,DECLARE,STATE,ACC,ORIG-ADDR,TERM,ADDR,DEFUN" data-used-by="DEPOSIT-TERM-IN-GOAL" data-part-name="MAYBE-TRUNCATE-CURRENT-ADDRESS" data-part-args="STATE,ACC,ORIG-ADDR,TERM,ADDR" data-part-declare="ADDR,TRUE-LISTP,XARGS,DECLARE" data-part-body="FARGS,CAR,1-,NTH,CDR,T,CONS,LIST,FMS0,ORIG-ADDR,PROOF-BUILDER,IO?,PPROGN,ACC,REVERSE,NEW-ADDR,LET,FQUOTEP,STATE,MAYBE-TRUNCATE-CURRENT-ADDRESS,QUOTE,HARD,ER,MV,TERM,VARIABLEP,COND,ADDR,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAYBE-TRUNCATE-CURRENT-ADDRESS">maybe-truncate-current-address</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-maybe-truncate-current-address" data-sym="MAYBE-TRUNCATE-CURRENT-ADDRESS" title="(defun maybe-truncate-current-address (addr term orig-addr acc state)
  (declare (xargs :guard (true-listp addr)))
  (if addr
      (cond
       ((variablep term)
...">maybe-truncate-current-address</a>
  (addr term orig-addr acc state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> addr)))
  (if addr
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<a class="sym-link local-def" href="#def-maybe-truncate-current-address" data-sym="MAYBE-TRUNCATE-CURRENT-ADDRESS" title="(defun maybe-truncate-current-address (addr term orig-addr acc state)
  (declare (xargs :guard (true-listp addr)))
  (if addr
      (cond
       ((variablep term)
...">maybe-truncate-current-address</a>
            <span class="string">"Found variable with non-NIL address!"</span>)
          state))
      ((<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term) (let ((new-addr (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc)))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (new-addr orig-addr)
              (fms0 <span class="string">"~|NOTE:  truncating current address from ~x0 to ~
                              ~x1.  See explanation at end of help for X ~
                              command.~|"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 orig-addr) (cons #\1 new-addr))
                <span class="number">0</span>
                nil))
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> new-addr state))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-maybe-truncate-current-address" data-sym="MAYBE-TRUNCATE-CURRENT-ADDRESS" title="(defun maybe-truncate-current-address (addr term orig-addr acc state)
  (declare (xargs :guard (true-listp addr)))
  (if addr
      (cond
       ((variablep term)
...">maybe-truncate-current-address</a> (cdr addr)
          (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> (car addr)) (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term))
          orig-addr
          (cons (car addr) acc)
          state)))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> acc) state)))</pre>
  </div>

<div class="form-block function" id="def-deposit-term-in-goal" data-defines="DEPOSIT-TERM-IN-GOAL" data-references="GOAL,CHANGE,MV,MAYBE-TRUNCATE-CURRENT-ADDRESS,NEW-CURRENT-ADDR,MV-LET,QUOTEP,IF,DEPOSIT-TERM,NEW-CONC,LET,STATE,NEW-TERM,CURRENT-ADDR,CONC,GIVEN-GOAL,DEFUN" data-part-name="DEPOSIT-TERM-IN-GOAL" data-part-args="STATE,NEW-TERM,CURRENT-ADDR,CONC,GIVEN-GOAL" data-part-body="GIVEN-GOAL,GOAL,CHANGE,MV,MAYBE-TRUNCATE-CURRENT-ADDRESS,STATE,NEW-CURRENT-ADDR,MV-LET,QUOTEP,IF,NEW-TERM,CURRENT-ADDR,CONC,DEPOSIT-TERM,NEW-CONC,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEPOSIT-TERM-IN-GOAL">deposit-term-in-goal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-deposit-term-in-goal" data-sym="DEPOSIT-TERM-IN-GOAL" title="(defun deposit-term-in-goal (given-goal conc current-addr new-term state)
  (let ((new-conc (deposit-term conc current-addr new-term)))
    (if (quotep new-term)
        (mv-let (new-current-addr state)
                (maybe-truncate-current-address current-addr new-conc
...">deposit-term-in-goal</a>
  (given-goal conc current-addr new-term state)
  (let ((new-conc (<a class="sym-link local-def" href="#def-deposit-term" data-sym="DEPOSIT-TERM" title="(mutual-recursion
 (defun deposit-term (term addr subterm)
   (cond ((null addr) subterm)
         (t
          (cons-term (ffn-symb term)
...">deposit-term</a> conc current-addr new-term)))
    (if (<a class="sym-link system" href="axioms.html#def-quotep" data-sym="QUOTEP">quotep</a> new-term)
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-current-addr state)
        (<a class="sym-link local-def" href="#def-maybe-truncate-current-address" data-sym="MAYBE-TRUNCATE-CURRENT-ADDRESS" title="(defun maybe-truncate-current-address (addr term orig-addr acc state)
  (declare (xargs :guard (true-listp addr)))
  (if addr
      (cond
       ((variablep term)
...">maybe-truncate-current-address</a> current-addr
          new-conc
          current-addr
          nil
          state)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
            given-goal
            <span class="keyword">:conc</span> new-conc
            <span class="keyword">:current-addr</span> new-current-addr)
          state))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal given-goal <span class="keyword">:conc</span> new-conc) state))))</pre>
  </div>

<div class="form-block function" id="def-split-implies" data-defines="SPLIT-IMPLIES" data-references="FLATTEN-ANDS-IN-LIT,APPEND,FARGN,C,H,MV-LET,MV,IMPLIES,QUOTE,FFN-SYMB-P,NOT,IF,TERM,DEFUN" data-used-by="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET,FIND-EQUIVALENCE-HYP-TERM" data-part-name="SPLIT-IMPLIES" data-part-args="TERM" data-part-body="FLATTEN-ANDS-IN-LIT,APPEND,FARGN,SPLIT-IMPLIES,C,H,MV-LET,MV,IMPLIES,QUOTE,TERM,FFN-SYMB-P,NOT,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SPLIT-IMPLIES">split-implies</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-split-implies" data-sym="SPLIT-IMPLIES" title="(defun split-implies (term)
  (if (not (ffn-symb-p term &#39;implies))
      (mv nil term)
      (mv-let (h c) (split-implies (fargn term 2))
              (mv (append (flatten-ands-in-lit (fargn term 1)) h) c))))">split-implies</a>
  (term)
  (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-ffn-symb-p" data-sym="FFN-SYMB-P">ffn-symb-p</a> term '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil term)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (h c)
      (<a class="sym-link local-def" href="#def-split-implies" data-sym="SPLIT-IMPLIES" title="(defun split-implies (term)
  (if (not (ffn-symb-p term &#39;implies))
      (mv nil term)
      (mv-let (h c) (split-implies (fargn term 2))
              (mv (append (flatten-ands-in-lit (fargn term 1)) h) c))))">split-implies</a> (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">2</span>))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (flatten-ands-in-lit (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> term <span class="number">1</span>)) h) c))))</pre>
  </div>

<div class="form-block function" id="def-find-equivalence-hyp-term" data-defines="FIND-EQUIVALENCE-HYP-TERM" data-references="EQUAL,SUBSETP-EQUAL,AND,Y,FARGN,X,LET,CDR,REFINEMENTP,FFN-SYMB,SYMBOLP,NOT,FQUOTEP,VARIABLEP,OR,CAR,SPLIT-IMPLIES,C,H,MV-LET,CONSP,IF,W,EQUIV,TARGET,HYPS,TERM,DEFUN" data-part-name="FIND-EQUIVALENCE-HYP-TERM" data-part-args="W,EQUIV,TARGET,HYPS,TERM" data-part-body="EQUAL,SUBSETP-EQUAL,AND,Y,FARGN,X,LET,TARGET,CDR,TERM,FIND-EQUIVALENCE-HYP-TERM,W,EQUIV,REFINEMENTP,FFN-SYMB,SYMBOLP,NOT,FQUOTEP,VARIABLEP,OR,CAR,SPLIT-IMPLIES,C,H,MV-LET,HYPS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-EQUIVALENCE-HYP-TERM">find-equivalence-hyp-term</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-equivalence-hyp-term" data-sym="FIND-EQUIVALENCE-HYP-TERM" title="(defun find-equivalence-hyp-term (term hyps target equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term</a>
  (term hyps target equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
  (if (consp hyps)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (h c)
      (<a class="sym-link local-def" href="#def-split-implies" data-sym="SPLIT-IMPLIES" title="(defun split-implies (term)
  (if (not (ffn-symb-p term &#39;implies))
      (mv nil term)
      (mv-let (h c) (split-implies (fargn term 2))
              (mv (append (flatten-ands-in-lit (fargn term 1)) h) c))))">split-implies</a> (car hyps))
      (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> c)
          (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> c)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> c)))
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="rewrite.html#def-refinementp" data-sym="REFINEMENTP">refinementp</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> c) equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
        (<a class="sym-link local-def" href="#def-find-equivalence-hyp-term" data-sym="FIND-EQUIVALENCE-HYP-TERM" title="(defun find-equivalence-hyp-term (term hyps target equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term</a> term (cdr hyps) target equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
        (let ((x (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> c <span class="number">1</span>)) (y (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> c <span class="number">2</span>)))
          (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a> h hyps)
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal x term) (equal y target))
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal y term) (equal x target))))
            (<a class="sym-link local-def" href="#def-find-equivalence-hyp-term" data-sym="FIND-EQUIVALENCE-HYP-TERM" title="(defun find-equivalence-hyp-term (term hyps target equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term</a> term (cdr hyps) target equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
    nil))</pre>
  </div>

<div class="form-block other" id="form-113" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> equiv
  (x y &amp;optional equiv)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (current-term <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>)
    (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> conc current-addr nil)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
            '<span class="keyword">:=</span>
            <span class="string">"Found governors of T inside command ~x0!"</span>
            (cons <span class="keyword">:=</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
          state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((assumptions (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> hyps <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>)) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
            (pc-ens (make-pc-ens pc-ens state)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp new-pc-state state)
            (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((old (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> x abbreviations <span class="keyword">:equiv</span>)) (new (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> y abbreviations <span class="keyword">:equiv</span>))
                (equiv (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> equiv)
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'equal)
                    (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp equiv) (<a class="sym-link system" href="basis-b.html#def-equivalence-relationp" data-sym="EQUIVALENCE-RELATIONP">equivalence-relationp</a> equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> equiv)
                      (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                        <span class="keyword">:equiv</span> <span class="string">"The name ~x0 is not currently the name of an ACL2 ~
                          equivalence relation.~@1  The current list of ~
                          ACL2 equivalence relations is ~x2."</span>
                        equiv
                        (let ((pair (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp equiv)
                               (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> equiv (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'macro-aliases-table <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
                          (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> pair (<a class="sym-link system" href="basis-b.html#def-equivalence-relationp" data-sym="EQUIVALENCE-RELATIONP">equivalence-relationp</a> (cdr pair) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                            (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Perhaps you intended the corresponding ~
                                     function for which it is an ~
                                     ``alias&#39;&#39;(see :DOC macro-aliases-table), ~
                                     ~x0."</span>
                              (cdr pair))
                            <span class="string">""</span>))
                        (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'equal 'coarsenings nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))))))
              (if (<a class="sym-link local-def" href="#def-find-equivalence-hyp-term" data-sym="FIND-EQUIVALENCE-HYP-TERM" title="(defun find-equivalence-hyp-term (term hyps target equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term</a> old
                  (flatten-ands-in-lit-lst assumptions)
                  new
                  equiv
                  <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (<a class="sym-link system" href="history-management.html#def-hitp" data-sym="HITP">hitp</a> new-current-term new-ttree)
                  (<a class="sym-link system" href="rewrite.html#def-subst-equiv-expr1" data-sym="SUBST-EQUIV-EXPR1">subst-equiv-expr1</a> equiv
                    new
                    old
                    (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> conc current-addr pc-ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                    current-term
                    pc-ens
                    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                    state
                    nil)
                  (if <a class="sym-link system" href="history-management.html#def-hitp" data-sym="HITP">hitp</a>
                    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-goal state)
                      (<a class="sym-link local-def" href="#def-deposit-term-in-goal" data-sym="DEPOSIT-TERM-IN-GOAL" title="(defun deposit-term-in-goal (given-goal conc current-addr new-term state)
  (let ((new-conc (deposit-term conc current-addr new-term)))
    (if (quotep new-term)
        (mv-let (new-current-addr state)
                (maybe-truncate-current-address current-addr new-conc
...">deposit-term-in-goal</a> (car goals)
                        conc
                        current-addr
                        new-current-term
                        state)
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (change-pc-state pc-state
                          <span class="keyword">:local-tag-tree</span> new-ttree
                          <span class="keyword">:goals</span> (cons new-goal (cdr goals)))))
                    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The equivalence relation that you specified, namely ~x0, is ~
                          not appropriate at any occurrence of the ``old&#39;&#39; term ~x1 ~
                          inside the current term, and hence no substitution has ~
                          been made."</span>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 equiv) (cons #\1 x)))
                      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The ~#2~[equivalence~/equality~] of the terms ~x0 and ~x1~#2~[ with respect ~
              to the equivalence relation ~x3~/~] is not known at the ~
              current subterm from the current hypotheses and governors."</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 x)
                      (cons #\1 y)
                      (cons #\2
                        (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equiv 'equal)
                          <span class="number">1</span>
                          <span class="number">0</span>))
                      (cons #\3 equiv)))
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))))
            (if erp
              (print-no-change2 <span class="string">"EQUIV failed."</span>)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> new-pc-state state))))))))</pre>
  </div>

<div class="form-block other" id="form-114" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> casesplit
  (expr &amp;optional use-hyps-flag do-not-flatten-flag)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp term state)
    (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> expr abbreviations <span class="keyword">:casesplit</span>)
    (if erp
      (print-no-change2 <span class="string">"~x0 failed."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons <span class="keyword">:casesplit</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
      (let ((claimed-term (if use-hyps-flag
             (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (current-term <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>)
               (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> conc current-addr nil)
               (declare (ignore current-term))
               (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                     '<span class="keyword">:casesplit</span>
                     <span class="string">"Found governors of T inside command ~x0!"</span>
                     (cons <span class="keyword">:casesplit</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
                 (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>) term))
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> term)))
             term)))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
            <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                (car goals)
                <span class="keyword">:hyps</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> hyps
                  (if do-not-flatten-flag
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> claimed-term)
                    (flatten-ands-in-lit claimed-term)))
                <span class="keyword">:depends-on</span> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> depends-on))
              (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                  (car goals)
                  <span class="keyword">:hyps</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> hyps
                    (if do-not-flatten-flag
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> claimed-term))
                      (flatten-ands-in-lit (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> claimed-term))))
                  <span class="keyword">:goal-name</span> (cons goal-name depends-on)
                  <span class="keyword">:depends-on</span> <span class="number">1</span>)
                (cdr goals))))
          state)))))</pre>
  </div>

<div class="form-block other" id="form-115" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> top?
  nil
  (when-goals-trip (if (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'top)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'skip))))</pre>
  </div>

<div class="form-block other" id="form-116" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> contrapose-last
  nil
  (when-goals-trip (let ((hyps (hyps)))
      (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> hyps)
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"CONTRAPOSE-LAST failed -- no top-level hypotheses!"</span>)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:contrapose</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps)))))))</pre>
  </div>

<div class="form-block other" id="form-117" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> drop-last
  nil
  (when-goals-trip (let ((hyps (hyps)))
      (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> hyps)
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"DROP-LAST failed -- no top-level hypotheses!"</span>)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:drop</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps)))))))</pre>
  </div>

<div class="form-block other" id="form-118" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> drop-conc
  nil
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-strict top? contrapose-last drop-last)))</pre>
  </div>

<div class="form-block other" id="form-119" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> claim
  (expr &amp;rest rest-args)
  (when-goals-trip (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (let ((rest-args-1 (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> rest-args
               (car rest-args)
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car rest-args))))
             (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:hints</span> <span class="keyword">:none</span> (cdr rest-args))
             rest-args)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (pairs remaining-rest-args)
          (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> '(<span class="keyword">:do-not-flatten</span>) rest-args-1)
          (let ((do-not-flatten-flag (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:do-not-flatten</span> pairs))) (temp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> <span class="keyword">:hints</span> rest-args-1))))
            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> temp (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> temp))
              `(protect (casesplit ,EXPR nil ,DO-NOT-FLATTEN-FLAG)
                change-goal
                drop-conc
                pro
                change-goal)
              `(protect (casesplit ,EXPR nil ,DO-NOT-FLATTEN-FLAG)
                change-goal
                drop-conc
                (<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> ,@REMAINING-REST-ARGS)))))))))</pre>
  </div>

<div class="form-block other" id="form-120" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> induct
  (&amp;optional raw-term)
  (when-goals-trip (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"You must be at the top of the goal in order to use the ~
                INDUCT command.  Try TOP first."</span>)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))
      (let ((raw-term (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> raw-term <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:induct</span> ,RAW-TERM
               <span class="keyword">:do-not-induct</span> proof-builder
               <span class="keyword">:do-not</span> <a class="sym-link system" href="history-management.html#def-_2Ado-not-processes_2A" data-sym="*DO-NOT-PROCESSES*">*do-not-processes*</a>))))))))</pre>
  </div>

<div class="form-block function" id="def-print-on-separate-lines" data-defines="PRINT-ON-SEPARATE-LINES" data-references="CDR,CAR,CONS,LIST,FMS,PROOF-BUILDER,IO?,PPROGN,NEWLINE,NULL,IF,TRUE-LISTP,XARGS,DECLARE,STATE,CHAN,EVISC-TUPLE,VALS,DEFUN" data-part-name="PRINT-ON-SEPARATE-LINES" data-part-args="STATE,CHAN,EVISC-TUPLE,VALS" data-part-declare="VALS,TRUE-LISTP,XARGS,DECLARE" data-part-body="CDR,PRINT-ON-SEPARATE-LINES,CAR,CONS,LIST,FMS,EVISC-TUPLE,PROOF-BUILDER,IO?,PPROGN,STATE,CHAN,NEWLINE,VALS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ON-SEPARATE-LINES">print-on-separate-lines</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-on-separate-lines" data-sym="PRINT-ON-SEPARATE-LINES" title="(defun print-on-separate-lines (vals evisc-tuple chan state)
  (declare (xargs :guard (true-listp vals)))
  (if (null vals)
      (newline chan state)
      (pprogn
...">print-on-separate-lines</a>
  (vals <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> chan state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> vals)))
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> vals)
    (<a class="sym-link system" href="basis-a.html#def-newline" data-sym="NEWLINE">newline</a> chan state)
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
        nil
        state
        (<a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> chan vals)
        (<a class="sym-link system" href="basis-a.html#def-fms" data-sym="FMS">fms</a> <span class="string">"~x0"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (car vals)))
          chan
          state
          <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a>))
      (<a class="sym-link local-def" href="#def-print-on-separate-lines" data-sym="PRINT-ON-SEPARATE-LINES" title="(defun print-on-separate-lines (vals evisc-tuple chan state)
  (declare (xargs :guard (true-listp vals)))
  (if (null vals)
      (newline chan state)
      (pprogn
...">print-on-separate-lines</a> (cdr vals) <a class="sym-link system" href="basis-a.html#def-evisc-tuple" data-sym="EVISC-TUPLE">evisc-tuple</a> chan state))))</pre>
  </div>

<div class="form-block other" id="form-122" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> goals
  nil
  (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
    nil
    state
    (state-stack)
    (when-goals (<a class="sym-link local-def" href="#def-print-on-separate-lines" data-sym="PRINT-ON-SEPARATE-LINES" title="(defun print-on-separate-lines (vals evisc-tuple chan state)
  (declare (xargs :guard (true-listp vals)))
  (if (null vals)
      (newline chan state)
      (pprogn
...">print-on-separate-lines</a> (goal-names (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        nil
        (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
        state))))</pre>
  </div>

<div class="form-block function" id="def-modified-error-triple-for-sequence" data-defines="MODIFIED-ERROR-TRIPLE-FOR-SEQUENCE" data-references="CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,CADR,LENGTH,<,OR,MV,IF,CDR,VALS,CAR,STOBJS-OUT,LET,T,TRANS-EVAL-DEFAULT-WARNING,PC-VAL,PC-ERP,STATE-GLOBAL-LET*,STOBJS-OUT-AND-VALS,NEW-ERP,MV-LET,STATE,SUCCESS-EXPR,VAL,ERP,DEFUN" data-part-name="MODIFIED-ERROR-TRIPLE-FOR-SEQUENCE" data-part-args="STATE,SUCCESS-EXPR,VAL,ERP" data-part-body="CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,CADR,LENGTH,<,OR,MV,IF,CDR,VALS,CAR,STOBJS-OUT,LET,T,SUCCESS-EXPR,TRANS-EVAL-DEFAULT-WARNING,VAL,PC-VAL,ERP,PC-ERP,STATE-GLOBAL-LET*,STATE,STOBJS-OUT-AND-VALS,NEW-ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MODIFIED-ERROR-TRIPLE-FOR-SEQUENCE">modified-error-triple-for-sequence</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-modified-error-triple-for-sequence" data-sym="MODIFIED-ERROR-TRIPLE-FOR-SEQUENCE" title="(defun modified-error-triple-for-sequence (erp val success-expr state)
  (mv-let (new-erp stobjs-out-and-vals state)
          (state-global-let* ((pc-erp erp) (pc-val val))
                             (trans-eval-default-warning success-expr :sequence
                                                         state t))
...">modified-error-triple-for-sequence</a>
  (erp val success-expr state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-erp stobjs-out-and-vals state)
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((pc-erp erp) (pc-val val))
      (trans-eval-default-warning success-expr <span class="keyword">:sequence</span> state <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (let ((<a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a> (car stobjs-out-and-vals)) (vals (cdr stobjs-out-and-vals)))
      (if new-erp
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> new-erp nil state)
        (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (&lt; (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>) <span class="number">2</span>)
            (car <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>)
            (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> <a class="sym-link system" href="axioms.html#def-stobjs-out" data-sym="STOBJS-OUT">stobjs-out</a>))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (vals success-expr)
              (fms0 <span class="string">"~|WARNING -- evaluation of ~
                                      `success-expr&#39; argument to ~
                                      :SEQUENCE, ~x0, has been ~
                                      ignored because it returned a ~
                                      single-threaded object in one ~
                                      of its first two values or ~
                                      returned fewer than two values. ~
                                      The value(s) returned was ~
                                      (were):~%~ ~ ~x1.~%"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 success-expr) (cons #\1 vals))))
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car vals) (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> vals) state))))))</pre>
  </div>

<div class="form-block other" id="form-124" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a> sequence
  (instr-list &amp;optional
    strict-flg
    protect-flg
    success-expr
    no-prompt-flg
    no-restore-flg)
  (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> instr-list))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The first argument to the SEQUENCE command must be ~
                a true list, but~%~ ~ ~x0~| is not."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 instr-list)))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((pc-info (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> pc-info
           (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'pc-info state)
           <span class="keyword">:prompt</span> (<a class="sym-link system" href="axioms.html#def-string-append" data-sym="STRING-APPEND">string-append</a> (pc-prompt-depth-prefix) (pc-prompt)))))
      (let ((saved-old-ss (old-ss)) (saved-ss (state-stack)))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (pc-main-loop instr-list
            (if strict-flg
              '(signal <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>)
              '(signal))
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> no-prompt-flg) (pc-print-prompt-and-instr-flg))
            state)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (if success-expr
              (<a class="sym-link local-def" href="#def-modified-error-triple-for-sequence" data-sym="MODIFIED-ERROR-TRIPLE-FOR-SEQUENCE" title="(defun modified-error-triple-for-sequence (erp val success-expr state)
  (mv-let (new-erp stobjs-out-and-vals state)
          (state-global-let* ((pc-erp erp) (pc-val val))
                             (trans-eval-default-warning success-expr :sequence
                                                         state t))
...">modified-error-triple-for-sequence</a> erp
                val
                success-expr
                state)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))
            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> protect-flg (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> val)))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"SEQUENCE failed, with protection on.  ~
                                     Reverting back to existing state of the ~
                                     proof-builder.~|"</span>)
                (pc-assign state-stack saved-ss)
                (pc-assign old-ss saved-old-ss)
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if no-restore-flg
                  state
                  (pc-assign old-ss saved-ss))
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state)))))))))</pre>
  </div>

<div class="form-block other" id="form-125" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> negate
  (&amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:sequence</span> instr-list
      nil
      nil
      '(<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
        (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'pc-erp state)
            (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'pc-val state)))
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          nil)))))</pre>
  </div>

<div class="form-block other" id="form-126" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> succeed
  (&amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil
    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:sequence</span> instr-list nil nil '(<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    state))</pre>
  </div>

<div class="form-block other" id="form-127" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> do-all
  (&amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:sequence</span> instr-list) state))</pre>
  </div>

<div class="form-block other" id="form-128" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> do-strict
  (&amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:sequence</span> instr-list <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))</pre>
  </div>

<div class="form-block other" id="form-129" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> do-all-no-prompt
  (&amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:sequence</span> instr-list nil nil nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))</pre>
  </div>

<div class="form-block other" id="form-130" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> th
  (&amp;optional hyps-indices govs-indices)
  (declare (ignore hyps-indices govs-indices))
  (when-goals-trip (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-all-no-prompt (hyps ,@ARGS)
        (lisp (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
            nil
            state
            nil
            (fms0 <span class="string">"~%The current subterm is:~%"</span>)))
        p))))</pre>
  </div>

<div class="form-block other" id="form-131" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> protect
  (&amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:sequence</span> instr-list <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))</pre>
  </div>

<div class="form-block function" id="def-extract-goal" data-defines="EXTRACT-GOAL" data-references="CONS,REST-GOALS,MV-LET,CDR,MV,CAR,GOAL,ACCESS,EQUAL,CONSP,IF,GOALS,NAME,DEFUN" data-part-name="EXTRACT-GOAL" data-part-args="GOALS,NAME" data-part-body="CONS,EXTRACT-GOAL,REST-GOALS,MV-LET,CDR,MV,NAME,CAR,GOAL,ACCESS,EQUAL,GOALS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="EXTRACT-GOAL">extract-goal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-extract-goal" data-sym="EXTRACT-GOAL" title="(defun extract-goal (name goals)
  (if (consp goals)
      (if (equal (access goal (car goals) :goal-name) name)
          (mv (car goals) (cdr goals))
          (mv-let (goal rest-goals) (extract-goal name (cdr goals))
...">extract-goal</a>
  (name goals)
  (if (consp goals)
    (if (equal (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:goal-name</span>) name)
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (car goals) (cdr goals))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (goal rest-goals)
        (<a class="sym-link local-def" href="#def-extract-goal" data-sym="EXTRACT-GOAL" title="(defun extract-goal (name goals)
  (if (consp goals)
      (if (equal (access goal (car goals) :goal-name) name)
          (mv (car goals) (cdr goals))
          (mv-let (goal rest-goals) (extract-goal name (cdr goals))
...">extract-goal</a> name (cdr goals))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> goal (cons (car goals) rest-goals))))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil goals)))</pre>
  </div>

<div class="form-block other" id="form-133" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> change-goal
  (&amp;optional name end-flg)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> goals) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-all-goals-proved-message state)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state)))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr goals)) (print-no-change2 <span class="string">"The current goal is the only unproved goal."</span>))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> name) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
          nil
          state
          (goals)
          (fms0 <span class="string">"~|Now proving ~X0n.~%"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> goals) <span class="keyword">:goal-name</span>))
              (cons #\n nil))))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
            <span class="keyword">:goals</span> (if end-flg
              (cons (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> goals) (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> goals) (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car goals))))
              (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> goals) (car goals) (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> goals))))
          state)))
    ((equal name goal-name) (print-no-change2 <span class="string">"The current goal is already ~x0."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (gl rest-goals)
        (<a class="sym-link local-def" href="#def-extract-goal" data-sym="EXTRACT-GOAL" title="(defun extract-goal (name goals)
  (if (consp goals)
      (if (equal (access goal (car goals) :goal-name) name)
          (mv (car goals) (cdr goals))
          (mv-let (goal rest-goals) (extract-goal name (cdr goals))
...">extract-goal</a> name (cdr goals))
        (if gl
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
              <span class="keyword">:goals</span> (if end-flg
                (cons gl (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> rest-goals (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (car goals))))
                (cons gl (cons (car goals) rest-goals))))
            state)
          (print-no-change2 <span class="string">"There is no unproved goal named ~x0."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name))))))))</pre>
  </div>

<div class="form-block other" id="form-134" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> cg
  (&amp;optional name)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(change-goal ,NAME <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block function" id="def-change-by-position" data-defines="CHANGE-BY-POSITION" data-references="1-,CAR,CDR,CONS,EQUAL,IF,LENGTH,<,<=,INTEGERP,TRUE-LISTP,AND,XARGS,DECLARE,NEW,INDEX,LST,DEFUN" data-part-name="CHANGE-BY-POSITION" data-part-args="NEW,INDEX,LST" data-part-declare="LENGTH,<,<=,INDEX,INTEGERP,LST,TRUE-LISTP,AND,XARGS,DECLARE" data-part-body="1-,CHANGE-BY-POSITION,CAR,LST,CDR,NEW,CONS,INDEX,EQUAL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHANGE-BY-POSITION">change-by-position</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-change-by-position" data-sym="CHANGE-BY-POSITION" title="(defun change-by-position (lst index new)
  (declare
   (xargs :guard
    (and (true-listp lst) (integerp index) (&lt;= 0 index)
         (&lt; index (length lst)))))
...">change-by-position</a>
  (lst index new)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> lst)
        (integerp index)
        (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> <span class="number">0</span> index)
        (&lt; index (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> lst)))))
  (if (equal index <span class="number">0</span>)
    (cons new (cdr lst))
    (cons (car lst)
      (<a class="sym-link local-def" href="#def-change-by-position" data-sym="CHANGE-BY-POSITION" title="(defun change-by-position (lst index new)
  (declare
   (xargs :guard
    (and (true-listp lst) (integerp index) (&lt;= 0 index)
         (&lt; index (length lst)))))
...">change-by-position</a> (cdr lst) (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> index) new))))</pre>
  </div>

<div class="form-block other" id="form-136" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> contrapose
  (&amp;optional n)
  (let ((n (if <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
         n
         <span class="number">1</span>)))
    (if hyps
      (if current-addr
        (print-no-change2 <span class="string">"You must be at the top of the conclusion to apply ~
                               the CONTRAPOSE command.  Try TOP first."</span>)
        (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp n) (&lt; <span class="number">0</span> n) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> n (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps)))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
              <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                  (car goals)
                  <span class="keyword">:hyps</span> (<a class="sym-link local-def" href="#def-change-by-position" data-sym="CHANGE-BY-POSITION" title="(defun change-by-position (lst index new)
  (declare
   (xargs :guard
    (and (true-listp lst) (integerp index) (&lt;= 0 index)
         (&lt; index (length lst)))))
...">change-by-position</a> hyps (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> conc))
                  <span class="keyword">:conc</span> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> n) hyps)))
                (cdr goals)))
            state)
          (print-no-change2 <span class="string">"The argument to CONTRAPOSE must be a positive integer ~
                               that does not exceed the length of the list of top-level ~
                               hypotheses.  The argument ~x0 fails to meet this requirement."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 n)))))
      (print-no-change2 <span class="string">"There are no top-level hypotheses."</span>))))</pre>
  </div>

<div class="form-block other" id="form-137" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> contradict
  (&amp;optional n)
  (declare (ignore n))
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:contrapose</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-138" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> pro
  nil
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(quiet (repeat promote))))</pre>
  </div>

<div class="form-block other" id="form-139" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> nx
  nil
  (when-goals-trip (let ((current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      (if current-addr
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(protect up ,(1+ (CAR (LAST CURRENT-ADDR)))))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"NX failed:  already at the top!"</span>)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))))</pre>
  </div>

<div class="form-block other" id="form-140" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> bk
  nil
  (when-goals-trip (let ((current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      (if current-addr
        (let ((n (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> current-addr))))
          (if (equal n <span class="number">1</span>)
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"BK failed:  already at the first argument!"</span>)
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-strict up ,(1- N)))))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"BK failed:  already at the top!"</span>)
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))))</pre>
  </div>

<div class="form-block other" id="form-141" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> p-top
  nil
  (when-goals (let ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (stars (<a class="sym-link system" href="axioms.html#def-intern_24" data-sym="INTERN$">intern$</a> <span class="string">"***"</span> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> '<a class="sym-link system" href="axioms.html#def-current-package" data-sym="CURRENT-PACKAGE">current-package</a> state))))
      (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
        nil
        state
        (state-stack current-addr conc stars)
        (fms0 <span class="string">"~|~y0~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
              (untrans0 (<a class="sym-link local-def" href="#def-deposit-term" data-sym="DEPOSIT-TERM" title="(mutual-recursion
 (defun deposit-term (term addr subterm)
   (cond ((null addr) subterm)
         (t
          (cons-term (ffn-symb term)
...">deposit-term</a> conc
                  current-addr
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> stars (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr) stars))
                <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))))))))</pre>
  </div>

<div class="form-block other" id="form-142" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> repeat
  (instr)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(succeed (repeat-rec ,INSTR))))</pre>
  </div>

<div class="form-block other" id="form-143" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> repeat-rec
  (instr)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-strict ,INSTR (repeat-rec ,INSTR))))</pre>
  </div>

<div class="form-block macro" id="def-define-pc-bind_2A" data-defines="DEFINE-PC-BIND*" data-references="STATE,PC-PRINT-PROMPT-AND-INSTR-FLG,T,PC-MAIN-LOOP,STATE-GLOBAL-LET*,INSTR-LIST,DEFINE-PC-META,QUASIQUOTE,ARGS,&REST,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="DEFINE-PC-BIND*">define-pc-bind*</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-define-pc-bind_2A" data-sym="DEFINE-PC-BIND*" title="(defmacro define-pc-bind* (name &amp;rest args)
  `(define-pc-meta ,name (&amp;rest instr-list)
                   (state-global-let* (,@args)
                                      (pc-main-loop instr-list nil t
                                                    (pc-print-prompt-and-instr-flg)">define-pc-bind*</a>
  (name &amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  `(<a class="sym-link local-def" href="#def-define-pc-meta" data-sym="DEFINE-PC-META" title="(defmacro define-pc-meta (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;meta raw-name formals body))">define-pc-meta</a> ,NAME
    (&amp;rest instr-list)
    (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> (,@ARGS)
      (pc-main-loop instr-list
        nil
        <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
        (pc-print-prompt-and-instr-flg)
        state))))</pre>
  </div>

<div class="form-block other" id="form-145" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-bind_2A" data-sym="DEFINE-PC-BIND*" title="(defmacro define-pc-bind* (name &amp;rest args)
  `(define-pc-meta ,name (&amp;rest instr-list)
                   (state-global-let* (,@args)
                                      (pc-main-loop instr-list nil t
                                                    (pc-print-prompt-and-instr-flg)">define-pc-bind*</a> quiet
  (inhibit-output-lst (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> '(<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> proof-builder proof-tree warning <a class="sym-link system" href="basis-a.html#def-observation" data-sym="OBSERVATION">observation</a>)
      (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state))))</pre>
  </div>

<div class="form-block other" id="form-146" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-bind_2A" data-sym="DEFINE-PC-BIND*" title="(defmacro define-pc-bind* (name &amp;rest args)
  `(define-pc-meta ,name (&amp;rest instr-list)
                   (state-global-let* (,@args)
                                      (pc-main-loop instr-list nil t
                                                    (pc-print-prompt-and-instr-flg)">define-pc-bind*</a> quiet!
  (print-clause-ids nil)
  (<a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a> nil)
  (inhibit-output-lst (if (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> 'error (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state))
      <a class="sym-link system" href="axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a>
      (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> <a class="sym-link system" href="axioms.html#def-_2Avalid-output-names_2A" data-sym="*VALID-OUTPUT-NAMES*">*valid-output-names*</a> '(error)))))</pre>
  </div>

<div class="form-block other" id="form-147" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-bind_2A" data-sym="DEFINE-PC-BIND*" title="(defmacro define-pc-bind* (name &amp;rest args)
  `(define-pc-meta ,name (&amp;rest instr-list)
                   (state-global-let* (,@args)
                                      (pc-main-loop instr-list nil t
                                                    (pc-print-prompt-and-instr-flg)">define-pc-bind*</a> noise
  (<a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a> nil)
  (inhibit-output-lst '(proof-tree)))</pre>
  </div>

<div class="form-block other" id="form-148" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-bind_2A" data-sym="DEFINE-PC-BIND*" title="(defmacro define-pc-bind* (name &amp;rest args)
  `(define-pc-meta ,name (&amp;rest instr-list)
                   (state-global-let* (,@args)
                                      (pc-main-loop instr-list nil t
                                                    (pc-print-prompt-and-instr-flg)">define-pc-bind*</a> noise!
  (<a class="sym-link system" href="basis-a.html#def-gag-mode" data-sym="GAG-MODE">gag-mode</a> nil)
  (inhibit-output-lst nil))</pre>
  </div>

<div class="form-block function" id="def-find-equivalence-hyp-term-no-target" data-defines="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET" data-references="MV,EQUAL,SUBSETP-EQUAL,AND,HYP-TO-USE,Y,FARGN,X,LET*,CDR,1+,REFINEMENTP,FFN-SYMB,SYMBOLP,NOT,FQUOTEP,VARIABLEP,OR,CAR,SPLIT-IMPLIES,C,H,MV-LET,CONSP,IF,W,EQUIV,HYPS,TERM,INDEX,DEFUN" data-part-name="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET" data-part-args="W,EQUIV,HYPS,TERM,INDEX" data-part-body="MV,EQUAL,SUBSETP-EQUAL,AND,HYP-TO-USE,Y,FARGN,X,LET*,CDR,TERM,INDEX,1+,FIND-EQUIVALENCE-HYP-TERM-NO-TARGET,W,EQUIV,REFINEMENTP,FFN-SYMB,SYMBOLP,NOT,FQUOTEP,VARIABLEP,OR,CAR,SPLIT-IMPLIES,C,H,MV-LET,HYPS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET">find-equivalence-hyp-term-no-target</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-equivalence-hyp-term-no-target" data-sym="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET" title="(defun find-equivalence-hyp-term-no-target (index term hyps equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term-no-target</a>
  (index term hyps equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
  (if (consp hyps)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (h c)
      (<a class="sym-link local-def" href="#def-split-implies" data-sym="SPLIT-IMPLIES" title="(defun split-implies (term)
  (if (not (ffn-symb-p term &#39;implies))
      (mv nil term)
      (mv-let (h c) (split-implies (fargn term 2))
              (mv (append (flatten-ands-in-lit (fargn term 1)) h) c))))">split-implies</a> (car hyps))
      (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> c)
          (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> c)
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> c)))
          (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="rewrite.html#def-refinementp" data-sym="REFINEMENTP">refinementp</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> c) equiv <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
        (<a class="sym-link local-def" href="#def-find-equivalence-hyp-term-no-target" data-sym="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET" title="(defun find-equivalence-hyp-term-no-target (index term hyps equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term-no-target</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
          term
          (cdr hyps)
          equiv
          <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((x (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> c <span class="number">1</span>)) (y (<a class="sym-link system" href="axioms.html#def-fargn" data-sym="FARGN">fargn</a> c <span class="number">2</span>))
            (hyp-to-use (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-subsetp-equal" data-sym="SUBSETP-EQUAL">subsetp-equal</a> h hyps)
                (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal x term) y) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal y term) x)))))
          (if hyp-to-use
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> index hyp-to-use)
            (<a class="sym-link local-def" href="#def-find-equivalence-hyp-term-no-target" data-sym="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET" title="(defun find-equivalence-hyp-term-no-target (index term hyps equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term-no-target</a> (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> index)
              term
              (cdr hyps)
              equiv
              <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil)))</pre>
  </div>

<div class="form-block other" id="form-150" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> if-not-proved
  (goal-name cmd)
  (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> goal-name (goal-names (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
    (if (equal goal-name (goal-name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> cmd)
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
        (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          'if-not-proved
          <span class="string">"The proof-builder&#39;s atomic macro IF-NOT-PROVED requires the ~
              indicated goal to be the current goal.  However, the current ~
              goal is ~p0 while the first argument to IF-NOT-PROVED is ~p1."</span>
          (goal-name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
          goal-name)
        (declare (ignore erp val))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'fail)))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:skip</span>)))</pre>
  </div>

<div class="form-block other" id="form-151" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> <a class="sym-link system" href="axioms.html#def-_3D" data-sym="=">=</a>
  (&amp;optional x y &amp;rest rest-args)
  (when-goals-trip (let ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (hyps (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (abbreviations (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
        (rest-args-1 (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> rest-args
              (car rest-args)
              (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keywordp" data-sym="KEYWORDP">keywordp</a> (car rest-args))))
            (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> '(<span class="keyword">:hints</span> <span class="keyword">:none</span>) (cdr rest-args))
            rest-args)))
      (if (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> rest-args-1))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The ``rest-args&#39;&#39; arguments for the = command should be ~
                   empty or a list, either (i) containing one element, an ~
                   atom, or else (ii) of even length with keywords in the odd ~
                   positions.  Thus your command ~p0 is not legal.  See the ~
                   documentation for examples and details."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (make-pretty-pc-instr (cons <span class="keyword">:=</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (equiv-alist rest-args-1)
          (if (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> rest-args-1)
            (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> '(<span class="keyword">:equiv</span>) rest-args-1)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil rest-args-1))
          (let ((equiv (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:equiv</span> equiv-alist)) 'equal)))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (current-term <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>)
              (<a class="sym-link local-def" href="#def-fetch-term-and-cl" data-sym="FETCH-TERM-AND-CL" title="(defun fetch-term-and-cl (term addr cl)
  (declare (xargs :guard (bounded-integer-listp 1 (quote infinity) addr)))
  (cond ((eq cl t) (mv nil t)) ((null addr) (mv term cl))
        ((or (variablep term) (fquotep term)) (mv nil t))
        ((and (integerp (car addr)) (&lt; 0 (car addr))
...">fetch-term-and-cl</a> conc current-addr nil)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                      '<span class="keyword">:=</span>
                      <span class="string">"Found governors of T inside command ~p0!"</span>
                      (cons <span class="keyword">:=</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
                ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> x <span class="keyword">:&amp;</span>) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"We do not allow the first argument of the = command ~
                         to be the keyword :&amp;, because no other symbol with ~
                         print-name &amp; can be a term (and hence we use it to ~
                         represent the current subterm), but :&amp; is a ~
                         legitimate term and -- we can&#39;t be really sure ~
                         whether you intended it to represent the term :&amp; or ~
                         the current subterm."</span>)
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> equiv (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> 'equal 'coarsenings nil <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The ``equivalence relation&#39;&#39; that you supplied, ~p0, is not ~
                  known to ACL2 as an equivalence relation.~@1"</span>
                      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 equiv)
                        (cons #\1
                          (let ((pair (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp equiv)
                                 (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> equiv (<a class="sym-link system" href="axioms.html#def-table-alist" data-sym="TABLE-ALIST">table-alist</a> 'macro-aliases-table <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))))
                            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> pair (<a class="sym-link system" href="basis-b.html#def-equivalence-relationp" data-sym="EQUIVALENCE-RELATIONP">equivalence-relationp</a> (cdr pair) <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))
                              (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Perhaps you intended the ~
                                         corresponding function for which it ~
                                         is an ``alias&#39;&#39;(see :DOC ~
                                         macro-aliases-table), ~x0."</span>
                                (cdr pair))
                              <span class="string">""</span>)))))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
                ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (found-hyp new)
                    (<a class="sym-link local-def" href="#def-find-equivalence-hyp-term-no-target" data-sym="FIND-EQUIVALENCE-HYP-TERM-NO-TARGET" title="(defun find-equivalence-hyp-term-no-target (index term hyps equiv w)
  (if (consp hyps)
      (mv-let (h c) (split-implies (car hyps))
              (if (or (variablep c) (fquotep c) (not (symbolp (ffn-symb c)))
                      (not (refinementp (ffn-symb c) equiv w)))
...">find-equivalence-hyp-term-no-target</a> <span class="number">1</span>
                      current-term
                      (flatten-ands-in-lit-lst (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> hyps <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>))
                      equiv
                      <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                    (if found-hyp
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                          nil
                          state
                          (found-hyp)
                          (fms0 <span class="string">"Using hypothesis #~x0.~%"</span>
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 found-hyp))))
                        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:equiv</span> current-term new)))
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"There is no hypothesis or governor that equates ~
                             the current term ~#0~[under the equivalence ~
                             relation ~p1 ~/~]with anything."</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                              (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equiv 'equal)
                                <span class="number">1</span>
                                <span class="number">0</span>))
                            (cons #\1 equiv)))
                        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (rest-args-alist tail)
                    (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> '(<span class="keyword">:otf-flg</span> <span class="keyword">:hints</span>) rest-args-1)
                    (declare (ignore rest-args-alist))
                    (if tail
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The only keywords allowed in the arguments to the = ~
                        command are :otf-flg, :hints, and :equiv.  Your ~
                        instruction ~p1 violates this requirement."</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\1 (make-pretty-pc-instr (cons <span class="keyword">:=</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))))
                        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))
                      (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((old (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
                               (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp x) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (intern-in-keyword-package x) <span class="keyword">:&amp;</span>)))
                             (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> current-term)
                             (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> x abbreviations '<span class="keyword">:=</span>))) (new (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
                              (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> x abbreviations '<span class="keyword">:=</span>)
                              (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> y abbreviations '<span class="keyword">:=</span>))))
                        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:protect</span> (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:claim</span> (if <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>
                                (<a class="sym-link system" href="axioms.html#def-fcons-term_2A" data-sym="FCONS-TERM*">fcons-term*</a> '<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a>
                                  (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> <a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a>)
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> equiv old new))
                                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> equiv old new))
                              <span class="keyword">:do-not-flatten</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                              rest-args-1)
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:equiv</span> old new equiv)
                            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:if-not-proved</span> (goal-name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) <span class="keyword">:drop-last</span>)))))))))))))))</pre>
  </div>

<div class="form-block other" id="form-152" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> set-success
  (instr form)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(sequence (,INSTR) nil nil ,FORM)))</pre>
  </div>

<div class="form-block other" id="form-153" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> orelse
  (instr1 instr2)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(negate (do-strict (negate ,INSTR1) (negate ,INSTR2)))))</pre>
  </div>

<div class="form-block function" id="def-applicable-rewrite-rules" data-defines="APPLICABLE-REWRITE-RULES" data-references="LEMMAS,QUOTE,GETPROPC,GENEQV-AT-SUBTERM-TOP,APPLICABLE-REWRITE-RULES1,FFN-SYMB,FLAMBDAP,FQUOTEP,VARIABLEP,OR,NOT,XARGS,DECLARE,WRLD,ENS,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-ADDR,CONC,CURRENT-TERM,DEFUN" data-part-name="APPLICABLE-REWRITE-RULES" data-part-args="WRLD,ENS,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-ADDR,CONC,CURRENT-TERM" data-part-declare="FFN-SYMB,FLAMBDAP,FQUOTEP,CURRENT-TERM,VARIABLEP,OR,NOT,XARGS,DECLARE" data-part-body="TARGET-INDEX,TARGET-NAME-OR-RUNE,LEMMAS,QUOTE,FFN-SYMB,GETPROPC,WRLD,ENS,CURRENT-ADDR,CONC,GENEQV-AT-SUBTERM-TOP,CURRENT-TERM,APPLICABLE-REWRITE-RULES1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLICABLE-REWRITE-RULES">applicable-rewrite-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-applicable-rewrite-rules" data-sym="APPLICABLE-REWRITE-RULES" title="(defun applicable-rewrite-rules
       (current-term conc current-addr target-name-or-rune target-index ens
        wrld)
  (declare
   (xargs :guard
...">applicable-rewrite-rules</a>
  (current-term conc
    current-addr
    target-name-or-rune
    target-index
    ens
    wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
          (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
          (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term))))))
  (applicable-rewrite-rules1 current-term
    (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> conc current-addr ens wrld)
    (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term) 'lemmas nil wrld)
    <span class="number">1</span>
    target-name-or-rune
    target-index
    wrld))</pre>
  </div>

<div class="form-block other" id="form-155" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> show-rewrites
  (&amp;optional rule-id enabled-only-flg)
  (when-goals (let ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
      (let ((ens (make-pc-ens (pc-ens <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state)) (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
          (abbreviations (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> conc current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (all-hyps (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr))))
        (show-rewrites-linears-fn 'show-rewrites
          rule-id
          enabled-only-flg
          ens
          current-term
          abbreviations
          <a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a>
          all-hyps
          (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> conc current-addr ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
          nil
          state)))))</pre>
  </div>

<div class="form-block other" id="form-156" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> sr
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:show-rewrites</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-157" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> show-linears
  (&amp;optional rule-id enabled-only-flg)
  (when-goals (let ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
      (let ((ens (make-pc-ens (pc-ens <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state)) (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
          (abbreviations (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> conc current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (all-hyps (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr))))
        (show-rewrites-linears-fn 'show-linears
          rule-id
          enabled-only-flg
          ens
          current-term
          abbreviations
          <a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a>
          all-hyps
          (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> conc current-addr ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
          nil
          state)))))</pre>
  </div>

<div class="form-block other" id="form-158" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> sls
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:show-linears</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-159" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> pl
  (&amp;optional x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (x (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp (pl ',X))))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (goals)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-all-goals-proved-message state)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'skip)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
             (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
             (<a class="sym-link system" href="basis-b.html#def-flambda-applicationp" data-sym="FLAMBDA-APPLICATIONP">flambda-applicationp</a> current-term)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              'pl
              <span class="string">"The current subterm is not the application of a ~
                         function symbol."</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp (pl ',(FFN-SYMB CURRENT-TERM))))))))))</pre>
  </div>

<div class="form-block other" id="form-160" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> <a class="sym-link system" href="defthm.html#def-pr" data-sym="PR">pr</a>
  (&amp;optional x)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (x (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp (<a class="sym-link system" href="defthm.html#def-pr" data-sym="PR">pr</a> ',X))))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (goals)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-all-goals-proved-message state)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'skip)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr)))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
             (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
             (<a class="sym-link system" href="basis-b.html#def-flambda-applicationp" data-sym="FLAMBDA-APPLICATIONP">flambda-applicationp</a> current-term)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              '<a class="sym-link system" href="defthm.html#def-pr" data-sym="PR">pr</a>
              <span class="string">"The current subterm is not the application of a ~
                         function symbol."</span>))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp (<a class="sym-link system" href="defthm.html#def-pr" data-sym="PR">pr</a> ',(FFN-SYMB CURRENT-TERM))))))))))</pre>
  </div>

<div class="form-block other" id="form-161" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> show-type-prescriptions
  (&amp;optional rule-id)
  (when-goals (let ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
      (let ((ens (make-pc-ens (pc-ens <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state)) (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
          (abbreviations (abbreviations <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          (all-hyps (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr))))
        (show-type-prescription-rules current-term
          rule-id
          abbreviations
          all-hyps
          ens
          state)))))</pre>
  </div>

<div class="form-block other" id="form-162" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> st
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:show-type-prescriptions</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block function" id="def-translate-subst-abb1" data-defines="TRANSLATE-SUBST-ABB1" data-references="CAAR,CDR,VAL,CONS,LIST,MV,QUOTE,CADAR,TRANS0,TERM,ERP,MV-LET,CONSP,IF,SYMBOL-ALISTP,XARGS,DECLARE,STATE,ABBREVIATIONS,SUB,DEFUN" data-used-by="TRANSLATE-SUBST-ABB" data-part-name="TRANSLATE-SUBST-ABB1" data-part-args="STATE,ABBREVIATIONS,SUB" data-part-declare="SUB,SYMBOL-ALISTP,XARGS,DECLARE" data-part-body="CAAR,CDR,VAL,CONS,LIST,MV,TRANSLATE-SUBST-ABB1,QUOTE,ABBREVIATIONS,CADAR,TRANS0,STATE,TERM,ERP,MV-LET,SUB,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-SUBST-ABB1">translate-subst-abb1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-subst-abb1" data-sym="TRANSLATE-SUBST-ABB1" title="(defun translate-subst-abb1 (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (mv-let (erp term state)
              (trans0 (cadar sub) abbreviations &#39;translate-subst-abb1)
...">translate-subst-abb1</a>
  (sub abbreviations state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> sub)))
  (if (consp sub)
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp term state)
      (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> sub) abbreviations '<a class="sym-link local-def" href="#def-translate-subst-abb1" data-sym="TRANSLATE-SUBST-ABB1" title="(defun translate-subst-abb1 (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (mv-let (erp term state)
              (trans0 (cadar sub) abbreviations &#39;translate-subst-abb1)
...">translate-subst-abb1</a>)
      (if erp
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="string">"~|Translation error for ~x0 caused error in ~
                       translating ~xs.~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> sub)))
          state)
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
          (<a class="sym-link local-def" href="#def-translate-subst-abb1" data-sym="TRANSLATE-SUBST-ABB1" title="(defun translate-subst-abb1 (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (mv-let (erp term state)
              (trans0 (cadar sub) abbreviations &#39;translate-subst-abb1)
...">translate-subst-abb1</a> (cdr sub) abbreviations state)
          (if erp
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state)
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil (cons (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> sub) term) val) state)))))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil nil state)))</pre>
  </div>

<div class="form-block function" id="def-single-valued-symbolp-alistp" data-defines="SINGLE-VALUED-SYMBOLP-ALISTP" data-references="T,CDR,CAAR,ASSOC-EQ,NOT,AND,IF,SYMBOL-ALISTP,XARGS,DECLARE,ALIST,DEFUN" data-used-by="TRANSLATE-SUBST-ABB" data-part-name="SINGLE-VALUED-SYMBOLP-ALISTP" data-part-args="ALIST" data-part-declare="ALIST,SYMBOL-ALISTP,XARGS,DECLARE" data-part-body="T,SINGLE-VALUED-SYMBOLP-ALISTP,CDR,CAAR,ASSOC-EQ,NOT,AND,ALIST,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SINGLE-VALUED-SYMBOLP-ALISTP">single-valued-symbolp-alistp</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-single-valued-symbolp-alistp" data-sym="SINGLE-VALUED-SYMBOLP-ALISTP" title="(defun single-valued-symbolp-alistp (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (if alist
      (and (not (assoc-eq (caar alist) (cdr alist)))
           (single-valued-symbolp-alistp (cdr alist)))">single-valued-symbolp-alistp</a>
  (alist)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist)))
  (if alist
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) (cdr alist)))
      (<a class="sym-link local-def" href="#def-single-valued-symbolp-alistp" data-sym="SINGLE-VALUED-SYMBOLP-ALISTP" title="(defun single-valued-symbolp-alistp (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (if alist
      (and (not (assoc-eq (caar alist) (cdr alist)))
           (single-valued-symbolp-alistp (cdr alist)))">single-valued-symbolp-alistp</a> (cdr alist)))
    <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))</pre>
  </div>

<div class="form-block function" id="def-check-cars-are-variables" data-defines="CHECK-CARS-ARE-VARIABLES" data-references="CDR,T,MV,CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,EQ,NOT,OR,CAAR,TRANS0,VAL,ERP,MV-LET,IF,SYMBOL-ALISTP,XARGS,DECLARE,STATE,ALIST,DEFUN" data-used-by="TRANSLATE-SUBST-ABB" data-part-name="CHECK-CARS-ARE-VARIABLES" data-part-args="STATE,ALIST" data-part-declare="ALIST,SYMBOL-ALISTP,XARGS,DECLARE" data-part-body="CDR,CHECK-CARS-ARE-VARIABLES,T,MV,CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,EQ,NOT,OR,CAAR,TRANS0,STATE,VAL,ERP,MV-LET,ALIST,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHECK-CARS-ARE-VARIABLES">check-cars-are-variables</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-check-cars-are-variables" data-sym="CHECK-CARS-ARE-VARIABLES" title="(defun check-cars-are-variables (alist state)
  (declare (xargs :guard (symbol-alistp alist)))
  (if alist
      (mv-let (erp val state) (trans0 (caar alist) nil)
              (if (or erp (not (eq val (caar alist))))
...">check-cars-are-variables</a>
  (alist state)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> alist)))
  (if alist
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
      (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) nil)
      (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> val (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist))))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
            nil
            state
            (alist)
            (fms0 <span class="string">"~|A substitution must be an alist whose CARs ~
                               are variables, but the entry ~x0 violates this ~
                               property.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)))))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
        (<a class="sym-link local-def" href="#def-check-cars-are-variables" data-sym="CHECK-CARS-ARE-VARIABLES" title="(defun check-cars-are-variables (alist state)
  (declare (xargs :guard (symbol-alistp alist)))
  (if alist
      (mv-let (erp val state) (trans0 (caar alist) nil)
              (if (or erp (not (eq val (caar alist))))
...">check-cars-are-variables</a> (cdr alist) state)))
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil state)))</pre>
  </div>

<div class="form-block function" id="def-translate-subst-abb" data-defines="TRANSLATE-SUBST-ABB" data-references="TRANSLATE-SUBST-ABB1,VAL,IF,CHECK-CARS-ARE-VARIABLES,ERP,MV-LET,SINGLE-VALUED-SYMBOLP-ALISTP,SYMBOL-ALISTP,AND,T,MV,CONS,LIST,FMS0,PROOF-BUILDER,IO?,PPROGN,TRUE-LISTP,NOT,COND,STATE,ABBREVIATIONS,SUB,DEFUN" data-part-name="TRANSLATE-SUBST-ABB" data-part-args="STATE,ABBREVIATIONS,SUB" data-part-body="ABBREVIATIONS,TRANSLATE-SUBST-ABB1,VAL,IF,CHECK-CARS-ARE-VARIABLES,ERP,MV-LET,SINGLE-VALUED-SYMBOLP-ALISTP,SYMBOL-ALISTP,AND,T,MV,CONS,LIST,FMS0,STATE,PROOF-BUILDER,IO?,PPROGN,SUB,TRUE-LISTP,NOT,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-SUBST-ABB">translate-subst-abb</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-subst-abb" data-sym="TRANSLATE-SUBST-ABB" title="(defun translate-subst-abb (sub abbreviations state)
  (cond
   ((not (true-listp sub))
    (pprogn
     (io? proof-builder nil state (sub)
...">translate-subst-abb</a>
  (sub abbreviations state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> sub)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
          nil
          state
          (sub)
          (fms0 <span class="string">"~|A substitution must be a true (nil-terminated) ~
                        list, but~%~x0 is not.~|"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 sub))))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))
    ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-symbol-alistp" data-sym="SYMBOL-ALISTP">symbol-alistp</a> sub) (<a class="sym-link local-def" href="#def-single-valued-symbolp-alistp" data-sym="SINGLE-VALUED-SYMBOLP-ALISTP" title="(defun single-valued-symbolp-alistp (alist)
  (declare (xargs :guard (symbol-alistp alist)))
  (if alist
      (and (not (assoc-eq (caar alist) (cdr alist)))
           (single-valued-symbolp-alistp (cdr alist)))">single-valued-symbolp-alistp</a> sub))) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
          nil
          state
          (sub)
          (fms0 <span class="string">"~|A substitution must be an alist of pairs without ~
                        duplicate keys, but ~x0 is not.~|"</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 sub))))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp state)
        (<a class="sym-link local-def" href="#def-check-cars-are-variables" data-sym="CHECK-CARS-ARE-VARIABLES" title="(defun check-cars-are-variables (alist state)
  (declare (xargs :guard (symbol-alistp alist)))
  (if alist
      (mv-let (erp val state) (trans0 (caar alist) nil)
              (if (or erp (not (eq val (caar alist))))
...">check-cars-are-variables</a> sub state)
        (if erp
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state)
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (<a class="sym-link local-def" href="#def-translate-subst-abb1" data-sym="TRANSLATE-SUBST-ABB1" title="(defun translate-subst-abb1 (sub abbreviations state)
  (declare (xargs :guard (symbol-alistp sub)))
  (if (consp sub)
      (mv-let (erp term state)
              (trans0 (cadar sub) abbreviations &#39;translate-subst-abb1)
...">translate-subst-abb1</a> sub abbreviations state)
            (if erp
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                  nil
                  state
                  (val sub erp)
                  (fms0 erp (cons (cons #\s sub) val)))
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil val state))))))))</pre>
  </div>

<div class="form-block function" id="def-make-rewrite-instr" data-defines="MAKE-REWRITE-INSTR" data-references="T,LIST,COND,MAKE-PRETTY-PC-COMMAND,LIST*,INSTANTIATE-FREE,RAW-SUBST,LEMMA-ID,DEFUN" data-part-name="MAKE-REWRITE-INSTR" data-part-args="INSTANTIATE-FREE,RAW-SUBST,LEMMA-ID" data-part-body="T,RAW-SUBST,LIST,INSTANTIATE-FREE,COND,LEMMA-ID,MAKE-PRETTY-PC-COMMAND,LIST*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-REWRITE-INSTR">make-rewrite-instr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-rewrite-instr" data-sym="MAKE-REWRITE-INSTR" title="(defun make-rewrite-instr (lemma-id raw-subst instantiate-free)
  (list* (make-pretty-pc-command :rewrite) lemma-id
         (cond (instantiate-free (list raw-subst instantiate-free))
               (raw-subst (list raw-subst)) (t nil))))">make-rewrite-instr</a>
  (lemma-id raw-subst instantiate-free)
  (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (make-pretty-pc-command <span class="keyword">:rewrite</span>)
    lemma-id
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (instantiate-free (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> raw-subst instantiate-free))
      (raw-subst (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> raw-subst))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block other" id="form-168" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
  (&amp;optional rule-id raw-sub instantiate-free)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp sub state)
    (<a class="sym-link local-def" href="#def-translate-subst-abb" data-sym="TRANSLATE-SUBST-ABB" title="(defun translate-subst-abb (sub abbreviations state)
  (cond
   ((not (true-listp sub))
    (pprogn
     (io? proof-builder nil state (sub)
...">translate-subst-abb</a> raw-sub abbreviations state)
    (if erp
      (print-no-change2 <span class="string">"~x0 failed."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons <span class="keyword">:rewrite</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
      (let ((name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp rule-id) rule-id)) (rune (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp rule-id)
              (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car rule-id) '(<span class="keyword">:rewrite</span> <span class="keyword">:definition</span>))
              rule-id))
          (index (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp rule-id) (&lt; <span class="number">0</span> rule-id))
              rule-id
              (if rule-id
                nil
                <span class="number">1</span>)))
          (pc-ens (make-pc-ens pc-ens state))
          (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
          (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
          (assumptions (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> hyps (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
             (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
             (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term))) (print-no-change2 <span class="string">"It is only possible to apply rewrite rules to terms that are not ~
           variables, (quoted) constants, or applications of lambda ~
           expressions.  However, the current term is:~%~ ~ ~y0.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 current-term))))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name index rune)) (print-no-change2 <span class="string">"The rule-id argument to REWRITE must be a name, a positive ~
           integer, or a :rewrite or :definition rune, but ~x0 is none of ~
           these.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 rule-id))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg hyps-type-alist ttree)
              (hyps-type-alist assumptions pc-ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
              (declare (ignore ttree))
              (if flg
                (print-no-change2 <span class="string">"Contradiction in the hypotheses!~%The S command should ~
                complete this goal.~|"</span>)
                (let ((app-rewrite-rules (<a class="sym-link local-def" href="#def-applicable-rewrite-rules" data-sym="APPLICABLE-REWRITE-RULES" title="(defun applicable-rewrite-rules
       (current-term conc current-addr target-name-or-rune target-index ens
        wrld)
  (declare
   (xargs :guard
...">applicable-rewrite-rules</a> current-term
                       conc
                       current-addr
                       (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name rune)
                       index
                       pc-ens
                       <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
                  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> app-rewrite-rules)
                    (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> index (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> index <span class="number">1</span>))
                      (print-no-change2 <span class="string">"There are fewer than ~x0 applicable rewrite rules.~%"</span>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 index)))
                      (print-no-change2 <span class="string">"There are no applicable rewrite rules.~%"</span>))
                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((sar (car app-rewrite-rules)) (lemma (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:lemma</span>))
                        (start-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:alist</span>))
                        (alist (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> start-alist sub))
                        (rhs (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rhs</span>))
                        (lemma-hyps (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:hyps</span>))
                        (lemma-rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rune</span>))
                        (lemma-name (base-symbol lemma-rune))
                        (lemma-id (if (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> lemma-rune)
                            lemma-rune
                            lemma-name))
                        (non-free (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (intersection-domains sub start-alist)
                            (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> sub)
                              (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> rhs) (all-vars1-lst lemma-hyps nil))))))
                      (if non-free
                        (print-no-change2 <span class="string">"The variable~#0~[~/~/s~] ~&amp;1 supplied by the ~
                        substitution in this instruction ~#0~[~/is~/are~] not ~
                        free for instantiation in the current context.~|"</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> non-free)))
                            (cons #\1 non-free)))
                        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (subst-hyps unify-subst ttree2)
                          (unrelieved-hyps lemma-rune
                            lemma-hyps
                            alist
                            hyps-type-alist
                            instantiate-free
                            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                            state
                            pc-ens
                            nil)
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (let ((extra-alist (<a class="sym-link system" href="axioms.html#def-alist-difference-eq" data-sym="ALIST-DIFFERENCE-EQ">alist-difference-eq</a> unify-subst alist)))
                              (if extra-alist
                                (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                  nil
                                  state
                                  (abbreviations extra-alist sub lemma-id)
                                  (fms0 <span class="string">"~|Rewriting with ~x0 under the ~
                                        following extension of the ~
                                        substitution generated by matching ~
                                        that rewrite rule with the current ~
                                        term~#1~[ (after extending it with ~
                                        the substitution ~x2 supplied in the ~
                                        instruction)~/~]:~|~x3.~|"</span>
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lemma-id)
                                      (cons #\1
                                        (if sub
                                          <span class="number">0</span>
                                          <span class="number">1</span>))
                                      (cons #\2 sub)
                                      (cons #\3
                                        (untranslate-subst-abb extra-alist abbreviations state)))))
                                (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                  nil
                                  state
                                  (lemma-id)
                                  (fms0 <span class="string">"~|Rewriting with ~x0.~|"</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lemma-id))))))
                            (let ((runes (all-runes-in-ttree ttree2 nil)))
                              (if runes
                                (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                  nil
                                  state
                                  (runes)
                                  (fms0 <span class="string">"~|--NOTE-- Using the following runes ~
                                        in addition to the indicated rule:~%  ~
                                        ~x0.~|"</span>
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 runes))))
                                state))
                            (let ((new-goals (make-new-goals-fixed-hyps subst-hyps
                                   assumptions
                                   goal-name
                                   depends-on)))
                              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (changed-goal state)
                                (<a class="sym-link local-def" href="#def-deposit-term-in-goal" data-sym="DEPOSIT-TERM-IN-GOAL" title="(defun deposit-term-in-goal (given-goal conc current-addr new-term state)
  (let ((new-conc (deposit-term conc current-addr new-term)))
    (if (quotep new-term)
        (mv-let (new-current-addr state)
                (maybe-truncate-current-address current-addr new-conc
...">deposit-term-in-goal</a> (car goals)
                                  conc
                                  current-addr
                                  (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> unify-subst (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> rewrite-rule lemma <span class="keyword">:rhs</span>))
                                  state)
                                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                                    <span class="keyword">:instruction</span> (<a class="sym-link local-def" href="#def-make-rewrite-instr" data-sym="MAKE-REWRITE-INSTR" title="(defun make-rewrite-instr (lemma-id raw-subst instantiate-free)
  (list* (make-pretty-pc-command :rewrite) lemma-id
         (cond (instantiate-free (list raw-subst instantiate-free))
               (raw-subst (list raw-subst)) (t nil))))">make-rewrite-instr</a> lemma-id raw-sub instantiate-free)
                                    <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                                        changed-goal
                                        <span class="keyword">:depends-on</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> depends-on (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new-goals)))
                                      (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-goals (cdr goals)))
                                    <span class="keyword">:local-tag-tree</span> (push-lemma lemma-rune ttree2))
                                  state)))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-applicable-linear-rules" data-defines="APPLICABLE-LINEAR-RULES" data-references="LINEAR-LEMMAS,QUOTE,GETPROPC,APPLICABLE-LINEAR-RULES1,FFN-SYMB,FLAMBDAP,FQUOTEP,VARIABLEP,OR,NOT,XARGS,DECLARE,WRLD,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-TERM,DEFUN" data-part-name="APPLICABLE-LINEAR-RULES" data-part-args="WRLD,TARGET-INDEX,TARGET-NAME-OR-RUNE,CURRENT-TERM" data-part-declare="FFN-SYMB,FLAMBDAP,FQUOTEP,CURRENT-TERM,VARIABLEP,OR,NOT,XARGS,DECLARE" data-part-body="TARGET-INDEX,TARGET-NAME-OR-RUNE,WRLD,LINEAR-LEMMAS,QUOTE,FFN-SYMB,GETPROPC,CURRENT-TERM,APPLICABLE-LINEAR-RULES1" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="APPLICABLE-LINEAR-RULES">applicable-linear-rules</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-applicable-linear-rules" data-sym="APPLICABLE-LINEAR-RULES" title="(defun applicable-linear-rules
       (current-term target-name-or-rune target-index wrld)
  (declare
   (xargs :guard
    (not
...">applicable-linear-rules</a>
  (current-term target-name-or-rune target-index wrld)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
          (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
          (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term))))))
  (applicable-linear-rules1 current-term
    (<a class="sym-link system" href="axioms.html#def-getpropc" data-sym="GETPROPC">getpropc</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term) 'linear-lemmas nil wrld)
    <span class="number">1</span>
    target-name-or-rune
    target-index))</pre>
  </div>

<div class="form-block function" id="def-make-linear-instr" data-defines="MAKE-LINEAR-INSTR" data-references="T,LIST,COND,MAKE-PRETTY-PC-COMMAND,LIST*,INSTANTIATE-FREE,RAW-SUBST,LEMMA-ID,DEFUN" data-part-name="MAKE-LINEAR-INSTR" data-part-args="INSTANTIATE-FREE,RAW-SUBST,LEMMA-ID" data-part-body="T,RAW-SUBST,LIST,INSTANTIATE-FREE,COND,LEMMA-ID,MAKE-PRETTY-PC-COMMAND,LIST*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-LINEAR-INSTR">make-linear-instr</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-linear-instr" data-sym="MAKE-LINEAR-INSTR" title="(defun make-linear-instr (lemma-id raw-subst instantiate-free)
  (list* (make-pretty-pc-command :apply-linear) lemma-id
         (cond (instantiate-free (list raw-subst instantiate-free))
               (raw-subst (list raw-subst)) (t nil))))">make-linear-instr</a>
  (lemma-id raw-subst instantiate-free)
  (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> (make-pretty-pc-command <span class="keyword">:apply-linear</span>)
    lemma-id
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (instantiate-free (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> raw-subst instantiate-free))
      (raw-subst (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> raw-subst))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil))))</pre>
  </div>

<div class="form-block other" id="form-171" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> apply-linear
  (&amp;optional rule-id raw-sub instantiate-free)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp sub state)
    (<a class="sym-link local-def" href="#def-translate-subst-abb" data-sym="TRANSLATE-SUBST-ABB" title="(defun translate-subst-abb (sub abbreviations state)
  (cond
   ((not (true-listp sub))
    (pprogn
     (io? proof-builder nil state (sub)
...">translate-subst-abb</a> raw-sub abbreviations state)
    (if erp
      (print-no-change2 <span class="string">"~x0 failed."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons <span class="keyword">:rewrite</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
      (let ((name (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (symbolp rule-id) rule-id)) (rune (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp rule-id)
              (<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> (car rule-id) '(<span class="keyword">:linear</span>))
              rule-id))
          (index (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp rule-id) (&lt; <span class="number">0</span> rule-id))
              rule-id
              (if rule-id
                nil
                <span class="number">1</span>)))
          (pc-ens (make-pc-ens pc-ens state))
          (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
          (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
          (assumptions (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> hyps (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> current-term)
             (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> current-term)
             (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> current-term))) (print-no-change2 <span class="string">"It is only possible to apply linear rules to terms that are not ~
           variables, (quoted) constants, or applications of lambda ~
           expressions.  However, the current term is:~%~ ~ ~y0.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 current-term))))
          ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name index rune)) (print-no-change2 <span class="string">"The rule-id argument to REWRITE must be a name, a positive ~
           integer, or a :linear rune, but ~x0 is none of these.~|"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 rule-id))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg hyps-type-alist ttree)
              (hyps-type-alist assumptions pc-ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
              (declare (ignore ttree))
              (if flg
                (print-no-change2 <span class="string">"Contradiction in the hypotheses!~%The S command should ~
                complete this goal.~|"</span>)
                (let ((app-linear-rules (<a class="sym-link local-def" href="#def-applicable-linear-rules" data-sym="APPLICABLE-LINEAR-RULES" title="(defun applicable-linear-rules
       (current-term target-name-or-rune target-index wrld)
  (declare
   (xargs :guard
    (not
...">applicable-linear-rules</a> current-term
                       (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name rune)
                       index
                       <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
                  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> app-linear-rules)
                    (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> index (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> index <span class="number">1</span>))
                      (print-no-change2 <span class="string">"There are fewer than ~x0 applicable linear rules.~%"</span>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 index)))
                      (print-no-change2 <span class="string">"There are no applicable linear rules.~%"</span>))
                    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((sar (car app-linear-rules)) (lemma (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:lemma</span>))
                        (start-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> sar sar <span class="keyword">:alist</span>))
                        (alist (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> start-alist sub))
                        (lemma-concl (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:concl</span>))
                        (lemma-hyps (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:hyps</span>))
                        (lemma-rune (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> linear-lemma lemma <span class="keyword">:rune</span>))
                        (lemma-name (base-symbol lemma-rune))
                        (lemma-id (if (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> lemma-rune)
                            lemma-rune
                            lemma-name))
                        (non-free (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (intersection-domains sub start-alist)
                            (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> sub)
                              (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> lemma-concl)
                                (all-vars1-lst lemma-hyps nil))))))
                      (if non-free
                        (print-no-change2 <span class="string">"The variable~#0~[~/~/s~] ~&amp;1 supplied by the ~
                        substitution in this instruction ~#0~[~/is~/are~] not ~
                        free for instantiation in the current context.~|"</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="basis-a.html#def-zero-one-or-more" data-sym="ZERO-ONE-OR-MORE">zero-one-or-more</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> non-free)))
                            (cons #\1 non-free)))
                        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (subst-hyps unify-subst ttree2)
                          (unrelieved-hyps lemma-rune
                            lemma-hyps
                            alist
                            hyps-type-alist
                            instantiate-free
                            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                            state
                            pc-ens
                            nil)
                          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (let ((extra-alist (<a class="sym-link system" href="axioms.html#def-alist-difference-eq" data-sym="ALIST-DIFFERENCE-EQ">alist-difference-eq</a> unify-subst alist)))
                              (if extra-alist
                                (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                  nil
                                  state
                                  (abbreviations extra-alist sub lemma-id)
                                  (fms0 <span class="string">"~|Apply linear rule ~x0 under the ~
                                        following extension of the ~
                                        substitution generated by matching ~
                                        that rule&#39;s trigger term with the ~
                                        current term ~#1~[ (after extending ~
                                        it with the substitution ~x2 supplied ~
                                        in the instruction)~/~]:  ~x3.~|"</span>
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lemma-id)
                                      (cons #\1
                                        (if sub
                                          <span class="number">0</span>
                                          <span class="number">1</span>))
                                      (cons #\2 sub)
                                      (cons #\3
                                        (untranslate-subst-abb extra-alist abbreviations state)))))
                                (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                  nil
                                  state
                                  (lemma-id)
                                  (fms0 <span class="string">"~|Applying linear rule ~x0.~|"</span>
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 lemma-id))))))
                            (let ((runes (all-runes-in-ttree ttree2 nil)))
                              (if runes
                                (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                  nil
                                  state
                                  (runes)
                                  (fms0 <span class="string">"~|--NOTE-- Using the following runes ~
                                        in addition to the indicated rule:~%  ~
                                        ~x0.~|"</span>
                                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 runes))))
                                state))
                            (let ((new-goals (make-new-goals-fixed-hyps subst-hyps
                                   assumptions
                                   goal-name
                                   depends-on)))
                              (let ((changed-goal (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                                     (car goals)
                                     <span class="keyword">:hyps</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> hyps (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-b.html#def-sublis-var" data-sym="SUBLIS-VAR">sublis-var</a> unify-subst lemma-concl)))
                                     <span class="keyword">:depends-on</span> (<a class="sym-link system" href="axioms.html#def-_2B" data-sym="+">+</a> depends-on (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> new-goals)))))
                                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                                    <span class="keyword">:instruction</span> (<a class="sym-link local-def" href="#def-make-linear-instr" data-sym="MAKE-LINEAR-INSTR" title="(defun make-linear-instr (lemma-id raw-subst instantiate-free)
  (list* (make-pretty-pc-command :apply-linear) lemma-id
         (cond (instantiate-free (list raw-subst instantiate-free))
               (raw-subst (list raw-subst)) (t nil))))">make-linear-instr</a> lemma-id raw-sub instantiate-free)
                                    <span class="keyword">:goals</span> (cons changed-goal (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-goals (cdr goals)))
                                    <span class="keyword">:local-tag-tree</span> (push-lemma lemma-rune ttree2))
                                  state)))))))))))))))))</pre>
  </div>

<div class="form-block other" id="form-172" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> al
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:apply-linear</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-173" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> <a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a>
  (&amp;optional name)
  (let ((name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name (make-official-pc-command '<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a>))))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (equal (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:doc</span> (<a class="sym-link system" href="basis-b.html#def-ld-keyword-aliases" data-sym="LD-KEYWORD-ALIASES">ld-keyword-aliases</a> state))
           '(<span class="keyword">:doc</span> <span class="number">1</span> xdoc))
         (<a class="sym-link system" href="axioms.html#def-function-symbolp" data-sym="FUNCTION-SYMBOLP">function-symbolp</a> 'colon-xdoc-initialized (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp (if (colon-xdoc-initialized state)
              (xdoc ',NAME)
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (fms0 <span class="string">"Note: Using built-in :doc command.  To use ~
                                   :xdoc command, exit the proof-builder and ~
                                   run :doc in the top-level loop.~|~%"</span>)
                (<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> ',NAME))))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp (<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> ',NAME)))))))</pre>
  </div>

<div class="form-block other" id="form-174" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> <a class="sym-link system" href="history-management.html#def-help" data-sym="HELP">help</a>
  (&amp;optional name)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp name)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The argument for :HELP requires a symbol, but ~x0 ~
                            is not a symbol."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((name (if (equal (symbol-name name) <span class="string">"ALL"</span>)
             'proof-builder-commands
             (make-official-pc-command (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name '<a class="sym-link system" href="history-management.html#def-help" data-sym="HELP">help</a>)))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="history-management.html#def-doc" data-sym="DOC">doc</a> ,NAME))))))</pre>
  </div>

<div class="form-block function" id="def-pc-rewrite_2A-1" data-defines="PC-REWRITE*-1" data-references="1-,T,<=,EQUAL,COND,IGNORABLE,DECLARE,CURRENT-LITERAL,MAKE,REWRITE-CONSTANT,CHANGE,?,REWRITE-STACK-LIMIT,PROOF-BUILDER,QUOTE,REWRITE,REWRITE-ENTRY,GSTACK,LET,TTREE,NEWTERM,SL-LET,MV,NORMALIZE,IF,NTERM,MV-LET,STEP-LIMIT,BACKCHAIN-LIMIT,REPEAT,STATE,ENS,REWRITE-FLG,NORMALIZE-FLG,POT-LST,OLD-TTREE,RCNST,WRLD,IFF-FLG,GENEQV,TYPE-ALIST,TERM,DEFUN" data-used-by="PC-REWRITE*" data-part-name="PC-REWRITE*-1" data-part-args="STEP-LIMIT,BACKCHAIN-LIMIT,REPEAT,STATE,ENS,REWRITE-FLG,NORMALIZE-FLG,POT-LST,OLD-TTREE,RCNST,WRLD,IFF-FLG,GENEQV,TYPE-ALIST,TERM" data-part-body="1-,GENEQV,PC-REWRITE*-1,T,REPEAT,<=,STATE,EQUAL,COND,IGNORABLE,DECLARE,CURRENT-LITERAL,MAKE,RCNST,REWRITE-CONSTANT,CHANGE,POT-LST,?,STEP-LIMIT,REWRITE-STACK-LIMIT,PROOF-BUILDER,QUOTE,REWRITE,REWRITE-ENTRY,GSTACK,LET,REWRITE-FLG,TTREE,NEWTERM,SL-LET,MV,BACKCHAIN-LIMIT,WRLD,ENS,TYPE-ALIST,IFF-FLG,TERM,NORMALIZE,NORMALIZE-FLG,IF,OLD-TTREE,NTERM,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-REWRITE*-1">pc-rewrite*-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-rewrite_2A-1" data-sym="PC-REWRITE*-1" title="(defun pc-rewrite*-1
       (term type-alist geneqv iff-flg wrld rcnst old-ttree pot-lst
        normalize-flg rewrite-flg ens state repeat backchain-limit step-limit)
  (mv-let (nterm old-ttree)
          (if normalize-flg
...">pc-rewrite*-1</a>
  (term type-alist
    geneqv
    iff-flg
    wrld
    rcnst
    old-ttree
    pot-lst
    normalize-flg
    rewrite-flg
    ens
    state
    repeat
    <a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a>
    step-limit)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (nterm old-ttree)
    (if normalize-flg
      (normalize term
        iff-flg
        type-alist
        ens
        wrld
        old-ttree
        (<a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a> wrld <span class="keyword">:ts</span>))
      (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> term old-ttree))
    (<a class="sym-link system" href="rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (newterm ttree)
      (if rewrite-flg
        (let ((gstack nil))
          (<a class="sym-link system" href="rewrite.html#def-rewrite-entry" data-sym="REWRITE-ENTRY">rewrite-entry</a> (<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> nterm nil 'proof-builder)
            <span class="keyword">:pequiv-info</span> nil
            <span class="keyword">:rdepth</span> (<a class="sym-link system" href="axioms.html#def-rewrite-stack-limit" data-sym="REWRITE-STACK-LIMIT">rewrite-stack-limit</a> wrld)
            <span class="keyword">:step-limit</span> step-limit
            <span class="keyword">:obj</span> '<a class="sym-link local-def" href="#def-_3F" data-sym="?" title="(defmacro ? (x) `(?-fn &#39;,x))">?</a>
            <span class="keyword">:fnstack</span> nil
            <span class="keyword">:ancestors</span> nil
            <span class="keyword">:simplify-clause-pot-lst</span> pot-lst
            <span class="keyword">:rcnst</span> (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> rewrite-constant
              rcnst
              <span class="keyword">:current-literal</span> (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> current-literal <span class="keyword">:atm</span> nterm <span class="keyword">:not-flg</span> nil))
            <span class="keyword">:gstack</span> gstack
            <span class="keyword">:ttree</span> old-ttree))
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <span class="number">0</span> nterm old-ttree))
      (declare (ignorable step-limit))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((equal newterm nterm) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> step-limit newterm old-ttree state))
        ((<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> repeat <span class="number">0</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> step-limit newterm ttree state))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-pc-rewrite_2A-1" data-sym="PC-REWRITE*-1" title="(defun pc-rewrite*-1
       (term type-alist geneqv iff-flg wrld rcnst old-ttree pot-lst
        normalize-flg rewrite-flg ens state repeat backchain-limit step-limit)
  (mv-let (nterm old-ttree)
          (if normalize-flg
...">pc-rewrite*-1</a> newterm
            type-alist
            geneqv
            iff-flg
            wrld
            rcnst
            ttree
            pot-lst
            normalize-flg
            rewrite-flg
            ens
            state
            (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> repeat)
            <a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a>
            step-limit))))))</pre>
  </div>

<div class="form-block function" id="def-pc-rewrite_2A" data-defines="PC-REWRITE*" data-references="T,MV,EQL,COND,PC-REWRITE*-1,CATCH-STEP-LIMIT,TTREE,NEWTERM,SL-LET,STEP-LIMIT,BACKCHAIN-LIMIT,REPEAT,STATE,ENS,REWRITE-FLG,NORMALIZE-FLG,POT-LST,OLD-TTREE,RCNST,WRLD,IFF-FLG,GENEQV,TYPE-ALIST,TERM,DEFUN" data-part-name="PC-REWRITE*" data-part-args="STEP-LIMIT,BACKCHAIN-LIMIT,REPEAT,STATE,ENS,REWRITE-FLG,NORMALIZE-FLG,POT-LST,OLD-TTREE,RCNST,WRLD,IFF-FLG,GENEQV,TYPE-ALIST,TERM" data-part-body="T,MV,EQL,COND,STEP-LIMIT,BACKCHAIN-LIMIT,REPEAT,ENS,REWRITE-FLG,NORMALIZE-FLG,POT-LST,OLD-TTREE,RCNST,WRLD,IFF-FLG,GENEQV,TYPE-ALIST,TERM,PC-REWRITE*-1,CATCH-STEP-LIMIT,STATE,TTREE,NEWTERM,SL-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-REWRITE*">pc-rewrite*</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-rewrite_2A" data-sym="PC-REWRITE*" title="(defun pc-rewrite*
       (term type-alist geneqv iff-flg wrld rcnst old-ttree pot-lst
        normalize-flg rewrite-flg ens state repeat backchain-limit step-limit)
  (sl-let (newterm ttree state)
          (catch-step-limit
...">pc-rewrite*</a>
  (term type-alist
    geneqv
    iff-flg
    wrld
    rcnst
    old-ttree
    pot-lst
    normalize-flg
    rewrite-flg
    ens
    state
    repeat
    <a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a>
    step-limit)
  (<a class="sym-link system" href="rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (newterm ttree state)
    (<a class="sym-link system" href="axioms.html#def-catch-step-limit" data-sym="CATCH-STEP-LIMIT">catch-step-limit</a> (<a class="sym-link local-def" href="#def-pc-rewrite_2A-1" data-sym="PC-REWRITE*-1" title="(defun pc-rewrite*-1
       (term type-alist geneqv iff-flg wrld rcnst old-ttree pot-lst
        normalize-flg rewrite-flg ens state repeat backchain-limit step-limit)
  (mv-let (nterm old-ttree)
          (if normalize-flg
...">pc-rewrite*-1</a> term
        type-alist
        geneqv
        iff-flg
        wrld
        rcnst
        old-ttree
        pot-lst
        normalize-flg
        rewrite-flg
        ens
        state
        repeat
        <a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a>
        step-limit))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> step-limit <span class="number">-1</span>) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> step-limit term old-ttree state))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> step-limit newterm ttree state)))))</pre>
  </div>

<div class="form-block function" id="def-make-goals-from-assumptions" data-defines="MAKE-GOALS-FROM-ASSUMPTIONS" data-references="1+,CDR,CAR,DUMB-NEGATE-LIT,GOAL,MAKE,CONS,IF,START-INDEX,GOAL-NAME,CURRENT-ADDR,HYPS,CONC,ASSUMPTIONS,DEFUN" data-used-by="MAKE-NEW-GOALS-FROM-ASSUMPTIONS" data-part-name="MAKE-GOALS-FROM-ASSUMPTIONS" data-part-args="START-INDEX,GOAL-NAME,CURRENT-ADDR,HYPS,CONC,ASSUMPTIONS" data-part-body="1+,CDR,MAKE-GOALS-FROM-ASSUMPTIONS,START-INDEX,GOAL-NAME,CURRENT-ADDR,HYPS,CAR,DUMB-NEGATE-LIT,CONC,GOAL,MAKE,CONS,ASSUMPTIONS,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-GOALS-FROM-ASSUMPTIONS">make-goals-from-assumptions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-goals-from-assumptions" data-sym="MAKE-GOALS-FROM-ASSUMPTIONS" title="(defun make-goals-from-assumptions
       (assumptions conc hyps current-addr goal-name start-index)
  (if assumptions
      (cons
       (make goal :conc conc :hyps
...">make-goals-from-assumptions</a>
  (assumptions conc hyps current-addr goal-name start-index)
  (if assumptions
    (cons (<a class="sym-link system" href="basis-a.html#def-make" data-sym="MAKE">make</a> goal
        <span class="keyword">:conc</span> conc
        <span class="keyword">:hyps</span> (cons (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> (car assumptions)) hyps)
        <span class="keyword">:current-addr</span> current-addr
        <span class="keyword">:goal-name</span> (cons goal-name start-index)
        <span class="keyword">:depends-on</span> <span class="number">1</span>)
      (<a class="sym-link local-def" href="#def-make-goals-from-assumptions" data-sym="MAKE-GOALS-FROM-ASSUMPTIONS" title="(defun make-goals-from-assumptions
       (assumptions conc hyps current-addr goal-name start-index)
  (if assumptions
      (cons
       (make goal :conc conc :hyps
...">make-goals-from-assumptions</a> (cdr assumptions)
        conc
        hyps
        current-addr
        goal-name
        (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> start-index)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-make-new-goals-from-assumptions" data-defines="MAKE-NEW-GOALS-FROM-ASSUMPTIONS" data-references="ACCESS,MAKE-GOALS-FROM-ASSUMPTIONS,AND,GOAL,ASSUMPTIONS,DEFUN" data-part-name="MAKE-NEW-GOALS-FROM-ASSUMPTIONS" data-part-args="GOAL,ASSUMPTIONS" data-part-body="GOAL,ACCESS,MAKE-GOALS-FROM-ASSUMPTIONS,ASSUMPTIONS,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="MAKE-NEW-GOALS-FROM-ASSUMPTIONS">make-new-goals-from-assumptions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-make-new-goals-from-assumptions" data-sym="MAKE-NEW-GOALS-FROM-ASSUMPTIONS" title="(defun make-new-goals-from-assumptions (assumptions goal)
  (and assumptions
       (make-goals-from-assumptions assumptions (access goal goal :conc)
                                    (access goal goal :hyps)
                                    (access goal goal :current-addr)
...">make-new-goals-from-assumptions</a>
  (assumptions goal)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> assumptions
    (<a class="sym-link local-def" href="#def-make-goals-from-assumptions" data-sym="MAKE-GOALS-FROM-ASSUMPTIONS" title="(defun make-goals-from-assumptions
       (assumptions conc hyps current-addr goal-name start-index)
  (if assumptions
      (cons
       (make goal :conc conc :hyps
...">make-goals-from-assumptions</a> assumptions
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:conc</span>)
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:hyps</span>)
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:current-addr</span>)
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:goal-name</span>)
      (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:depends-on</span>))))</pre>
  </div>

<div class="form-block constant" id="def-_2Adefault-s-repeat-limit_2A" data-defines="*DEFAULT-S-REPEAT-LIMIT*" data-references="DEFCONST" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="*DEFAULT-S-REPEAT-LIMIT*">*default-s-repeat-limit*</span><span class="form-type">constant</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defconst" data-sym="DEFCONST">defconst</a> <a class="sym-link local-def" href="#def-_2Adefault-s-repeat-limit_2A" data-sym="*DEFAULT-S-REPEAT-LIMIT*" title="(defconst *default-s-repeat-limit* 10)">*default-s-repeat-limit*</a> <span class="number">10</span>)</pre>
  </div>

<div class="form-block function" id="def-hyps-type-alist-and-pot-lst" data-defines="HYPS-TYPE-ALIST-AND-POT-LST" data-references="POLY,ACCESS,*FAKE-RUNE-FOR-LINEAR*,PUSH-LEMMA,IGNORE,DECLARE,*DEFAULT-STEP-LIMIT*,DUMB-NEGATE-LIT-LST,SETUP-SIMPLIFY-CLAUSE-POT-LST,POT-LST,CONTRADICTIONP,STEP-LIMIT,T,MV,NOT,OR,COND,HYPS-TYPE-ALIST,TTREE-OR-FC-PAIR-LST,TYPE-ALIST,FLG,MV-LET,STATE,WRLD,ENS,RCNST,ASSUMPTIONS,DEFUN" data-part-name="HYPS-TYPE-ALIST-AND-POT-LST" data-part-args="STATE,WRLD,ENS,RCNST,ASSUMPTIONS" data-part-body="POLY,ACCESS,*FAKE-RUNE-FOR-LINEAR*,PUSH-LEMMA,IGNORE,DECLARE,*DEFAULT-STEP-LIMIT*,DUMB-NEGATE-LIT-LST,SETUP-SIMPLIFY-CLAUSE-POT-LST,POT-LST,CONTRADICTIONP,STEP-LIMIT,T,MV,RCNST,NOT,OR,COND,STATE,WRLD,ENS,ASSUMPTIONS,HYPS-TYPE-ALIST,TTREE-OR-FC-PAIR-LST,TYPE-ALIST,FLG,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="HYPS-TYPE-ALIST-AND-POT-LST">hyps-type-alist-and-pot-lst</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-hyps-type-alist-and-pot-lst" data-sym="HYPS-TYPE-ALIST-AND-POT-LST" title="(defun hyps-type-alist-and-pot-lst (assumptions rcnst ens wrld state)
  (mv-let (flg type-alist ttree-or-fc-pair-lst)
          (hyps-type-alist assumptions ens wrld state)
          (cond
           ((or (not rcnst) flg) (mv flg type-alist nil ttree-or-fc-pair-lst))
...">hyps-type-alist-and-pot-lst</a>
  (assumptions rcnst ens wrld state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg type-alist ttree-or-fc-pair-lst)
    (hyps-type-alist assumptions ens wrld state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> rcnst) flg) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> flg type-alist nil ttree-or-fc-pair-lst))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (step-limit contradictionp pot-lst)
          (setup-simplify-clause-pot-lst (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> assumptions)
            nil
            ttree-or-fc-pair-lst
            type-alist
            rcnst
            wrld
            state
            <a class="sym-link system" href="axioms.html#def-_2Adefault-step-limit_2A" data-sym="*DEFAULT-STEP-LIMIT*">*default-step-limit*</a>)
          (declare (ignore step-limit))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (contradictionp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                nil
                nil
                (push-lemma <a class="sym-link system" href="rewrite.html#def-_2Afake-rune-for-linear_2A" data-sym="*FAKE-RUNE-FOR-LINEAR*">*fake-rune-for-linear*</a>
                  (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> poly contradictionp <span class="keyword">:ttree</span>))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil type-alist pot-lst ttree-or-fc-pair-lst))))))))</pre>
  </div>

<div class="form-block other" id="form-181" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> s
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-keyword-value-listp" data-sym="KEYWORD-VALUE-LISTP">keyword-value-listp</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)) (print-no-change2 <span class="string">"The argument list to S must be a KEYWORD-VALUE-LISTP, i.e. a list of ~
      the form (:kw-1 val-1 ... :kw-n val-n), where each of the arguments ~
      :kw-i is a keyword.  Your argument list ~x0 does not have this ~
      property.  Try (HELP S)."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((comm (make-official-pc-command 's)) (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
          (current-term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr))
          (assumptions (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> hyps
              (flatten-ands-in-lit-lst (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr)))))
        (let ((pc-ens (make-pc-ens pc-ens state)))
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (bcl-alist rst)
            (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> '(<span class="keyword">:backchain-limit</span> <span class="keyword">:normalize</span> <span class="keyword">:rewrite</span> <span class="keyword">:repeat</span>)
              <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((local-backchain-limit (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:backchain-limit</span> bcl-alist)) <span class="number">0</span>)) (normalize (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:normalize</span> bcl-alist)))
                    (if pair
                      (cdr pair)
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                (<a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:rewrite</span> bcl-alist)))
                    (if pair
                      (cdr pair)
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))
                (linear (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:linear</span> bcl-alist)))
                    (if pair
                      (cdr pair)
                      <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>)))
                (repeat (let ((pair (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:repeat</span> bcl-alist)))
                    (if pair
                      (if (equal (cdr pair) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                        <a class="sym-link local-def" href="#def-_2Adefault-s-repeat-limit_2A" data-sym="*DEFAULT-S-REPEAT-LIMIT*" title="(defconst *default-s-repeat-limit* 10)">*default-s-repeat-limit*</a>
                        (cdr pair))
                      <span class="number">0</span>))))
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> repeat)) (print-no-change2 <span class="string">"The :REPEAT argument provided to S (or a command that invoked ~
                S), which was ~x0, is illegal. ~ It must be T or a natural ~
                number."</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 repeat))))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-natp" data-sym="NATP">natp</a> local-backchain-limit)) (print-no-change2 <span class="string">"The :BACKCHAIN-LIMIT argument provided to S (or a command ~
                that invoked S), which was ~x0, is illegal.  It must be NIL ~
                or a natural number."</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 local-backchain-limit))))
                ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> normalize <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>)) (print-no-change2 <span class="string">"You may not specify in the S command that ~
                                 neither IF normalization nor rewriting is to ~
                                 take place."</span>))
                ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>)
                   (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:backchain-limit</span> bcl-alist)
                     (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:repeat</span> bcl-alist)
                     rst)) (print-no-change2 <span class="string">"When the :REWRITE NIL option is specified, ~
                                 it is not allowed to provide arguments other ~
                                 than :NORMALIZE T.  The argument list ~x0 ~
                                 violates this requirement."</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (key-alist new-rst)
                    (<a class="sym-link local-def" href="#def-pair-keywords" data-sym="PAIR-KEYWORDS" title="(defun pair-keywords (keywords lst)
  (declare
   (xargs :guard (and (keyword-listp keywords) (keyword-value-listp lst))))
  (if (consp keywords)
      (mv-let (alist rst) (pair-keywords (cdr keywords) lst)
...">pair-keywords</a> '(<span class="keyword">:in-theory</span> <span class="keyword">:hands-off</span> <span class="keyword">:expand</span>) rst)
                    (declare (ignore key-alist))
                    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (new-rst (print-no-change2 <span class="string">"The arguments to the S command must all be &amp;KEY ~
                    arguments, which should be among ~&amp;0.  Your argument list ~
                    ~x1 violates this requirement."</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                              '(<span class="keyword">:rewrite</span> <span class="keyword">:normalize</span> <span class="keyword">:backchain-limit</span> <span class="keyword">:repeat</span> <span class="keyword">:in-theory</span> <span class="keyword">:hands-off</span> <span class="keyword">:expand</span>))
                            (cons #\1 <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp hint-settings state)
                          (translate-hint-settings comm
                            <span class="string">"Goal"</span>
                            rst
                            (if <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
                              (cons comm (car <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>))
                              comm)
                            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                            state)
                          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (print-no-change2 <span class="string">"S failed."</span>))
                            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((base-rcnst (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a> (make-rcnst pc-ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state <span class="keyword">:force-info</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
                                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg hyps-type-alist pot-lst ttree)
                                  (<a class="sym-link local-def" href="#def-hyps-type-alist-and-pot-lst" data-sym="HYPS-TYPE-ALIST-AND-POT-LST" title="(defun hyps-type-alist-and-pot-lst (assumptions rcnst ens wrld state)
  (mv-let (flg type-alist ttree-or-fc-pair-lst)
          (hyps-type-alist assumptions ens wrld state)
          (cond
           ((or (not rcnst) flg) (mv flg type-alist nil ttree-or-fc-pair-lst))
...">hyps-type-alist-and-pot-lst</a> assumptions
                                    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> linear base-rcnst)
                                    pc-ens
                                    <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                                    state)
                                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (flg (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> current-addr)
                                           (equal assumptions hyps)
                                           (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg hyps-type-alist ttree)
                                             (hyps-type-alist hyps pc-ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)
                                             (declare (ignore hyps-type-alist ttree))
                                             flg)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                              nil
                                              state
                                              nil
                                              (fms0 <span class="string">"~|Goal proved:  Contradiction in ~
                                           the hypotheses!~|"</span>))
                                            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                                                <span class="keyword">:goals</span> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((tagged-objects 'assumption ttree) (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal (car goals) <span class="keyword">:conc</span> <a class="sym-link system" href="axioms.html#def-_2At_2A" data-sym="*T*">*t*</a>) (cdr goals)))
                                                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (cdr goals)))
                                                <span class="keyword">:local-tag-tree</span> ttree)
                                              state)))
                                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (print-no-change2 <span class="string">"A contradiction was found in the current ~
                                context using both the top-level hypotheses ~
                                and the IF tests governing the current term, ~
                                but not using the top-level hypotheses alone. ~
                                ~ You may want to issue the TOP command and ~
                                then issue s-prop to prune some branches of ~
                                the conclusion."</span>))))
                                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp local-rcnst state)
                                        (if <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
                                          (load-hint-settings-into-rcnst hint-settings
                                            base-rcnst
                                            nil
                                            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                                            's
                                            state)
                                          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
                                        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (if erp
                                            (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                                              nil
                                              state
                                              nil
                                              (fms0 <span class="string">"~|Note: Ignoring the above ~
                                               theory invariant error.  ~
                                               Proceeding...~|"</span>))
                                            state)
                                          (if <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
                                            (maybe-warn-about-theory-from-rcnsts base-rcnst
                                              local-rcnst
                                              <span class="keyword">:s</span> pc-ens
                                              <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                                              state)
                                            state)
                                          (<a class="sym-link system" href="rewrite.html#def-sl-let" data-sym="SL-LET">sl-let</a> (new-term new-ttree state)
                                            (<a class="sym-link local-def" href="#def-pc-rewrite_2A" data-sym="PC-REWRITE*" title="(defun pc-rewrite*
       (term type-alist geneqv iff-flg wrld rcnst old-ttree pot-lst
        normalize-flg rewrite-flg ens state repeat backchain-limit step-limit)
  (sl-let (newterm ttree state)
          (catch-step-limit
...">pc-rewrite*</a> current-term
                                              hyps-type-alist
                                              (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> conc current-addr pc-ens <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                                              (<a class="sym-link local-def" href="#def-term-id-iff" data-sym="TERM-ID-IFF" title="(defun term-id-iff (term address iff-flg)
  (if (null address)
      iff-flg
      (term-id-iff (nth (car address) term) (cdr address)
                   (cond
...">term-id-iff</a> conc current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                                              <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                                              local-rcnst
                                              nil
                                              pot-lst
                                              normalize
                                              <a class="sym-link system" href="rewrite.html#def-rewrite" data-sym="REWRITE">rewrite</a>
                                              pc-ens
                                              state
                                              repeat
                                              local-backchain-limit
                                              (<a class="sym-link system" href="rewrite.html#def-initial-step-limit" data-sym="INITIAL-STEP-LIMIT">initial-step-limit</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
                                            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-f-put-global" data-sym="F-PUT-GLOBAL">f-put-global</a> 'last-step-limit step-limit state)
                                              (if (equal new-term current-term)
                                                (print-no-change2 <span class="string">"No simplification took place."</span>)
                                                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-goal state)
                                                    (<a class="sym-link local-def" href="#def-deposit-term-in-goal" data-sym="DEPOSIT-TERM-IN-GOAL" title="(defun deposit-term-in-goal (given-goal conc current-addr new-term state)
  (let ((new-conc (deposit-term conc current-addr new-term)))
    (if (quotep new-term)
        (mv-let (new-current-addr state)
                (maybe-truncate-current-address current-addr new-conc
...">deposit-term-in-goal</a> (car goals)
                                                      conc
                                                      current-addr
                                                      new-term
                                                      state)
                                                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                                                        <span class="keyword">:goals</span> (cons new-goal (cdr goals))
                                                        <span class="keyword">:local-tag-tree</span> new-ttree)
                                                      state)))))))))))))))))))))))))))</pre>
  </div>

<div class="form-block function" id="def-build-pc-enabled-structure-from-ens" data-defines="BUILD-PC-ENABLED-STRUCTURE-FROM-ENS" data-references="CDR,DEFAULT,MAXIMUM-LENGTH,DIMENSIONS,LIST,CONS,CHANGE,OLD-ALIST,ENABLED-STRUCTURE,ACCESS,OLD-NAME,STRING,EXPLODE-NONNEGATIVE-INTEGER,APPEND,COERCE,INTERN,NEW-NAME,QUOTE,NEW-NAME-ROOT,LET*,ENS,NEW-SUFFIX,DEFUN" data-part-name="BUILD-PC-ENABLED-STRUCTURE-FROM-ENS" data-part-args="ENS,NEW-SUFFIX" data-part-body="CDR,DEFAULT,MAXIMUM-LENGTH,DIMENSIONS,LIST,CONS,CHANGE,OLD-ALIST,ENS,ENABLED-STRUCTURE,ACCESS,OLD-NAME,STRING,NEW-SUFFIX,EXPLODE-NONNEGATIVE-INTEGER,APPEND,COERCE,INTERN,NEW-NAME,QUOTE,NEW-NAME-ROOT,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="BUILD-PC-ENABLED-STRUCTURE-FROM-ENS">build-pc-enabled-structure-from-ens</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-build-pc-enabled-structure-from-ens" data-sym="BUILD-PC-ENABLED-STRUCTURE-FROM-ENS" title="(defun build-pc-enabled-structure-from-ens (new-suffix ens)
  (let* ((new-name-root
          &#39;(#\P #\C #\- #\E #\N #\A #\B #\L #\E #\D #\- #\A #\R #\R #\A #\Y
            #\-))
         (new-name
...">build-pc-enabled-structure-from-ens</a>
  (new-suffix ens)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-name-root '(#\P #\C
         #\-
         #\E
         #\N
         #\A
         #\B
         #\L
         #\E
         #\D
         #\-
         #\A
         #\R
         #\R
         #\A
         #\Y
         #\-)) (new-name (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (coerce (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-name-root
              (<a class="sym-link system" href="axioms.html#def-explode-nonnegative-integer" data-sym="EXPLODE-NONNEGATIVE-INTEGER">explode-nonnegative-integer</a> new-suffix <span class="number">10</span> nil))
            '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>)
          <span class="string">"ACL2"</span>))
      (old-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> enabled-structure ens <span class="keyword">:array-name</span>))
      (old-alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> enabled-structure ens <span class="keyword">:theory-array</span>)))
    (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> enabled-structure
      ens
      <span class="keyword">:theory-array</span> (cons (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:header</span> <span class="keyword">:dimensions</span> (<a class="sym-link system" href="axioms.html#def-dimensions" data-sym="DIMENSIONS">dimensions</a> old-name old-alist)
          <span class="keyword">:maximum-length</span> (<a class="sym-link system" href="axioms.html#def-maximum-length" data-sym="MAXIMUM-LENGTH">maximum-length</a> old-name old-alist)
          <span class="keyword">:default</span> (<a class="sym-link system" href="axioms.html#def-default" data-sym="DEFAULT">default</a> old-name old-alist)
          <span class="keyword">:name</span> new-name)
        (cdr old-alist))
      <span class="keyword">:array-name</span> new-name
      <span class="keyword">:array-length</span> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> enabled-structure ens <span class="keyword">:array-length</span>)
      <span class="keyword">:array-name-root</span> new-name-root
      <span class="keyword">:array-name-suffix</span> new-suffix)))</pre>
  </div>

<div class="form-block other" id="form-183" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> <a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
  (&amp;optional theory-expr)
  (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (ens (ens state)))
    (if <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp hint-setting state)
        (<a class="sym-link system" href="history-management.html#def-translate-in-theory-hint" data-sym="TRANSLATE-IN-THEORY-HINT">translate-in-theory-hint</a> theory-expr
          <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          '<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
          <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
          state)
        (if erp
          (print-no-change2 <span class="string">"bad theory expression."</span>)
          (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((new-suffix (pc-value next-pc-enabled-array-suffix)) (new-pc-ens1 (<a class="sym-link local-def" href="#def-build-pc-enabled-structure-from-ens" data-sym="BUILD-PC-ENABLED-STRUCTURE-FROM-ENS" title="(defun build-pc-enabled-structure-from-ens (new-suffix ens)
  (let* ((new-name-root
          &#39;(#\P #\C #\- #\E #\N #\A #\B #\L #\E #\D #\- #\A #\R #\R #\A #\Y
            #\-))
         (new-name
...">build-pc-enabled-structure-from-ens</a> new-suffix ens)))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp new-pc-ens2 state)
              (load-theory-into-enabled-structure theory-expr
                hint-setting
                nil
                new-pc-ens1
                nil
                nil
                <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                '<a class="sym-link system" href="axioms.html#def-in-theory" data-sym="IN-THEORY">in-theory</a>
                state)
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (print-no-change2 <span class="string">"bad theory expression."</span>))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (pc-assign next-pc-enabled-array-suffix (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> new-suffix))
                    (maybe-warn-about-theory-simple ens
                      new-pc-ens2
                      <span class="keyword">:in-theory</span> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
                      state)
                    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state <span class="keyword">:pc-ens</span> new-pc-ens2) state))))))))
      (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pc-ens)
        (print-no-change2 <span class="string">"The proof-builder enabled/disabled state is ~
                             already set to agree with the global state, so ~
                             your IN-THEORY command is redundant."</span>)
        (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state <span class="keyword">:pc-ens</span> nil) state)))))</pre>
  </div>

<div class="form-block other" id="form-184" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> s-prop
  (&amp;rest names)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(s <span class="keyword">:in-theory</span> ,(IF NAMES
     `(UNION-THEORIES &#39;,NAMES (THEORY &#39;MINIMAL-THEORY))
     &#39;(THEORY &#39;MINIMAL-THEORY)))))</pre>
  </div>

<div class="form-block other" id="form-185" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> x
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-strict (expand <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (succeed (s ,@ARGS)))))</pre>
  </div>

<div class="form-block other" id="form-186" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> expand
  (&amp;optional do-not-expand-lambda-flg)
  (let ((<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)) (term (<a class="sym-link local-def" href="#def-fetch-term" data-sym="FETCH-TERM" title="(defun fetch-term (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil)
          (if (eq cl t)
              (er hard &#39;fetch-term
                  &quot;FETCH-TERM-AND-CL did not find a subterm of ~x0 at address ~x1.&quot;
...">fetch-term</a> conc current-addr)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> term) (<a class="sym-link system" href="axioms.html#def-fquotep" data-sym="FQUOTEP">fquotep</a> term)) (print-no-change2 <span class="string">"It is impossible to expand a variable or a constant."</span>))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> do-not-expand-lambda-flg (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term))) (print-no-change2 <span class="string">"Expansion of lambda terms is disabled when do-not-expand-lambda-flg = ~
        t; see :DOC acl2-pc::expand."</span>))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((fn (<a class="sym-link system" href="axioms.html#def-ffn-symb" data-sym="FFN-SYMB">ffn-symb</a> term)) (<a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> fn)) (<a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> fn <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)))
            (<a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <span class="keyword">:formals</span>)))
            (equiv (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <span class="keyword">:equiv</span>)))
            (<a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a> (if (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> fn)
                (<a class="sym-link system" href="basis-b.html#def-lambda-body" data-sym="LAMBDA-BODY">lambda-body</a> fn)
                (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a>
                  (<a class="sym-link system" href="basis-b.html#def-latest-body" data-sym="LATEST-BODY">latest-body</a> (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> fn <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <span class="keyword">:hyp</span>)
                    (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <span class="keyword">:concl</span>))))))
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> fn))
                (print-no-change2 <span class="string">"Expansion failed.  Apparently function ~x0 is ~
                     constrained, not defined."</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 fn)))))
            ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> equiv 'equal))
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> fn))
               (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="rewrite.html#def-geneqv-refinementp" data-sym="GENEQV-REFINEMENTP">geneqv-refinementp</a> equiv
                   (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> conc
                     current-addr
                     (make-pc-ens pc-ens state)
                     <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                   <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>))) (print-no-change2 <span class="string">"Expansion failed: the equivalence relation for the definition ~
            rule ~x0 is ~x1, which is not sufficient to maintain in the ~
            current context."</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (base-symbol (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <span class="keyword">:rune</span>)))
                  (cons #\1 equiv))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((new-term (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (do-not-expand-lambda-flg (<a class="sym-link system" href="basis-b.html#def-fcons-term" data-sym="FCONS-TERM">fcons-term</a> (<a class="sym-link system" href="basis-b.html#def-make-lambda" data-sym="MAKE-LAMBDA">make-lambda</a> <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a> <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>) (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)))
                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-subcor-var" data-sym="SUBCOR-VAR">subcor-var</a> (if (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> fn)
                           (<a class="sym-link system" href="basis-b.html#def-lambda-formals" data-sym="LAMBDA-FORMALS">lambda-formals</a> fn)
                           <a class="sym-link system" href="basis-b.html#def-formals" data-sym="FORMALS">formals</a>)
                         (<a class="sym-link system" href="axioms.html#def-fargs" data-sym="FARGS">fargs</a> term)
                         <a class="sym-link system" href="basis-b.html#def-body" data-sym="BODY">body</a>)))))
                (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (new-goal state)
                  (<a class="sym-link local-def" href="#def-deposit-term-in-goal" data-sym="DEPOSIT-TERM-IN-GOAL" title="(defun deposit-term-in-goal (given-goal conc current-addr new-term state)
  (let ((new-conc (deposit-term conc current-addr new-term)))
    (if (quotep new-term)
        (mv-let (new-current-addr state)
                (maybe-truncate-current-address current-addr new-conc
...">deposit-term-in-goal</a> (car goals)
                    conc
                    current-addr
                    new-term
                    state)
                  (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                      <span class="keyword">:goals</span> (cons new-goal (cdr goals))
                      <span class="keyword">:local-tag-tree</span> (if (<a class="sym-link system" href="basis-b.html#def-flambdap" data-sym="FLAMBDAP">flambdap</a> fn)
                        nil
                        (push-lemma? (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <a class="sym-link system" href="basis-b.html#def-def-body" data-sym="DEF-BODY">def-body</a> <span class="keyword">:rune</span>) nil)))
                    state))))))))))</pre>
  </div>

<div class="form-block other" id="form-187" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> x-dumb nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(expand <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-188" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> bookmark
  (tag &amp;rest instr-list)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-all (<a class="sym-link system" href="rewrite.html#def-comment" data-sym="COMMENT">comment</a> <span class="keyword">:begin</span> ,TAG)
      ,@INSTR-LIST
      (<a class="sym-link system" href="rewrite.html#def-comment" data-sym="COMMENT">comment</a> <span class="keyword">:end</span> ,TAG))))</pre>
  </div>

<div class="form-block function" id="def-change-last" data-defines="CHANGE-LAST" data-references="LIST,CAR,CONS,CDR,CONSP,IF,VAL,LST,DEFUN" data-used-by="ASSIGN-EVENT-NAME-AND-RULE-CLASSES" data-part-name="CHANGE-LAST" data-part-args="VAL,LST" data-part-body="LIST,VAL,CHANGE-LAST,CAR,CONS,CDR,LST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="CHANGE-LAST">change-last</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-change-last" data-sym="CHANGE-LAST" title="(defun change-last (lst val)
  (if (consp lst)
      (if (consp (cdr lst))
          (cons (car lst) (change-last (cdr lst) val))
          (list val))">change-last</a>
  (lst val)
  (if (consp lst)
    (if (consp (cdr lst))
      (cons (car lst) (<a class="sym-link local-def" href="#def-change-last" data-sym="CHANGE-LAST" title="(defun change-last (lst val)
  (if (consp lst)
      (if (consp (cdr lst))
          (cons (car lst) (change-last (cdr lst) val))
          (list val))">change-last</a> (cdr lst) val))
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> val))
    lst))</pre>
  </div>

<div class="form-block function" id="def-assign-event-name-and-rule-classes" data-defines="ASSIGN-EVENT-NAME-AND-RULE-CLASSES" data-references="OR,LIST,LAST,PC-STATE,CHANGE,CHANGE-LAST,PC-ASSIGN,CADDR,OLD-RAW-TERM,CADR,OLD-RULE-CLASSES,CAR,OLD-EVENT-NAME,EVENT-NAME-AND-TYPES-AND-RAW-TERM,TRIPLE,STATE-STACK,LET*,STATE,RULE-CLASSES,EVENT-NAME,DEFUN" data-used-by="SAVE-FN" data-part-name="ASSIGN-EVENT-NAME-AND-RULE-CLASSES" data-part-args="STATE,RULE-CLASSES,EVENT-NAME" data-part-body="RULE-CLASSES,EVENT-NAME,OR,LIST,LAST,PC-STATE,CHANGE,CHANGE-LAST,PC-ASSIGN,CADDR,OLD-RAW-TERM,CADR,OLD-RULE-CLASSES,CAR,OLD-EVENT-NAME,EVENT-NAME-AND-TYPES-AND-RAW-TERM,TRIPLE,STATE-STACK,LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ASSIGN-EVENT-NAME-AND-RULE-CLASSES">assign-event-name-and-rule-classes</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-assign-event-name-and-rule-classes" data-sym="ASSIGN-EVENT-NAME-AND-RULE-CLASSES" title="(defun assign-event-name-and-rule-classes (event-name rule-classes state)
  (let* ((state-stack (state-stack))
         (triple (event-name-and-types-and-raw-term state-stack))
         (old-event-name (car triple))
         (old-rule-classes (cadr triple))
...">assign-event-name-and-rule-classes</a>
  (event-name rule-classes state)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((state-stack (state-stack)) (triple (event-name-and-types-and-raw-term state-stack))
      (old-event-name (car triple))
      (old-rule-classes (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> triple))
      (old-raw-term (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> triple)))
    (pc-assign state-stack
      (<a class="sym-link local-def" href="#def-change-last" data-sym="CHANGE-LAST" title="(defun change-last (lst val)
  (if (consp lst)
      (if (consp (cdr lst))
          (cons (car lst) (change-last (cdr lst) val))
          (list val))">change-last</a> state-stack
        (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> pc-state
          (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> state-stack))
          <span class="keyword">:instruction</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:start</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> event-name old-event-name)
              (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> rule-classes old-rule-classes)
              old-raw-term)))))))</pre>
  </div>

<div class="form-block function" id="def-save-fn" data-defines="SAVE-FN" data-references="OLD-SS,STATE-STACK,CONS,PUT-ASSOC-EQ,PC-ASSIGN,ASSIGN-EVENT-NAME-AND-RULE-CLASSES,PPROGN,STATE,SS-ALIST,NAME,DEFUN" data-used-by="PROOF-BUILDER-CL-PROC-1" data-part-name="SAVE-FN" data-part-args="STATE,SS-ALIST,NAME" data-part-body="OLD-SS,STATE-STACK,CONS,PUT-ASSOC-EQ,SS-ALIST,PC-ASSIGN,STATE,NAME,ASSIGN-EVENT-NAME-AND-RULE-CLASSES,PPROGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-FN">save-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-save-fn" data-sym="SAVE-FN" title="(defun save-fn (name ss-alist state)
  (pprogn (assign-event-name-and-rule-classes name nil state)
          (pc-assign ss-alist
                     (put-assoc-eq name (cons (state-stack) (old-ss))
                                   ss-alist))))">save-fn</a>
  (name ss-alist state)
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-assign-event-name-and-rule-classes" data-sym="ASSIGN-EVENT-NAME-AND-RULE-CLASSES" title="(defun assign-event-name-and-rule-classes (event-name rule-classes state)
  (let* ((state-stack (state-stack))
         (triple (event-name-and-types-and-raw-term state-stack))
         (old-event-name (car triple))
         (old-rule-classes (cadr triple))
...">assign-event-name-and-rule-classes</a> name nil state)
    (pc-assign ss-alist
      (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> name (cons (state-stack) (old-ss)) ss-alist))))</pre>
  </div>

<div class="form-block other" id="form-192" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> save
  (&amp;optional name do-it-flg)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp name)) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The first argument supplied to ~x0 must be a symbol, but ~x1 is not a ~
       symbol.~@2"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 <span class="keyword">:save</span>)
            (cons #\1 name)
            (cons #\2
              (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp name)
                   (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car name) 'quote)
                   (consp (cdr name))
                   (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> name))
                   (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> name))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Perhaps you intended to submit the form ~x0."</span>
                    `(<span class="keyword">:save</span> ,(CADR NAME) ,@(AND DO-IT-FLG (LIST DO-IT-FLG)))))
                (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>)))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name
             (car (event-name-and-types-and-raw-term state-stack)))) (ss-alist (ss-alist)))
        (if name
          (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp reply state)
            (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name ss-alist) (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> do-it-flg))
              (<a class="sym-link system" href="rewrite.html#def-acl2-query" data-sym="ACL2-QUERY">acl2-query</a> 'save
                '(<span class="string">"The name ~x0 is already associated with a ~
                              state-stack.  Do you really want to overwrite ~
                              that existing value?"</span> <span class="keyword">:y</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                  <span class="keyword">:n</span> nil)
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name))
                state)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> nil <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
            (declare (ignore erp))
            (if reply
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-save-fn" data-sym="SAVE-FN" title="(defun save-fn (name ss-alist state)
  (pprogn (assign-event-name-and-rule-classes name nil state)
          (pc-assign ss-alist
                     (put-assoc-eq name (cons (state-stack) (old-ss))
                                   ss-alist))))">save-fn</a> name ss-alist state) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:succeed</span>))
              (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"save aborted."</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"You can&#39;t SAVE with no argument, because you didn&#39;t ~
                  originally enter VERIFY using an event name.  Try (SAVE ~
                  &lt;event_name&gt;) instead."</span>)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))))))</pre>
  </div>

<div class="form-block macro" id="def-retrieve" data-defines="RETRIEVE" data-references="STATE,QUOTE,RETRIEVE-FN,QUASIQUOTE,NAME,&OPTIONAL,DEFMACRO" data-used-by="PROOF-BUILDER-CL-PROC-1,RETRIEVE-FN" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETRIEVE">retrieve</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a>
  (&amp;optional name)
  `(<a class="sym-link local-def" href="#def-retrieve-fn" data-sym="RETRIEVE-FN" title="(defun retrieve-fn (name state)
  (let ((ss-alist (ss-alist)))
    (cond
     ((f-get-global &#39;in-verify-flg state)
      (er soft &#39;retrieve
...">retrieve-fn</a> ',NAME state))</pre>
  </div>

<div class="form-block other" id="form-194" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> <a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a>
  nil
  (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"RETRIEVE can only be used outside the ~
                            interactive loop.  Please exit first.  To ~
                            save your state upon exit, use EX rather than EXIT."</span>)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))</pre>
  </div>

<div class="form-block function" id="def-unsave-fn" data-defines="UNSAVE-FN" data-references="REMOVE1-ASSOC-EQ,SS-ALIST,PC-ASSIGN,STATE,NAME,DEFUN" data-used-by="UNSAVE" data-part-name="UNSAVE-FN" data-part-args="STATE,NAME" data-part-body="NAME,REMOVE1-ASSOC-EQ,SS-ALIST,PC-ASSIGN" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNSAVE-FN">unsave-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-unsave-fn" data-sym="UNSAVE-FN" title="(defun unsave-fn (name state)
  (pc-assign ss-alist (remove1-assoc-eq name (ss-alist))))">unsave-fn</a>
  (name state)
  (pc-assign ss-alist (<a class="sym-link system" href="axioms.html#def-remove1-assoc-eq" data-sym="REMOVE1-ASSOC-EQ">remove1-assoc-eq</a> name (ss-alist))))</pre>
  </div>

<div class="form-block macro" id="def-unsave" data-defines="UNSAVE" data-references="STATE,QUOTE,UNSAVE-FN,QUASIQUOTE,NAME,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="UNSAVE">unsave</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-unsave" data-sym="UNSAVE" title="(defmacro unsave (name) `(unsave-fn &#39;,name state))">unsave</a> (name) `(<a class="sym-link local-def" href="#def-unsave-fn" data-sym="UNSAVE-FN" title="(defun unsave-fn (name state)
  (pc-assign ss-alist (remove1-assoc-eq name (ss-alist))))">unsave-fn</a> ',NAME state))</pre>
  </div>

<div class="form-block other" id="form-197" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> <a class="sym-link local-def" href="#def-unsave" data-sym="UNSAVE" title="(defmacro unsave (name) `(unsave-fn &#39;,name state))">unsave</a>
  (&amp;optional name)
  (let ((name (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> name
         (car (event-name-and-types-and-raw-term state-stack)))))
    (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> name)
      (print-no-change <span class="string">"You must specify a name to UNSAVE, because you didn&#39;t ~
                          originally enter VERIFY using an event name."</span>)
      (if (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name (ss-alist))
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-unsave-fn" data-sym="UNSAVE-FN" title="(defun unsave-fn (name state)
  (pc-assign ss-alist (remove1-assoc-eq name (ss-alist))))">unsave-fn</a> name state)
          (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
            nil
            state
            (name)
            (fms0 <span class="string">"~|~x0 removed from saved state-stack alist.~%"</span>
              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name)))))
        (print-no-change <span class="string">"~|~x0 is does not have a value on the saved ~
                          state-stack alist.~%"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name)))))))</pre>
  </div>

<div class="form-block function" id="def-show-retrieved-goal" data-defines="SHOW-RETRIEVED-GOAL" data-references="PROOFS-CO,CONS,LIST,FMT-ABBREV,ASSERT$,EVENT-NAME-AND-TYPES-AND-RAW-TERM,CADDR,RAW-TERM,LET,STATE,STATE-STACK,DEFUN" data-used-by="RETRIEVE-FN" data-part-name="SHOW-RETRIEVED-GOAL" data-part-args="STATE,STATE-STACK" data-part-body="STATE,PROOFS-CO,CONS,LIST,FMT-ABBREV,ASSERT$,STATE-STACK,EVENT-NAME-AND-TYPES-AND-RAW-TERM,CADDR,RAW-TERM,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SHOW-RETRIEVED-GOAL">show-retrieved-goal</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-show-retrieved-goal" data-sym="SHOW-RETRIEVED-GOAL" title="(defun show-retrieved-goal (state-stack state)
  (let ((raw-term (caddr (event-name-and-types-and-raw-term state-stack))))
    (assert$ raw-term
             (fmt-abbrev &quot;~|~%Resuming proof attempt for~|~y0.&quot;
                         (list (cons #\0 raw-term)) 0 (proofs-co state) state">show-retrieved-goal</a>
  (state-stack state)
  (let ((raw-term (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (event-name-and-types-and-raw-term state-stack))))
    (<a class="sym-link system" href="axioms.html#def-assert_24" data-sym="ASSERT$">assert$</a> raw-term
      (<a class="sym-link system" href="basis-a.html#def-fmt-abbrev" data-sym="FMT-ABBREV">fmt-abbrev</a> <span class="string">"~|~%Resuming proof attempt for~|~y0."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 raw-term))
        <span class="number">0</span>
        (<a class="sym-link system" href="basis-b.html#def-proofs-co" data-sym="PROOFS-CO">proofs-co</a> state)
        state
        <span class="string">"~%"</span>))))</pre>
  </div>

<div class="form-block function" id="def-retrieve-fn" data-defines="RETRIEVE-FN" data-references="VERIFY,SHOW-RETRIEVED-GOAL,STATE-STACK,OLD-SS,PC-ASSIGN,SAVED-OLD-SS,SAVED-SS,ASSOC-EQ,SS-PAIR,LET*,T,QUASIQUOTE,MSG,CDDR,CADR,CDR,CAR,EQ,CONSP,AND,SYMBOLP,NOT,IGNORE,DECLARE,*STANDARD-OI*,READ-OBJECT,VAL,ERP,MV-LET,STRIP-CARS,CONS,LIST,CAAR,LENGTH,EQUAL,IF,VALUE,FMS0,PROOF-BUILDER,IO?,PPROGN,NULL,RETRIEVE,SOFT,ER,IN-VERIFY-FLG,QUOTE,F-GET-GLOBAL,COND,SS-ALIST,LET,STATE,NAME,DEFUN" data-used-by="RETRIEVE" data-part-name="RETRIEVE-FN" data-part-args="STATE,NAME" data-part-body="VERIFY,SHOW-RETRIEVED-GOAL,STATE-STACK,OLD-SS,PC-ASSIGN,SAVED-OLD-SS,SAVED-SS,ASSOC-EQ,SS-PAIR,LET*,T,QUASIQUOTE,MSG,CDDR,CADR,CDR,CAR,EQ,CONSP,AND,SYMBOLP,NOT,IGNORE,DECLARE,*STANDARD-OI*,READ-OBJECT,VAL,ERP,MV-LET,STRIP-CARS,CONS,LIST,CAAR,RETRIEVE-FN,LENGTH,EQUAL,IF,NAME,VALUE,FMS0,PROOF-BUILDER,IO?,PPROGN,NULL,RETRIEVE,SOFT,ER,STATE,IN-VERIFY-FLG,QUOTE,F-GET-GLOBAL,COND,SS-ALIST,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RETRIEVE-FN">retrieve-fn</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-retrieve-fn" data-sym="RETRIEVE-FN" title="(defun retrieve-fn (name state)
  (let ((ss-alist (ss-alist)))
    (cond
     ((f-get-global &#39;in-verify-flg state)
      (er soft &#39;retrieve
...">retrieve-fn</a>
  (name state)
  (let ((ss-alist (ss-alist)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'in-verify-flg state) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          '<a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a>
          <span class="string">"You are apparently already inside the VERIFY interactive loop.  It is ~
           illegal to enter such a loop recursively."</span>))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> ss-alist) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
            nil
            state
            nil
            (fms0 <span class="string">"Sorry -- there is no saved interactive proof to ~
                          re-enter! Perhaps you meant (VERIFY) rather than ~
                          (RETRIEVE).~|"</span>))
          (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>)))
      ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> name) (if (equal (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> ss-alist) <span class="number">1</span>)
          (<a class="sym-link local-def" href="#def-retrieve-fn" data-sym="RETRIEVE-FN" title="(defun retrieve-fn (name state)
  (let ((ss-alist (ss-alist)))
    (cond
     ((f-get-global &#39;in-verify-flg state)
      (er soft &#39;retrieve
...">retrieve-fn</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> ss-alist) state)
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (ss-alist)
              (fms0 <span class="string">"Please specify an interactive verification to ~
                            re-enter.  Your options are ~&amp;0.~%(Pick one of the ~
                            above:) "</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (<a class="sym-link system" href="axioms.html#def-strip-cars" data-sym="STRIP-CARS">strip-cars</a> ss-alist)))))
            (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
              (<a class="sym-link system" href="axioms.html#def-read-object" data-sym="READ-OBJECT">read-object</a> <a class="sym-link system" href="axioms.html#def-_2Astandard-oi_2A" data-sym="*STANDARD-OI*">*standard-oi*</a> state)
              (declare (ignore erp))
              (<a class="sym-link local-def" href="#def-retrieve-fn" data-sym="RETRIEVE-FN" title="(defun retrieve-fn (name state)
  (let ((ss-alist (ss-alist)))
    (cond
     ((f-get-global &#39;in-verify-flg state)
      (er soft &#39;retrieve
...">retrieve-fn</a> val state)))))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (symbolp name)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          '<a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a>
          <span class="string">"The argument supplied to ~x0 must be a symbol, but ~x1 is not a ~
           symbol.~@2"</span>
          '<a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a>
          name
          (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp name)
               (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (car name) 'quote)
               (consp (cdr name))
               (symbolp (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> name))
               (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> (<a class="sym-link system" href="axioms.html#def-cddr" data-sym="CDDR">cddr</a> name))) (<a class="sym-link system" href="axioms.html#def-msg" data-sym="MSG">msg</a> <span class="string">"  Perhaps you intended to submit the form ~x0."</span>
                `(<a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a> ,(CADR NAME))))
            (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <span class="string">""</span>))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((ss-pair (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> name ss-alist))) (saved-ss (car ss-pair))
            (saved-old-ss (cdr ss-pair)))
          (if saved-ss
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (pc-assign old-ss saved-old-ss)
              (pc-assign state-stack saved-ss)
              (<a class="sym-link local-def" href="#def-show-retrieved-goal" data-sym="SHOW-RETRIEVED-GOAL" title="(defun show-retrieved-goal (state-stack state)
  (let ((raw-term (caddr (event-name-and-types-and-raw-term state-stack))))
    (assert$ raw-term
             (fmt-abbrev &quot;~|~%Resuming proof attempt for~|~y0.&quot;
                         (list (cons #\0 raw-term)) 0 (proofs-co state) state">show-retrieved-goal</a> saved-ss state)
              (verify))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                nil
                state
                (name)
                (fms0 <span class="string">"~|Sorry -- There is no interactive proof saved ~
                              under the name ~x0.~|"</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 name))))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:invisible</span>))))))))</pre>
  </div>

<div class="form-block function" id="def-print-all-goals" data-defines="PRINT-ALL-GOALS" data-references="CDR,CAR,PRINT-PC-GOAL,PPROGN,NULL,IF,STATE,GOALS,DEFUN" data-part-name="PRINT-ALL-GOALS" data-part-args="STATE,GOALS" data-part-body="CDR,PRINT-ALL-GOALS,CAR,PRINT-PC-GOAL,PPROGN,STATE,GOALS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ALL-GOALS">print-all-goals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-all-goals" data-sym="PRINT-ALL-GOALS" title="(defun print-all-goals (goals state)
  (if (null goals)
      state
      (pprogn (print-pc-goal (car goals)) (print-all-goals (cdr goals) state))))">print-all-goals</a>
  (goals state)
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> goals)
    state
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-pc-goal (car goals))
      (<a class="sym-link local-def" href="#def-print-all-goals" data-sym="PRINT-ALL-GOALS" title="(defun print-all-goals (goals state)
  (if (null goals)
      state
      (pprogn (print-pc-goal (car goals)) (print-all-goals (cdr goals) state))))">print-all-goals</a> (cdr goals) state))))</pre>
  </div>

<div class="form-block other" id="form-201" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> <a class="sym-link local-def" href="#def-print-all-goals" data-sym="PRINT-ALL-GOALS" title="(defun print-all-goals (goals state)
  (if (null goals)
      state
      (pprogn (print-pc-goal (car goals)) (print-all-goals (cdr goals) state))))">print-all-goals</a>
  nil
  (<a class="sym-link local-def" href="#def-print-all-goals" data-sym="PRINT-ALL-GOALS" title="(defun print-all-goals (goals state)
  (if (null goals)
      state
      (pprogn (print-pc-goal (car goals)) (print-all-goals (cdr goals) state))))">print-all-goals</a> (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))</pre>
  </div>

<div class="form-block macro" id="def-print-conc" data-defines="PRINT-CONC" data-references="W,T,ACCESS,UNTRANSLATE,CONS,LIST,FMS0,IF,STATE,PROOF-BUILDER,IO?,LET,QUASIQUOTE,GOAL,&OPTIONAL,DEFMACRO" data-used-by="PRINT-ALL-CONCS" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-CONC">print-conc</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-print-conc" data-sym="PRINT-CONC" title="(defmacro print-conc (&amp;optional goal)
  `(let ((goal ,(or goal &#39;(car (access pc-state (car (state-stack)) :goals)))))
     (io? proof-builder nil state (goal)
          (if goal
              (fms0 &quot;~%-------  ~x3  -------~|~q0~|&quot;
...">print-conc</a>
  (&amp;optional goal)
  `(let ((goal ,(OR GOAL &#39;(CAR (ACCESS PC-STATE (CAR (STATE-STACK)) :GOALS)))))
    (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
      nil
      state
      (goal)
      (if goal
        (fms0 <span class="string">"~%-------  ~x3  -------~|~q0~|"</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
              (untranslate (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:conc</span>) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state)))
            (cons #\3 (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:goal-name</span>))))
        (fms0 <span class="string">"~%No goal in CAR of state-stack.~|"</span>)))))</pre>
  </div>

<div class="form-block function" id="def-print-all-concs" data-defines="PRINT-ALL-CONCS" data-references="CDR,CAR,PRINT-CONC,PPROGN,NULL,IF,XARGS,DECLARE,STATE,GOALS,DEFUN" data-part-name="PRINT-ALL-CONCS" data-part-args="STATE,GOALS" data-part-declare="STATE,XARGS,DECLARE" data-part-body="CDR,PRINT-ALL-CONCS,CAR,PRINT-CONC,PPROGN,STATE,GOALS,NULL,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PRINT-ALL-CONCS">print-all-concs</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-print-all-concs" data-sym="PRINT-ALL-CONCS" title="(defun print-all-concs (goals state)
  (declare (xargs :mode :program :stobjs state))
  (if (null goals)
      state
      (pprogn (print-conc (car goals)) (print-all-concs (cdr goals) state))))">print-all-concs</a>
  (goals state)
  (declare (xargs <span class="keyword">:mode</span> <span class="keyword">:program</span> <span class="keyword">:stobjs</span> state))
  (if (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> goals)
    state
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link local-def" href="#def-print-conc" data-sym="PRINT-CONC" title="(defmacro print-conc (&amp;optional goal)
  `(let ((goal ,(or goal &#39;(car (access pc-state (car (state-stack)) :goals)))))
     (io? proof-builder nil state (goal)
          (if goal
              (fms0 &quot;~%-------  ~x3  -------~|~q0~|&quot;
...">print-conc</a> (car goals))
      (<a class="sym-link local-def" href="#def-print-all-concs" data-sym="PRINT-ALL-CONCS" title="(defun print-all-concs (goals state)
  (declare (xargs :mode :program :stobjs state))
  (if (null goals)
      state
      (pprogn (print-conc (car goals)) (print-all-concs (cdr goals) state))))">print-all-concs</a> (cdr goals) state))))</pre>
  </div>

<div class="form-block other" id="form-204" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> <a class="sym-link local-def" href="#def-print-all-concs" data-sym="PRINT-ALL-CONCS" title="(defun print-all-concs (goals state)
  (declare (xargs :mode :program :stobjs state))
  (if (null goals)
      state
      (pprogn (print-conc (car goals)) (print-all-concs (cdr goals) state))))">print-all-concs</a>
  nil
  (<a class="sym-link local-def" href="#def-print-all-concs" data-sym="PRINT-ALL-CONCS" title="(defun print-all-concs (goals state)
  (declare (xargs :mode :program :stobjs state))
  (if (null goals)
      state
      (pprogn (print-conc (car goals)) (print-all-concs (cdr goals) state))))">print-all-concs</a> (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))</pre>
  </div>

<div class="form-block function" id="def-gen-var-marker" data-defines="GEN-VAR-MARKER" data-references=">=,INTEGERP,AND,NULL,OR,X,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST-2,NON-GEN-VAR-MARKERS,TRANSLATE-GENERALIZE-ALIST-1" data-part-name="GEN-VAR-MARKER" data-part-args="X" data-part-body=">=,INTEGERP,AND,X,NULL,OR" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GEN-VAR-MARKER">gen-var-marker</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-gen-var-marker" data-sym="GEN-VAR-MARKER" title="(defun gen-var-marker (x) (or (null x) (and (integerp x) (&gt;= x 0))))">gen-var-marker</a>
  (x)
  (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> x) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp x) (<a class="sym-link system" href="axioms.html#def-_3E_3D" data-sym="&gt;=">&gt;=</a> x <span class="number">0</span>))))</pre>
  </div>

<div class="form-block function" id="def-translate-generalize-alist-1" data-defines="TRANSLATE-GENERALIZE-ALIST-1" data-references="T,CONS,MV,CDR,VAL,ERP,MV-LET,VARIABLEP,OR,SOFT,ER,MEMBER-EQ,CADAR,GEN-VAR-MARKER,IF,VAR,TRANSLATE-GENERALIZE-ALIST,QUOTE,CAAR,TRANSLATE-ABB,TERM,ER-LET*,LENGTH,EQL,CAR,TRUE-LISTP,AND,VALUE,NULL,COND,STATE,ABBREVIATIONS,STATE-VARS,ALIST,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST" data-part-name="TRANSLATE-GENERALIZE-ALIST-1" data-part-args="STATE,ABBREVIATIONS,STATE-VARS,ALIST" data-part-body="T,CONS,MV,CDR,TRANSLATE-GENERALIZE-ALIST-1,VAL,ERP,MV-LET,VARIABLEP,OR,SOFT,ER,STATE-VARS,MEMBER-EQ,CADAR,GEN-VAR-MARKER,IF,VAR,STATE,TRANSLATE-GENERALIZE-ALIST,QUOTE,ABBREVIATIONS,CAAR,TRANSLATE-ABB,TERM,ER-LET*,LENGTH,EQL,CAR,TRUE-LISTP,AND,VALUE,ALIST,NULL,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-GENERALIZE-ALIST-1">translate-generalize-alist-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-generalize-alist-1" data-sym="TRANSLATE-GENERALIZE-ALIST-1" title="(defun translate-generalize-alist-1 (alist state-vars abbreviations state)
  (cond ((null alist) (value nil))
        ((and (true-listp (car alist)) (eql (length (car alist)) 2))
         (er-let*
          ((term
...">translate-generalize-alist-1</a>
  (alist state-vars abbreviations state)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> alist) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> nil))
    ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (car alist)) (<a class="sym-link system" href="axioms.html#def-eql" data-sym="EQL">eql</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> (car alist)) <span class="number">2</span>)) (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((term (<a class="sym-link local-def" href="#def-translate-abb" data-sym="TRANSLATE-ABB" title="(defun translate-abb (x abbreviations ctx state)
  (mv-let (erp term state) (translate x t t t ctx (w state) state)
          (if erp
              (mv erp term state)
              (remove-?s term (abbreviations-alist abbreviations) ctx state))))">translate-abb</a> (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist)
             abbreviations
             '<a class="sym-link local-def" href="#def-translate-generalize-alist" data-sym="TRANSLATE-GENERALIZE-ALIST" title="(defun translate-generalize-alist (alist state-vars abbreviations state)
  (er-let*
   ((alist1
     (translate-generalize-alist-1 alist state-vars abbreviations state)))
   (let ((new-vars (non-gen-var-markers alist1)))
...">translate-generalize-alist</a>
             state)) (var (if (<a class="sym-link local-def" href="#def-gen-var-marker" data-sym="GEN-VAR-MARKER" title="(defun gen-var-marker (x) (or (null x) (and (integerp x) (&gt;= x 0))))">gen-var-marker</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> alist))
              (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> alist))
              (<a class="sym-link local-def" href="#def-translate-abb" data-sym="TRANSLATE-ABB" title="(defun translate-abb (x abbreviations ctx state)
  (mv-let (erp term state) (translate x t t t ctx (w state) state)
          (if erp
              (mv erp term state)
              (remove-?s term (abbreviations-alist abbreviations) ctx state))))">translate-abb</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> alist)
                nil
                '<a class="sym-link local-def" href="#def-translate-generalize-alist" data-sym="TRANSLATE-GENERALIZE-ALIST" title="(defun translate-generalize-alist (alist state-vars abbreviations state)
  (er-let*
   ((alist1
     (translate-generalize-alist-1 alist state-vars abbreviations state)))
   (let ((new-vars (non-gen-var-markers alist1)))
...">translate-generalize-alist</a>
                state))))
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-member-eq" data-sym="MEMBER-EQ">member-eq</a> var state-vars) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              <span class="keyword">:generalize</span> <span class="string">"The variable ~x0 already appears in the current goals of ~
            the proof-builder state, and hence is not legal as a ~
            generalization variable."</span>
              var))
          ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> var) (<a class="sym-link local-def" href="#def-gen-var-marker" data-sym="GEN-VAR-MARKER" title="(defun gen-var-marker (x) (or (null x) (and (integerp x) (&gt;= x 0))))">gen-var-marker</a> var)) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
              (<a class="sym-link local-def" href="#def-translate-generalize-alist-1" data-sym="TRANSLATE-GENERALIZE-ALIST-1" title="(defun translate-generalize-alist-1 (alist state-vars abbreviations state)
  (cond ((null alist) (value nil))
        ((and (true-listp (car alist)) (eql (length (car alist)) 2))
         (er-let*
          ((term
...">translate-generalize-alist-1</a> (cdr alist)
                state-vars
                abbreviations
                state)
              (if erp
                (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp val state)
                (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons (cons term var) val)))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              <span class="keyword">:generalize</span> <span class="string">"The second element of each doublet ~
            given to the GENERALIZE command must be a variable or ~
            natural number, but ~x0 is neither."</span>
              (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> alist))))))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
        <span class="keyword">:generalize</span> <span class="string">"Each argument to the GENERALIZE command must be a list of ~
         length 2, but ~x0 is not."</span>
        (car alist)))))</pre>
  </div>

<div class="form-block function" id="def-non-gen-var-markers" data-defines="NON-GEN-VAR-MARKERS" data-references="CONS,CDR,CDAR,GEN-VAR-MARKER,CONSP,IF,ALIST,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST" data-part-name="NON-GEN-VAR-MARKERS" data-part-args="ALIST" data-part-body="CONS,CDR,NON-GEN-VAR-MARKERS,CDAR,GEN-VAR-MARKER,ALIST,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="NON-GEN-VAR-MARKERS">non-gen-var-markers</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-non-gen-var-markers" data-sym="NON-GEN-VAR-MARKERS" title="(defun non-gen-var-markers (alist)
  (if (consp alist)
      (if (gen-var-marker (cdar alist))
          (non-gen-var-markers (cdr alist))
          (cons (cdar alist) (non-gen-var-markers (cdr alist))))">non-gen-var-markers</a>
  (alist)
  (if (consp alist)
    (if (<a class="sym-link local-def" href="#def-gen-var-marker" data-sym="GEN-VAR-MARKER" title="(defun gen-var-marker (x) (or (null x) (and (integerp x) (&gt;= x 0))))">gen-var-marker</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))
      (<a class="sym-link local-def" href="#def-non-gen-var-markers" data-sym="NON-GEN-VAR-MARKERS" title="(defun non-gen-var-markers (alist)
  (if (consp alist)
      (if (gen-var-marker (cdar alist))
          (non-gen-var-markers (cdr alist))
          (cons (cdar alist) (non-gen-var-markers (cdr alist))))">non-gen-var-markers</a> (cdr alist))
      (cons (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) (<a class="sym-link local-def" href="#def-non-gen-var-markers" data-sym="NON-GEN-VAR-MARKERS" title="(defun non-gen-var-markers (alist)
  (if (consp alist)
      (if (gen-var-marker (cdar alist))
          (non-gen-var-markers (cdr alist))
          (cons (cdar alist) (non-gen-var-markers (cdr alist))))">non-gen-var-markers</a> (cdr alist))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-find-duplicate-generalize-entries" data-defines="FIND-DUPLICATE-GENERALIZE-ENTRIES" data-references="CDR,CAR,CONS,CADAR,EQ,IF,TRUE-LISTP,XARGS,DECLARE,VAR,ALIST,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST" data-part-name="FIND-DUPLICATE-GENERALIZE-ENTRIES" data-part-args="VAR,ALIST" data-part-declare="ALIST,TRUE-LISTP,XARGS,DECLARE" data-part-body="CDR,FIND-DUPLICATE-GENERALIZE-ENTRIES,CAR,CONS,VAR,CADAR,EQ,ALIST,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-DUPLICATE-GENERALIZE-ENTRIES">find-duplicate-generalize-entries</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-duplicate-generalize-entries" data-sym="FIND-DUPLICATE-GENERALIZE-ENTRIES" title="(defun find-duplicate-generalize-entries (alist var)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (eq (cadar alist) var)
          (cons (car alist)
...">find-duplicate-generalize-entries</a>
  (alist var)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> alist)))
  (if alist
    (if (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> alist) var)
      (cons (car alist)
        (<a class="sym-link local-def" href="#def-find-duplicate-generalize-entries" data-sym="FIND-DUPLICATE-GENERALIZE-ENTRIES" title="(defun find-duplicate-generalize-entries (alist var)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (eq (cadar alist) var)
          (cons (car alist)
...">find-duplicate-generalize-entries</a> (cdr alist) var))
      (<a class="sym-link local-def" href="#def-find-duplicate-generalize-entries" data-sym="FIND-DUPLICATE-GENERALIZE-ENTRIES" title="(defun find-duplicate-generalize-entries (alist var)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (eq (cadar alist) var)
          (cons (car alist)
...">find-duplicate-generalize-entries</a> (cdr alist) var))
    nil))</pre>
  </div>

<div class="form-block function" id="def-translate-generalize-alist-2" data-defines="TRANSLATE-GENERALIZE-ALIST-2" data-references="CAR,CDR,CAAR,CONS,QUOTE,GENVAR,NEW-VAR,LET,CDAR,GEN-VAR-MARKER,IF,TRUE-LISTP,XARGS,DECLARE,AVOID-LIST,ALIST,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST" data-part-name="TRANSLATE-GENERALIZE-ALIST-2" data-part-args="AVOID-LIST,ALIST" data-part-declare="ALIST,TRUE-LISTP,XARGS,DECLARE" data-part-body="CAR,CDR,TRANSLATE-GENERALIZE-ALIST-2,CAAR,CONS,AVOID-LIST,QUOTE,GENVAR,NEW-VAR,LET,CDAR,GEN-VAR-MARKER,ALIST,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-GENERALIZE-ALIST-2">translate-generalize-alist-2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-generalize-alist-2" data-sym="TRANSLATE-GENERALIZE-ALIST-2" title="(defun translate-generalize-alist-2 (alist avoid-list)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (gen-var-marker (cdar alist))
          (let ((new-var (genvar &#39;genvar &quot;_&quot; (cdar alist) avoid-list)))
...">translate-generalize-alist-2</a>
  (alist avoid-list)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> alist)))
  (if alist
    (if (<a class="sym-link local-def" href="#def-gen-var-marker" data-sym="GEN-VAR-MARKER" title="(defun gen-var-marker (x) (or (null x) (and (integerp x) (&gt;= x 0))))">gen-var-marker</a> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist))
      (let ((new-var (<a class="sym-link system" href="basis-b.html#def-genvar" data-sym="GENVAR">genvar</a> '<a class="sym-link system" href="basis-b.html#def-genvar" data-sym="GENVAR">genvar</a> <span class="string">"_"</span> (<a class="sym-link system" href="axioms.html#def-cdar" data-sym="CDAR">cdar</a> alist) avoid-list)))
        (cons (cons (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> alist) new-var)
          (<a class="sym-link local-def" href="#def-translate-generalize-alist-2" data-sym="TRANSLATE-GENERALIZE-ALIST-2" title="(defun translate-generalize-alist-2 (alist avoid-list)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (gen-var-marker (cdar alist))
          (let ((new-var (genvar &#39;genvar &quot;_&quot; (cdar alist) avoid-list)))
...">translate-generalize-alist-2</a> (cdr alist)
            (cons new-var avoid-list))))
      (cons (car alist)
        (<a class="sym-link local-def" href="#def-translate-generalize-alist-2" data-sym="TRANSLATE-GENERALIZE-ALIST-2" title="(defun translate-generalize-alist-2 (alist avoid-list)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (gen-var-marker (cdar alist))
          (let ((new-var (genvar &#39;genvar &quot;_&quot; (cdar alist) avoid-list)))
...">translate-generalize-alist-2</a> (cdr alist) avoid-list)))
    nil))</pre>
  </div>

<div class="form-block function" id="def-translate-generalize-alist" data-defines="TRANSLATE-GENERALIZE-ALIST" data-references="LIST,HARD,GENERALIZE,QUOTE,SOFT,ER,CDR,FIND-DUPLICATE-GENERALIZE-ENTRIES,DUP-ENTRIES,DUPLICATES,CAR,BAD-VAR,LET*,APPEND,TRANSLATE-GENERALIZE-ALIST-2,VALUE,NO-DUPLICATESP-EQUAL,IF,NON-GEN-VAR-MARKERS,NEW-VARS,LET,TRANSLATE-GENERALIZE-ALIST-1,ALIST1,ER-LET*,STATE,ABBREVIATIONS,STATE-VARS,ALIST,DEFUN" data-used-by="TRANSLATE-GENERALIZE-ALIST-1" data-part-name="TRANSLATE-GENERALIZE-ALIST" data-part-args="STATE,ABBREVIATIONS,STATE-VARS,ALIST" data-part-body="LIST,HARD,GENERALIZE,QUOTE,SOFT,ER,CDR,FIND-DUPLICATE-GENERALIZE-ENTRIES,DUP-ENTRIES,DUPLICATES,CAR,BAD-VAR,LET*,APPEND,TRANSLATE-GENERALIZE-ALIST-2,VALUE,NO-DUPLICATESP-EQUAL,IF,NON-GEN-VAR-MARKERS,NEW-VARS,LET,STATE,ABBREVIATIONS,STATE-VARS,ALIST,TRANSLATE-GENERALIZE-ALIST-1,ALIST1,ER-LET*" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TRANSLATE-GENERALIZE-ALIST">translate-generalize-alist</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-translate-generalize-alist" data-sym="TRANSLATE-GENERALIZE-ALIST" title="(defun translate-generalize-alist (alist state-vars abbreviations state)
  (er-let*
   ((alist1
     (translate-generalize-alist-1 alist state-vars abbreviations state)))
   (let ((new-vars (non-gen-var-markers alist1)))
...">translate-generalize-alist</a>
  (alist state-vars abbreviations state)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((alist1 (<a class="sym-link local-def" href="#def-translate-generalize-alist-1" data-sym="TRANSLATE-GENERALIZE-ALIST-1" title="(defun translate-generalize-alist-1 (alist state-vars abbreviations state)
  (cond ((null alist) (value nil))
        ((and (true-listp (car alist)) (eql (length (car alist)) 2))
         (er-let*
          ((term
...">translate-generalize-alist-1</a> alist
         state-vars
         abbreviations
         state)))
    (let ((new-vars (<a class="sym-link local-def" href="#def-non-gen-var-markers" data-sym="NON-GEN-VAR-MARKERS" title="(defun non-gen-var-markers (alist)
  (if (consp alist)
      (if (gen-var-marker (cdar alist))
          (non-gen-var-markers (cdr alist))
          (cons (cdar alist) (non-gen-var-markers (cdr alist))))">non-gen-var-markers</a> alist1)))
      (if (<a class="sym-link system" href="axioms.html#def-no-duplicatesp-equal" data-sym="NO-DUPLICATESP-EQUAL">no-duplicatesp-equal</a> new-vars)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-translate-generalize-alist-2" data-sym="TRANSLATE-GENERALIZE-ALIST-2" title="(defun translate-generalize-alist-2 (alist avoid-list)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (gen-var-marker (cdar alist))
          (let ((new-var (genvar &#39;genvar &quot;_&quot; (cdar alist) avoid-list)))
...">translate-generalize-alist-2</a> alist1
            (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> new-vars state-vars)))
        (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((bad-var (car (<a class="sym-link system" href="axioms.html#def-duplicates" data-sym="DUPLICATES">duplicates</a> new-vars))) (dup-entries (<a class="sym-link local-def" href="#def-find-duplicate-generalize-entries" data-sym="FIND-DUPLICATE-GENERALIZE-ENTRIES" title="(defun find-duplicate-generalize-entries (alist var)
  (declare (xargs :guard (true-listp alist)))
  (if alist
      (if (eq (cadar alist) var)
          (cons (car alist)
...">find-duplicate-generalize-entries</a> alist bad-var)))
          (if (cdr dup-entries)
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              'generalize
              <span class="string">"The pairs ~&amp;0 have the same variable, ~x1, and hence your ~
                  GENERALIZE instruction is illegal."</span>
              dup-entries
              bad-var)
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> hard
                'generalize
                <span class="string">"Bad call to translate-generalize-alist on ~%  ~x0."</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> alist state-vars abbreviations)))))))))</pre>
  </div>

<div class="form-block function" id="def-all-vars-goals" data-defines="ALL-VARS-GOALS" data-references="CDR,ALL-VARS1-LST,CAR,GOAL,ACCESS,ALL-VARS,UNION-EQ,CONSP,IF,GOALS,DEFUN" data-used-by="PC-STATE-VARS" data-part-name="ALL-VARS-GOALS" data-part-args="GOALS" data-part-body="CDR,ALL-VARS-GOALS,ALL-VARS1-LST,CAR,GOAL,ACCESS,ALL-VARS,UNION-EQ,GOALS,CONSP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="ALL-VARS-GOALS">all-vars-goals</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-all-vars-goals" data-sym="ALL-VARS-GOALS" title="(defun all-vars-goals (goals)
  (if (consp goals)
      (union-eq (all-vars (access goal (car goals) :conc))
                (union-eq (all-vars1-lst (access goal (car goals) :hyps) nil)
                          (all-vars-goals (cdr goals))))">all-vars-goals</a>
  (goals)
  (if (consp goals)
    (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (<a class="sym-link system" href="axioms.html#def-all-vars" data-sym="ALL-VARS">all-vars</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:conc</span>))
      (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (all-vars1-lst (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:hyps</span>) nil)
        (<a class="sym-link local-def" href="#def-all-vars-goals" data-sym="ALL-VARS-GOALS" title="(defun all-vars-goals (goals)
  (if (consp goals)
      (union-eq (all-vars (access goal (car goals) :conc))
                (union-eq (all-vars1-lst (access goal (car goals) :hyps) nil)
                          (all-vars-goals (cdr goals))))">all-vars-goals</a> (cdr goals))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-pc-state-vars" data-defines="PC-STATE-VARS" data-references="ALL-VARS-GOALS,ACCESS,STRIP-CDRS,ALL-VARS1-LST,UNION-EQ,PC-STATE,DEFUN" data-part-name="PC-STATE-VARS" data-part-args="PC-STATE" data-part-body="ALL-VARS-GOALS,PC-STATE,ACCESS,STRIP-CDRS,ALL-VARS1-LST,UNION-EQ" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-STATE-VARS">pc-state-vars</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-state-vars" data-sym="PC-STATE-VARS" title="(defun pc-state-vars (pc-state)
  (union-eq
   (all-vars1-lst (strip-cdrs (access pc-state pc-state :abbreviations)) nil)
   (all-vars-goals (access pc-state pc-state :goals))))">pc-state-vars</a>
  (pc-state)
  (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> (all-vars1-lst (<a class="sym-link system" href="axioms.html#def-strip-cdrs" data-sym="STRIP-CDRS">strip-cdrs</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state pc-state <span class="keyword">:abbreviations</span>))
      nil)
    (<a class="sym-link local-def" href="#def-all-vars-goals" data-sym="ALL-VARS-GOALS" title="(defun all-vars-goals (goals)
  (if (consp goals)
      (union-eq (all-vars (access goal (car goals) :conc))
                (union-eq (all-vars1-lst (access goal (car goals) :hyps) nil)
                          (all-vars-goals (cdr goals))))">all-vars-goals</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state pc-state <span class="keyword">:goals</span>))))</pre>
  </div>

<div class="form-block other" id="form-213" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> generalize
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (current-addr (print-no-change2 <span class="string">"Generalization may only be applied at the top of the current goal.  Try TOP first."</span>))
    ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>) (print-no-change2 <span class="string">"GENERALIZE requires at least one argument."</span>))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp alist state)
        (<a class="sym-link local-def" href="#def-translate-generalize-alist" data-sym="TRANSLATE-GENERALIZE-ALIST" title="(defun translate-generalize-alist (alist state-vars abbreviations state)
  (er-let*
   ((alist1
     (translate-generalize-alist-1 alist state-vars abbreviations state)))
   (let ((new-vars (non-gen-var-markers alist1)))
...">translate-generalize-alist</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>
          (<a class="sym-link local-def" href="#def-pc-state-vars" data-sym="PC-STATE-VARS" title="(defun pc-state-vars (pc-state)
  (union-eq
   (all-vars1-lst (strip-cdrs (access pc-state pc-state :abbreviations)) nil)
   (all-vars-goals (access pc-state pc-state :goals))))">pc-state-vars</a> pc-state)
          abbreviations
          state)
        (if erp
          (print-no-change2 <span class="string">"GENERALIZE failed."</span>)
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
              <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                  (car goals)
                  <span class="keyword">:hyps</span> (sublis-expr-lst alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:hyps</span>))
                  <span class="keyword">:conc</span> (sublis-expr alist (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:conc</span>)))
                (cdr goals)))
            state))))))</pre>
  </div>

<div class="form-block other" id="form-214" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> use
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:use</span> ,ARGS
         <span class="keyword">:do-not-induct</span> proof-builder
         <span class="keyword">:do-not</span> <a class="sym-link system" href="history-management.html#def-_2Ado-not-processes_2A" data-sym="*DO-NOT-PROCESSES*">*do-not-processes*</a>))
      <span class="keyword">:otf-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-215" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> clause-processor
  (&amp;rest cl-proc-hints)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:prove</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:clause-processor</span> (,@CL-PROC-HINTS)
         <span class="keyword">:do-not-induct</span> proof-builder
         <span class="keyword">:do-not</span> <a class="sym-link system" href="history-management.html#def-_2Ado-not-processes_2A" data-sym="*DO-NOT-PROCESSES*">*do-not-processes*</a>))
      <span class="keyword">:otf-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-216" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> cl-proc
  (&amp;rest cl-proc-hints)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:clause-processor</span> ,@CL-PROC-HINTS)))</pre>
  </div>

<div class="form-block other" id="form-217" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> retain
  (arg1 &amp;rest rest-args)
  (declare (ignore arg1 rest-args))
  (when-goals-trip (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hyps (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (bad-nums (<a class="sym-link local-def" href="#def-non-bounded-nums" data-sym="NON-BOUNDED-NUMS" title="(defun non-bounded-nums (nums lower upper)
  (declare
   (xargs :guard (and (rationalp lower) (rationalp upper) (true-listp nums))))
  (if (consp nums)
      (if (and (integerp (car nums)) (&lt;= lower (car nums))
...">non-bounded-nums</a> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a> <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps))))
      (if bad-nums
        (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The following are not in-range hypothesis numbers:  ~&amp;0."</span>
            (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 bad-nums)))
          (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))
        (let ((retained-hyps (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> (fromto <span class="number">1</span> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps)) <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))
          (if retained-hyps
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:drop</span> retained-hyps))
            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"All hypotheses are to be retained."</span>)
              (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> nil state))))))))</pre>
  </div>

<div class="form-block other" id="form-218" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> reduce
  (&amp;rest hints)
  (if (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> hints)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:prove</span> <span class="keyword">:hints</span> (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist_21" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST!" title="(defun add-string-val-pair-to-string-val-alist! (key key1 val alist)
  (add-string-val-pair-to-string-val-alist-1 key key1 val alist t))">add-string-val-pair-to-string-val-alist!</a> <span class="string">"Goal"</span>
          <span class="keyword">:do-not-induct</span> 'proof-builder
          hints)
        <span class="keyword">:otf-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"A REDUCE instruction must be of the form~%~ ~ ~
              (:REDUCE (goal_name_1 ...) ... (goal_name_n ...)),~%and hence ~
              your instruction,~%~ ~ ~x0,~%is not legal."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons <span class="keyword">:reduce</span> hints))))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))</pre>
  </div>

<div class="form-block other" id="form-219" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> run-instr-on-goal
  (instr goal-name)
  (when-goals-trip (if (equal goal-name (goal-name <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> instr)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(protect (change-goal ,GOAL-NAME) ,INSTR)))))</pre>
  </div>

<div class="form-block function" id="def-run-instr-on-goals-guts" data-defines="RUN-INSTR-ON-GOALS-GUTS" data-references="CDR,RUN-INSTR-ON-GOAL,QUASIQUOTE,CONS,IF,TRUE-LISTP,XARGS,DECLARE,GOAL-NAMES,INSTR,DEFUN" data-part-name="RUN-INSTR-ON-GOALS-GUTS" data-part-args="GOAL-NAMES,INSTR" data-part-declare="GOAL-NAMES,TRUE-LISTP,XARGS,DECLARE" data-part-body="CDR,INSTR,RUN-INSTR-ON-GOALS-GUTS,RUN-INSTR-ON-GOAL,QUASIQUOTE,CONS,GOAL-NAMES,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RUN-INSTR-ON-GOALS-GUTS">run-instr-on-goals-guts</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-run-instr-on-goals-guts" data-sym="RUN-INSTR-ON-GOALS-GUTS" title="(defun run-instr-on-goals-guts (instr goal-names)
  (declare (xargs :guard (true-listp goal-names)))
  (if goal-names
      (cons `(run-instr-on-goal ,instr ,(car goal-names))
            (run-instr-on-goals-guts instr (cdr goal-names)))">run-instr-on-goals-guts</a>
  (instr goal-names)
  (declare (xargs <span class="keyword">:guard</span> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> goal-names)))
  (if goal-names
    (cons `(run-instr-on-goal ,INSTR ,(CAR GOAL-NAMES))
      (<a class="sym-link local-def" href="#def-run-instr-on-goals-guts" data-sym="RUN-INSTR-ON-GOALS-GUTS" title="(defun run-instr-on-goals-guts (instr goal-names)
  (declare (xargs :guard (true-listp goal-names)))
  (if goal-names
      (cons `(run-instr-on-goal ,instr ,(car goal-names))
            (run-instr-on-goals-guts instr (cdr goal-names)))">run-instr-on-goals-guts</a> instr (cdr goal-names)))
    nil))</pre>
  </div>

<div class="form-block other" id="form-221" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> run-instr-on-new-goals
  (instr existing-goal-names &amp;optional must-succeed-flg)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons 'do-strict
      (<a class="sym-link local-def" href="#def-run-instr-on-goals-guts" data-sym="RUN-INSTR-ON-GOALS-GUTS" title="(defun run-instr-on-goals-guts (instr goal-names)
  (declare (xargs :guard (true-listp goal-names)))
  (if goal-names
      (cons `(run-instr-on-goal ,instr ,(car goal-names))
            (run-instr-on-goals-guts instr (cdr goal-names)))">run-instr-on-goals-guts</a> (if must-succeed-flg
          instr
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:succeed</span> instr))
        (<a class="sym-link system" href="axioms.html#def-set-difference-equal" data-sym="SET-DIFFERENCE-EQUAL">set-difference-equal</a> (goal-names (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
          existing-goal-names)))))</pre>
  </div>

<div class="form-block other" id="form-222" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> then
  (instr &amp;optional completion must-succeed-flg)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'do-strict
      instr
      (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'run-instr-on-new-goals
        (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> completion <span class="keyword">:reduce</span>)
        (goal-names (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        must-succeed-flg))))</pre>
  </div>

<div class="form-block other" id="form-223" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> nil nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '<a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>))</pre>
  </div>

<div class="form-block other" id="form-224" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> free
  (var)
  (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((var (<a class="sym-link local-def" href="#def-trans0" data-sym="TRANS0" title="(defmacro trans0 (x &amp;optional abbreviations ctx)
  `(translate-abb ,x ,abbreviations ,(or ctx &#39;&#39;trans0) state))">trans0</a> var nil <span class="keyword">:free</span>)))
    (if (<a class="sym-link system" href="axioms.html#def-variablep" data-sym="VARIABLEP">variablep</a> var)
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(add-abbreviation ,VAR (<a class="sym-link system" href="axioms.html#def-hide" data-sym="HIDE">hide</a> ,VAR)))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The FREE command requires an argument that is a variable, ~
                       which ~x0 is not."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 var)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))))</pre>
  </div>

<div class="form-block other" id="form-225" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> replay
  (&amp;optional n replacement-instr)
  (if (<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> n) (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp n) (<a class="sym-link system" href="axioms.html#def-_3E" data-sym="&gt;">&gt;</a> n <span class="number">0</span>)))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> state-stack)) (n (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> n (min (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> n) <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)))
        (instrs (instructions-of-state-stack (if n
              (<a class="sym-link system" href="axioms.html#def-take" data-sym="TAKE">take</a> n state-stack)
              state-stack)
            nil)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-strict (undo ,(1- (OR N LEN)))
          ,@(IF REPLACEMENT-INSTR
      (CONS REPLACEMENT-INSTR (CDR INSTRS))
      INSTRS))))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"The optional argument to the REPLAY command ~
                              must be a positive integer, but ~x0 is not!"</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 n)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))</pre>
  </div>

<div class="form-block function" id="def-instr-name" data-defines="INSTR-NAME" data-references="CAR,ATOM,IF,INSTR,DEFUN" data-used-by="PC-FREE-INSTR-P" data-part-name="INSTR-NAME" data-part-args="INSTR" data-part-body="CAR,INSTR,ATOM,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="INSTR-NAME">instr-name</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-instr-name" data-sym="INSTR-NAME" title="(defun instr-name (instr)
  (if (atom instr)
      instr
      (car instr)))">instr-name</a>
  (instr)
  (if (<a class="sym-link system" href="axioms.html#def-atom" data-sym="ATOM">atom</a> instr)
    instr
    (car instr)))</pre>
  </div>

<div class="form-block function" id="def-pc-free-instr-p" data-defines="PC-FREE-INSTR-P" data-references="CADR,INSTR-NAME,EQ,AND,ACCESS,INSTR,LET,PC-STATE,VAR,DEFUN" data-used-by="FIND-POSSIBLE-PUT" data-part-name="PC-FREE-INSTR-P" data-part-args="PC-STATE,VAR" data-part-body="VAR,CADR,INSTR-NAME,EQ,AND,PC-STATE,ACCESS,INSTR,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PC-FREE-INSTR-P">pc-free-instr-p</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-pc-free-instr-p" data-sym="PC-FREE-INSTR-P" title="(defun pc-free-instr-p (var pc-state)
  (let ((instr (access pc-state pc-state :instruction)))
    (and (eq (instr-name instr) :free) (eq (cadr instr) var))))">pc-free-instr-p</a>
  (var pc-state)
  (let ((instr (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state pc-state <span class="keyword">:instruction</span>)))
    (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link local-def" href="#def-instr-name" data-sym="INSTR-NAME" title="(defun instr-name (instr)
  (if (atom instr)
      instr
      (car instr)))">instr-name</a> instr) <span class="keyword">:free</span>) (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadr" data-sym="CADR">cadr</a> instr) var))))</pre>
  </div>

<div class="form-block function" id="def-find-possible-put" data-defines="FIND-POSSIBLE-PUT" data-references="1+,AND,CDR,N,LET,CAR,PC-FREE-INSTR-P,IF,STATE-STACK,VAR,DEFUN" data-part-name="FIND-POSSIBLE-PUT" data-part-args="STATE-STACK,VAR" data-part-body="1+,AND,CDR,FIND-POSSIBLE-PUT,N,LET,CAR,VAR,PC-FREE-INSTR-P,STATE-STACK,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="FIND-POSSIBLE-PUT">find-possible-put</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-find-possible-put" data-sym="FIND-POSSIBLE-PUT" title="(defun find-possible-put (var state-stack)
  (if state-stack
      (if (pc-free-instr-p var (car state-stack))
          1
          (let ((n (find-possible-put var (cdr state-stack))))
...">find-possible-put</a>
  (var state-stack)
  (if state-stack
    (if (<a class="sym-link local-def" href="#def-pc-free-instr-p" data-sym="PC-FREE-INSTR-P" title="(defun pc-free-instr-p (var pc-state)
  (let ((instr (access pc-state pc-state :instruction)))
    (and (eq (instr-name instr) :free) (eq (cadr instr) var))))">pc-free-instr-p</a> var (car state-stack))
      <span class="number">1</span>
      (let ((n (<a class="sym-link local-def" href="#def-find-possible-put" data-sym="FIND-POSSIBLE-PUT" title="(defun find-possible-put (var state-stack)
  (if state-stack
      (if (pc-free-instr-p var (car state-stack))
          1
          (let ((n (find-possible-put var (cdr state-stack))))
...">find-possible-put</a> var (cdr state-stack))))
        (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> n (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> n))))
    nil))</pre>
  </div>

<div class="form-block other" id="form-229" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> put
  (var expr)
  (let ((n (<a class="sym-link local-def" href="#def-find-possible-put" data-sym="FIND-POSSIBLE-PUT" title="(defun find-possible-put (var state-stack)
  (if state-stack
      (if (pc-free-instr-p var (car state-stack))
          1
          (let ((n (find-possible-put var (cdr state-stack))))
...">find-possible-put</a> var state-stack)))
    (if n
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-strict (replay ,N (add-abbreviation ,VAR ,EXPR))
          (remove-abbreviations ,VAR)))
      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"There is no FREE command for ~x0."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 var)))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))))</pre>
  </div>

<div class="form-block other" id="form-230" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> reduce-by-induction
  (&amp;rest hints)
  (if (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> hints)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:reduce</span> (<a class="sym-link local-def" href="#def-add-string-val-pair-to-string-val-alist" data-sym="ADD-STRING-VAL-PAIR-TO-STRING-VAL-ALIST" title="(defun add-string-val-pair-to-string-val-alist (key key1 val alist)
  (add-string-val-pair-to-string-val-alist-1 key key1 val alist nil))">add-string-val-pair-to-string-val-alist</a> <span class="string">"Goal"</span>
          <span class="keyword">:induct</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
          hints)))
    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"A REDUCE-BY-INDUCTION instruction must be of the form~%~ ~ ~
              (:REDUCE-BY-INDUCTION (goal_name_1 ...) ... (goal_name_n ...)),~%and hence ~
              your instruction,~%~ ~ ~x0,~%is not legal."</span>
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 (cons <span class="keyword">:reduce-by-induction</span> hints))))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>))))</pre>
  </div>

<div class="form-block other" id="form-231" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> r
  (&amp;rest <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons <span class="keyword">:rewrite</span> <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)))</pre>
  </div>

<div class="form-block other" id="form-232" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> sl
  (&amp;optional <a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a>)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if <a class="sym-link system" href="axioms.html#def-backchain-limit" data-sym="BACKCHAIN-LIMIT">backchain-limit</a>
      `(s <span class="keyword">:backchain-limit</span> ,BACKCHAIN-LIMIT
        <span class="keyword">:in-theory</span> (union-theories (theory 'minimal-theory)
          (set-difference-theories (current-theory <span class="keyword">:here</span>)
            (function-theory <span class="keyword">:here</span>))))
      `(s <span class="keyword">:in-theory</span> (union-theories (theory 'minimal-theory)
          (set-difference-theories (current-theory <span class="keyword">:here</span>)
            (function-theory <span class="keyword">:here</span>)))))))</pre>
  </div>

<div class="form-block other" id="form-233" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> elim
  nil
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:prove</span> <span class="keyword">:otf-flg</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
      <span class="keyword">:hints</span> '((<span class="string">"Goal"</span> <span class="keyword">:do-not-induct</span> proof-builder
         <span class="keyword">:do-not</span> (<a class="sym-link system" href="axioms.html#def-set-difference-eq" data-sym="SET-DIFFERENCE-EQ">set-difference-eq</a> <a class="sym-link system" href="history-management.html#def-_2Ado-not-processes_2A" data-sym="*DO-NOT-PROCESSES*">*do-not-processes*</a>
           '(eliminate-destructors)))))))</pre>
  </div>

<div class="form-block other" id="form-234" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> ex nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(do-strict save <a class="sym-link system" href="basis-a.html#def-exit" data-sym="EXIT">exit</a>)))</pre>
  </div>

<div class="form-block function" id="def-save-fc-report-settings" data-defines="SAVE-FC-REPORT-SETTINGS" data-references="PUT-ASSOC-EQ,SET-WORMHOLE-DATA,FLYP,ASSOC-EQ,CDR,CRITERIA,WORMHOLE-DATA,DATA,LET*,WHS,LAMBDA,FC-WORMHOLE,QUOTE,WORMHOLE-EVAL,T,XARGS,DECLARE,DEFUN" data-part-name="SAVE-FC-REPORT-SETTINGS" data-part-declare="T,XARGS,DECLARE" data-part-body="PUT-ASSOC-EQ,SET-WORMHOLE-DATA,FLYP,ASSOC-EQ,CDR,CRITERIA,WORMHOLE-DATA,DATA,LET*,WHS,LAMBDA,FC-WORMHOLE,QUOTE,WORMHOLE-EVAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="SAVE-FC-REPORT-SETTINGS">save-fc-report-settings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-save-fc-report-settings" data-sym="SAVE-FC-REPORT-SETTINGS" title="(defun save-fc-report-settings ()
  (declare (xargs :guard t))
  (wormhole-eval &#39;fc-wormhole
                 &#39;(lambda (whs)
                    (let* ((data (wormhole-data whs))
...">save-fc-report-settings</a>
  nil
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a> 'fc-wormhole
    '(lambda (whs)
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((data (<a class="sym-link system" href="basis-a.html#def-wormhole-data" data-sym="WORMHOLE-DATA">wormhole-data</a> whs)) (criteria (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:criteria</span> data)))
          (flyp (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:report-on-the-flyp</span> data))))
        (<a class="sym-link system" href="basis-a.html#def-set-wormhole-data" data-sym="SET-WORMHOLE-DATA">set-wormhole-data</a> whs
          (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:criteria-saved</span> criteria
            (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:report-on-the-flyp-saved</span> flyp data)))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-restore-fc-report-settings" data-defines="RESTORE-FC-REPORT-SETTINGS" data-references="PUT-ASSOC-EQ,SET-WORMHOLE-DATA,FLYP-SAVED,ASSOC-EQ,CDR,CRITERIA-SAVED,WORMHOLE-DATA,DATA,LET*,WHS,LAMBDA,FC-WORMHOLE,QUOTE,WORMHOLE-EVAL,T,XARGS,DECLARE,DEFUN" data-part-name="RESTORE-FC-REPORT-SETTINGS" data-part-declare="T,XARGS,DECLARE" data-part-body="PUT-ASSOC-EQ,SET-WORMHOLE-DATA,FLYP-SAVED,ASSOC-EQ,CDR,CRITERIA-SAVED,WORMHOLE-DATA,DATA,LET*,WHS,LAMBDA,FC-WORMHOLE,QUOTE,WORMHOLE-EVAL" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="RESTORE-FC-REPORT-SETTINGS">restore-fc-report-settings</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-restore-fc-report-settings" data-sym="RESTORE-FC-REPORT-SETTINGS" title="(defun restore-fc-report-settings ()
  (declare (xargs :guard t))
  (wormhole-eval &#39;fc-wormhole
                 &#39;(lambda (whs)
                    (let* ((data (wormhole-data whs))
...">restore-fc-report-settings</a>
  nil
  (declare (xargs <span class="keyword">:guard</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
  (<a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a> 'fc-wormhole
    '(lambda (whs)
      (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((data (<a class="sym-link system" href="basis-a.html#def-wormhole-data" data-sym="WORMHOLE-DATA">wormhole-data</a> whs)) (criteria-saved (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:criteria-saved</span> data)))
          (flyp-saved (cdr (<a class="sym-link system" href="axioms.html#def-assoc-eq" data-sym="ASSOC-EQ">assoc-eq</a> <span class="keyword">:report-on-the-flyp-saved</span> data))))
        (<a class="sym-link system" href="basis-a.html#def-set-wormhole-data" data-sym="SET-WORMHOLE-DATA">set-wormhole-data</a> whs
          (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:criteria</span> criteria-saved
            (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:report-on-the-flyp</span> flyp-saved data)))))
    nil))</pre>
  </div>

<div class="form-block function" id="def-proof-builder-assumptions" data-defines="PROOF-BUILDER-ASSUMPTIONS" data-references="LIST,GOVERNORS,DUMB-NEGATE-LIT,ADD-TO-SET-EQUAL,T,HYPS,UNION-EQUAL,COND,STATE-STACK,CURRENT-ADDR,CONC,GOVS-FLG,CONCL-FLG,DEFUN" data-part-name="PROOF-BUILDER-ASSUMPTIONS" data-part-args="STATE-STACK,CURRENT-ADDR,CONC,GOVS-FLG,CONCL-FLG" data-part-body="LIST,CURRENT-ADDR,GOVERNORS,CONC,DUMB-NEGATE-LIT,ADD-TO-SET-EQUAL,GOVS-FLG,T,HYPS,UNION-EQUAL,CONCL-FLG,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROOF-BUILDER-ASSUMPTIONS">proof-builder-assumptions</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-proof-builder-assumptions" data-sym="PROOF-BUILDER-ASSUMPTIONS" title="(defun proof-builder-assumptions
       (concl-flg govs-flg conc current-addr state-stack)
  (cond
   (concl-flg
    (union-equal (hyps t)
...">proof-builder-assumptions</a>
  (concl-flg govs-flg conc current-addr state-stack)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (concl-flg (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (govs-flg (<a class="sym-link system" href="axioms.html#def-add-to-set-equal" data-sym="ADD-TO-SET-EQUAL">add-to-set-equal</a> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> conc)
              (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr)))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit" data-sym="DUMB-NEGATE-LIT">dumb-negate-lit</a> conc))))))
    (govs-flg (<a class="sym-link system" href="axioms.html#def-union-equal" data-sym="UNION-EQUAL">union-equal</a> (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) (<a class="sym-link local-def" href="#def-governors" data-sym="GOVERNORS" title="(defun governors (term addr)
  (mv-let (term cl) (fetch-term-and-cl term addr nil) (declare (ignore term))
          cl))">governors</a> conc current-addr)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (hyps <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))</pre>
  </div>

<div class="form-block other" id="form-238" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> type-alist
  (&amp;optional concl-flg govs-flg fc-report-flg <a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a>)
  (when-goals (let ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
        (govs-flg (if (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            govs-flg
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> concl-flg))))
      (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fc-report-flg
          (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link local-def" href="#def-save-fc-report-settings" data-sym="SAVE-FC-REPORT-SETTINGS" title="(defun save-fc-report-settings ()
  (declare (xargs :guard t))
  (wormhole-eval &#39;fc-wormhole
                 &#39;(lambda (whs)
                    (let* ((data (wormhole-data whs))
...">save-fc-report-settings</a>)
            (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="basis-a.html#def-wormhole-eval" data-sym="WORMHOLE-EVAL">wormhole-eval</a> 'fc-wormhole
                '(lambda (whs)
                  (<a class="sym-link system" href="basis-a.html#def-set-wormhole-data" data-sym="SET-WORMHOLE-DATA">set-wormhole-data</a> whs
                    (<a class="sym-link system" href="axioms.html#def-put-assoc-eq" data-sym="PUT-ASSOC-EQ">put-assoc-eq</a> <span class="keyword">:criteria</span> '((<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (<a class="sym-link system" href="basis-a.html#def-wormhole-data" data-sym="WORMHOLE-DATA">wormhole-data</a> whs))))
                nil)
              (set-fc-report-on-the-fly <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
        (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (flg hyps-type-alist ign)
          (hyps-type-alist (<a class="sym-link local-def" href="#def-proof-builder-assumptions" data-sym="PROOF-BUILDER-ASSUMPTIONS" title="(defun proof-builder-assumptions
       (concl-flg govs-flg conc current-addr state-stack)
  (cond
   (concl-flg
    (union-equal (hyps t)
...">proof-builder-assumptions</a> concl-flg
              govs-flg
              conc
              current-addr
              state-stack)
            (make-pc-ens (pc-ens <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state)
            <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>
            state)
          (declare (ignore ign))
          (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> fc-report-flg (<a class="sym-link local-def" href="#def-restore-fc-report-settings" data-sym="RESTORE-FC-REPORT-SETTINGS" title="(defun restore-fc-report-settings ()
  (declare (xargs :guard t))
  (wormhole-eval &#39;fc-wormhole
                 &#39;(lambda (whs)
                    (let* ((data (wormhole-data whs))
...">restore-fc-report-settings</a>))
            (if flg
              (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                nil
                state
                nil
                (fms0 <span class="string">"*** Contradiction in the hypotheses! ***~%The S ~
                        command should complete this goal.~|"</span>))
              (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                nil
                state
                (hyps-type-alist <a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a>)
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (fms0 <span class="string">"~|Current type-alist, including forward chaining:~%"</span>)
                  (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> <a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> <span class="keyword">:raw</span>) (<a class="sym-link system" href="axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~x0~|"</span> hyps-type-alist))
                      (<a class="sym-link system" href="axioms.html#def-alistp" data-sym="ALISTP">alistp</a> (<a class="sym-link system" href="axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~x0~|"</span>
                          (alist-to-doublets (<a class="sym-link system" href="rewrite.html#def-decode-type-alist" data-sym="DECODE-TYPE-ALIST">decode-type-alist</a> hyps-type-alist))))
                      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="rewrite.html#def-print-type-alist" data-sym="PRINT-TYPE-ALIST">print-type-alist</a> hyps-type-alist <a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> nil)))
                    state))))))))))</pre>
  </div>

<div class="form-block other" id="form-239" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-help" data-sym="DEFINE-PC-HELP" title="(defmacro define-pc-help (name args &amp;rest body)
  `(define-pc-macro ,name ,args ,@(butlast body 1)
                    (pprogn ,(car (last body)) (value &#39;skip))))">define-pc-help</a> pot-lst
  (&amp;optional concl-flg govs-flg rawp)
  (when-goals (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((conc (conc <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)) (current-addr (current-addr <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))
        (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
        (govs-flg (if (cdr <a class="sym-link system" href="defuns.html#def-args" data-sym="ARGS">args</a>)
            govs-flg
            (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> concl-flg)))
        (assumptions (<a class="sym-link local-def" href="#def-proof-builder-assumptions" data-sym="PROOF-BUILDER-ASSUMPTIONS" title="(defun proof-builder-assumptions
       (concl-flg govs-flg conc current-addr state-stack)
  (cond
   (concl-flg
    (union-equal (hyps t)
...">proof-builder-assumptions</a> concl-flg
            govs-flg
            conc
            current-addr
            state-stack))
        (clause (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> (expand-assumptions assumptions)))
        (ens (make-pc-ens (pc-ens <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>) state))
        (clause-pts (enumerate-elements clause <span class="number">0</span>)))
      (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (contradictionp type-alist fc-pair-lst)
        (forward-chain-top 'pot-lst
          clause
          nil
          (ok-to-force-ens ens)
          nil
          wrld
          ens
          (<a class="sym-link system" href="axioms.html#def-match-free-override" data-sym="MATCH-FREE-OVERRIDE">match-free-override</a> wrld)
          state)
        (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (contradictionp (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (concl-flg)
              (fms0 <span class="string">"*** Contradiction (from forward-chaining, towards ~
                     building a pot-lst)! ***~|~#0~[The S command should ~
                     complete this goal.~|~/~]"</span>
                (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                    (if concl-flg
                      <span class="number">1</span>
                      <span class="number">0</span>))))))
          (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((rcnst (make-rcnst ens
                   wrld
                   state
                   <span class="keyword">:force-info</span> (if (ffnnamep-lst 'if clause)
                     'weak
                     <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                   <span class="keyword">:top-clause</span> clause
                   <span class="keyword">:current-clause</span> clause)))
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (step-limit contradictionp pot-lst)
                (setup-simplify-clause-pot-lst clause
                  (pts-to-ttree-lst clause-pts)
                  fc-pair-lst
                  type-alist
                  rcnst
                  wrld
                  state
                  <a class="sym-link system" href="axioms.html#def-_2Adefault-step-limit_2A" data-sym="*DEFAULT-STEP-LIMIT*">*default-step-limit*</a>)
                (declare (ignore step-limit))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (contradictionp (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      (concl-flg)
                      (fms0 <span class="string">"*** Contradiction from attempting to build a ~
                           pot-lst)! ***~|~#0~[The S command should complete ~
                           this goal.~|~/~]"</span>
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0
                            (if concl-flg
                              <span class="number">1</span>
                              <span class="number">0</span>))))))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                      nil
                      state
                      (pot-lst rawp)
                      (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (fms0 <span class="string">"~|Current pot-lst:~%"</span>)
                        (<a class="sym-link system" href="axioms.html#def-prog2_24" data-sym="PROG2$">prog2$</a> (if rawp
                            (<a class="sym-link system" href="axioms.html#def-cw" data-sym="CW">cw</a> <span class="string">"~x0~|"</span> pot-lst)
                            (<a class="sym-link system" href="rewrite.html#def-print-pot-lst" data-sym="PRINT-POT-LST">print-pot-lst</a> pot-lst nil))
                          state)))))))))))))</pre>
  </div>

<div class="form-block other" id="form-240" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> print-main
  nil
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(print (<a class="sym-link system" href="axioms.html#def-caddr" data-sym="CADDR">caddr</a> (event-name-and-types-and-raw-term (state-stack))))))</pre>
  </div>

<div class="form-block other" id="form-241" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> pso nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(lisp (pso))))</pre>
  </div>

<div class="form-block other" id="form-242" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> psog nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(lisp (psog))))</pre>
  </div>

<div class="form-block other" id="form-243" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> pso! nil (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> '(lisp (pso!))))</pre>
  </div>

<div class="form-block other" id="form-244" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> <a class="sym-link local-def" href="#def-acl2-wrap" data-sym="ACL2-WRAP" title="(defmacro acl2-wrap (x) x)">acl2-wrap</a> (x) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(lisp ,X)))</pre>
  </div>

<div class="form-block macro" id="def-acl2-wrap" data-defines="ACL2-WRAP" data-references="X,DEFMACRO" typeof="Code">
    <div class="form-header"><span class="form-name" property="name" data-sym="ACL2-WRAP">acl2-wrap</span><span class="form-type">macro</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defmacro" data-sym="DEFMACRO">defmacro</a> <a class="sym-link local-def" href="#def-acl2-wrap" data-sym="ACL2-WRAP" title="(defmacro acl2-wrap (x) x)">acl2-wrap</a> (x) x)</pre>
  </div>

<div class="form-block other" id="form-246" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> check-proved-goal
  (goal-name cmd)
  (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> goal-name (goal-names (goals)))
    (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
      'check-proved
      <span class="string">"The command ~x0 failed to prove the goal ~x1."</span>
      cmd
      goal-name)
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'succeed)))</pre>
  </div>

<div class="form-block other" id="form-247" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> check-proved
  (x)
  (when-goals-trip (let ((goal-name (goal-name)))
      (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(do-all ,X (quiet (check-proved-goal ,GOAL-NAME ,X)))))))</pre>
  </div>

<div class="form-block other" id="form-248" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> forwardchain
  (hypn &amp;optional hints quiet-flg)
  (when-goals-trip (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((hyps (hyps)) (<a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a> (<a class="sym-link system" href="axioms.html#def-length" data-sym="LENGTH">length</a> hyps)))
      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> hyps) (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              'forwardchain
              <span class="string">"The are no top-level hypotheses.  Hence it makes no sense to ~
              forward chain here."</span>)
            (declare (ignore erp val))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'fail)))
        ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (integerp hypn) (&lt; <span class="number">0</span> hypn) (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> hypn <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)) (let ((hyp (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> hypn) hyps)))
            (<a class="sym-link system" href="basis-a.html#def-case-match" data-sym="CASE-MATCH">case-match</a> hyp
              (('<a class="sym-link system" href="axioms.html#def-implies" data-sym="IMPLIES">implies</a> ant consequent) (let ((instr `(protect (claim ,CONSEQUENT <span class="number">0</span> <span class="keyword">:do-not-flatten</span> <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)
                       (drop ,HYPN)
                       change-goal
                       (demote ,HYPN)
                       (claim ,ANT
                         ,@(IF HINTS
      &#39;(:HINTS HINTS)
      NIL))
                       (demote ,LEN)
                       (check-proved (s <span class="keyword">:backchain-limit</span> <span class="number">0</span> <span class="keyword">:in-theory</span> (theory 'minimal-theory))))))
                  (if quiet-flg
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> 'quiet instr))
                    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> instr))))
              (&amp; (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
                  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                    'forwardchain
                    <span class="string">"The ~n0 hypothesis~|  ~x1~|is not of the form (implies x ~
                     y)."</span>
                    (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> hypn)
                    (untrans0 (<a class="sym-link system" href="axioms.html#def-nth" data-sym="NTH">nth</a> (<a class="sym-link system" href="axioms.html#def-1-" data-sym="1-">1-</a> hypn) hyps) <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (abbreviations)))
                  (declare (ignore erp val))
                  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'fail))))))
        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp val state)
            (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
              'forwardchain
              <span class="string">"The index ~x0 is not a valid index into the hypothesis list.  ~
                The valid indices are the integers from 1 to ~x1."</span>
              hypn
              <a class="sym-link system" href="axioms.html#def-len" data-sym="LEN">len</a>)
            (declare (ignore erp val))
            (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> 'fail)))))))</pre>
  </div>

<div class="form-block other" id="form-249" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> bdd
  (&amp;rest kw-listp)
  (let ((bdd-hint (if (<a class="sym-link system" href="axioms.html#def-assoc-keyword" data-sym="ASSOC-KEYWORD">assoc-keyword</a> <span class="keyword">:vars</span> kw-listp)
         kw-listp
         (<a class="sym-link system" href="axioms.html#def-list_2A" data-sym="LIST*">list*</a> <span class="keyword">:vars</span> nil kw-listp))))
    (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(<span class="keyword">:prove</span> <span class="keyword">:hints</span> ((<span class="string">"Goal"</span> <span class="keyword">:bdd</span> ,BDD-HINT))))))</pre>
  </div>

<div class="form-block other" id="form-250" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> runes
  (&amp;optional flg)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(print (<a class="sym-link system" href="rewrite.html#def-merge-sort-runes" data-sym="MERGE-SORT-RUNES">merge-sort-runes</a> (all-runes-in-ttree (,(IF FLG
     &#39;TAG-TREE
     &#39;LOCAL-TAG-TREE))
          nil)))))</pre>
  </div>

<div class="form-block other" id="form-251" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> lemmas-used
  (&amp;optional flg)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(runes ,FLG)))</pre>
  </div>

<div class="form-block function" id="def-goal-terms" data-defines="GOAL-TERMS" data-references="CDR,CAR,GOAL,ACCESS,MAKE-IMPLICATION,CONS,ENDP,IF,GOALS,DEFUN" data-part-name="GOAL-TERMS" data-part-args="GOALS" data-part-body="CDR,GOAL-TERMS,CAR,GOAL,ACCESS,MAKE-IMPLICATION,CONS,GOALS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GOAL-TERMS">goal-terms</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-goal-terms" data-sym="GOAL-TERMS" title="(defun goal-terms (goals)
  (if (endp goals)
      nil
      (cons
       (make-implication (access goal (car goals) :hyps)
...">goal-terms</a>
  (goals)
  (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> goals)
    nil
    (cons (make-implication (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:hyps</span>)
        (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:conc</span>))
      (<a class="sym-link local-def" href="#def-goal-terms" data-sym="GOAL-TERMS" title="(defun goal-terms (goals)
  (if (endp goals)
      nil
      (cons
       (make-implication (access goal (car goals) :hyps)
...">goal-terms</a> (cdr goals)))))</pre>
  </div>

<div class="form-block function" id="def-wrap1-aux1" data-defines="WRAP1-AUX1" data-references="T,CONS,CDR,CAR,GOAL,ACCESS,MEMBER-EQUAL,REVERSE,MV,ENDP,COND,REMOVED-GOALS,KEPT-GOALS,ALL-GOALS,KEPT-GOAL-NAMES,DEFUN" data-part-name="WRAP1-AUX1" data-part-args="REMOVED-GOALS,KEPT-GOALS,ALL-GOALS,KEPT-GOAL-NAMES" data-part-body="T,CONS,CDR,WRAP1-AUX1,KEPT-GOAL-NAMES,CAR,GOAL,ACCESS,MEMBER-EQUAL,REMOVED-GOALS,KEPT-GOALS,REVERSE,MV,ALL-GOALS,ENDP,COND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRAP1-AUX1">wrap1-aux1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wrap1-aux1" data-sym="WRAP1-AUX1" title="(defun wrap1-aux1 (kept-goal-names all-goals kept-goals removed-goals)
  (cond ((endp all-goals) (mv (reverse kept-goals) (reverse removed-goals)))
        ((member-equal (access goal (car all-goals) :goal-name)
                       kept-goal-names)
         (wrap1-aux1 kept-goal-names (cdr all-goals)
...">wrap1-aux1</a>
  (kept-goal-names all-goals kept-goals removed-goals)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> all-goals) (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> kept-goals) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> removed-goals)))
    ((<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car all-goals) <span class="keyword">:goal-name</span>)
       kept-goal-names) (<a class="sym-link local-def" href="#def-wrap1-aux1" data-sym="WRAP1-AUX1" title="(defun wrap1-aux1 (kept-goal-names all-goals kept-goals removed-goals)
  (cond ((endp all-goals) (mv (reverse kept-goals) (reverse removed-goals)))
        ((member-equal (access goal (car all-goals) :goal-name)
                       kept-goal-names)
         (wrap1-aux1 kept-goal-names (cdr all-goals)
...">wrap1-aux1</a> kept-goal-names
        (cdr all-goals)
        (cons (car all-goals) kept-goals)
        removed-goals))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link local-def" href="#def-wrap1-aux1" data-sym="WRAP1-AUX1" title="(defun wrap1-aux1 (kept-goal-names all-goals kept-goals removed-goals)
  (cond ((endp all-goals) (mv (reverse kept-goals) (reverse removed-goals)))
        ((member-equal (access goal (car all-goals) :goal-name)
                       kept-goal-names)
         (wrap1-aux1 kept-goal-names (cdr all-goals)
...">wrap1-aux1</a> kept-goal-names
        (cdr all-goals)
        kept-goals
        (cons (car all-goals) removed-goals)))))</pre>
  </div>

<div class="form-block function" id="def-wrap1-aux2" data-defines="WRAP1-AUX2" data-references="CONS,CDR,<=,EQ,CONSP,AND,ACCESS,GOAL-NAME,CAR,GOAL,LET*,REVERSE,MV,ENDP,IF,REMOVED-GOALS,KEPT-GOALS,GOALS,INDEX,SYM,DEFUN" data-part-name="WRAP1-AUX2" data-part-args="REMOVED-GOALS,KEPT-GOALS,GOALS,INDEX,SYM" data-part-body="CONS,WRAP1-AUX2,CDR,INDEX,<=,SYM,EQ,CONSP,AND,ACCESS,GOAL-NAME,CAR,GOAL,LET*,REMOVED-GOALS,KEPT-GOALS,REVERSE,MV,GOALS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="WRAP1-AUX2">wrap1-aux2</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-wrap1-aux2" data-sym="WRAP1-AUX2" title="(defun wrap1-aux2 (sym index goals kept-goals removed-goals)
  (if (endp goals)
      (mv (reverse kept-goals) (reverse removed-goals))
      (let* ((goal (car goals)) (goal-name (access goal goal :goal-name)))
        (if (and (consp goal-name) (eq sym (car goal-name))
...">wrap1-aux2</a>
  (sym index goals kept-goals removed-goals)
  (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> goals)
    (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> kept-goals) (<a class="sym-link system" href="axioms.html#def-reverse" data-sym="REVERSE">reverse</a> removed-goals))
    (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((goal (car goals)) (goal-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal goal <span class="keyword">:goal-name</span>)))
      (if (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp goal-name)
          (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> sym (car goal-name))
          (<a class="sym-link system" href="axioms.html#def-_3C_3D" data-sym="&lt;=">&lt;=</a> index (cdr goal-name)))
        (<a class="sym-link local-def" href="#def-wrap1-aux2" data-sym="WRAP1-AUX2" title="(defun wrap1-aux2 (sym index goals kept-goals removed-goals)
  (if (endp goals)
      (mv (reverse kept-goals) (reverse removed-goals))
      (let* ((goal (car goals)) (goal-name (access goal goal :goal-name)))
        (if (and (consp goal-name) (eq sym (car goal-name))
...">wrap1-aux2</a> sym
          index
          (cdr goals)
          kept-goals
          (cons (car goals) removed-goals))
        (<a class="sym-link local-def" href="#def-wrap1-aux2" data-sym="WRAP1-AUX2" title="(defun wrap1-aux2 (sym index goals kept-goals removed-goals)
  (if (endp goals)
      (mv (reverse kept-goals) (reverse removed-goals))
      (let* ((goal (car goals)) (goal-name (access goal goal :goal-name)))
        (if (and (consp goal-name) (eq sym (car goal-name))
...">wrap1-aux2</a> sym
          index
          (cdr goals)
          (cons (car goals) kept-goals)
          removed-goals)))))</pre>
  </div>

<div class="form-block other" id="form-255" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-primitive" data-sym="DEFINE-PC-PRIMITIVE" title="(defmacro define-pc-primitive (raw-name formals &amp;rest body)
  (let ((name (make-official-pc-command raw-name)))
    `(progn
      ,(pc-primitive-defun-form raw-name name formals nil body)
      (add-pc-command ,name &#39;primitive))))">define-pc-primitive</a> wrap1
  (&amp;optional kept-goal-names)
  (<a class="sym-link system" href="axioms.html#def-let_2A" data-sym="LET*">let*</a> ((current-goal (car goals)) (current-goal-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal current-goal <span class="keyword">:goal-name</span>)))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> kept-goal-names)) (print-no-change2 <span class="string">"The (optional) argument to wrap1 must be a true list of goal names.  ~
        ~x0 is thus illegal."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 kept-goal-names))))
      ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> kept-goal-names)
         (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp current-goal-name)
             (symbolp (car current-goal-name))
             (integerp (cdr current-goal-name))))) (print-no-change2 <span class="string">"The current goal&#39;s name, ~x0, is not of the form (SYMBOL . N) for ~
        integer N."</span>
          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 current-goal-name))))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (kept-goals removed-goals)
          (if kept-goal-names
            (<a class="sym-link local-def" href="#def-wrap1-aux1" data-sym="WRAP1-AUX1" title="(defun wrap1-aux1 (kept-goal-names all-goals kept-goals removed-goals)
  (cond ((endp all-goals) (mv (reverse kept-goals) (reverse removed-goals)))
        ((member-equal (access goal (car all-goals) :goal-name)
                       kept-goal-names)
         (wrap1-aux1 kept-goal-names (cdr all-goals)
...">wrap1-aux1</a> kept-goal-names (cdr goals) nil nil)
            (<a class="sym-link local-def" href="#def-wrap1-aux2" data-sym="WRAP1-AUX2" title="(defun wrap1-aux2 (sym index goals kept-goals removed-goals)
  (if (endp goals)
      (mv (reverse kept-goals) (reverse removed-goals))
      (let* ((goal (car goals)) (goal-name (access goal goal :goal-name)))
        (if (and (consp goal-name) (eq sym (car goal-name))
...">wrap1-aux2</a> (car current-goal-name)
              (cdr current-goal-name)
              (cdr goals)
              nil
              nil))
          (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
              nil
              state
              (current-goal-name removed-goals)
              (if removed-goals
                (fms0 <span class="string">"~|Conjoining the following goals into the current ~
                         goal, ~x0:~|  ~X1n~%"</span>
                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 current-goal-name)
                    (cons #\1 (goal-names removed-goals))
                    (cons #\n nil)))
                (fms0 <span class="string">"~|NOTE (wrap1): There are no goals to conjoin into the ~
                       current goal, but we proceed anyhow.~%"</span>)))
            (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> (change-pc-state pc-state
                <span class="keyword">:goals</span> (cons (<a class="sym-link system" href="basis-a.html#def-change" data-sym="CHANGE">change</a> goal
                    current-goal
                    <span class="keyword">:conc</span> (<a class="sym-link system" href="axioms.html#def-conjoin" data-sym="CONJOIN">conjoin</a> (<a class="sym-link local-def" href="#def-goal-terms" data-sym="GOAL-TERMS" title="(defun goal-terms (goals)
  (if (endp goals)
      nil
      (cons
       (make-implication (access goal (car goals) :hyps)
...">goal-terms</a> (cons current-goal removed-goals)))
                    <span class="keyword">:hyps</span> nil
                    <span class="keyword">:current-addr</span> nil)
                  kept-goals))
              state)))))))</pre>
  </div>

<div class="form-block other" id="form-256" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> wrap
  (&amp;rest instrs)
  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> instrs) (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (print-no-change <span class="string">"Wrap takes at least one argument."</span>)
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> <span class="keyword">:fail</span>)))
    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((goal-names (goal-names (goals <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))
        (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(sequence ((do-all ,@INSTRS) (quiet (wrap1 ,GOAL-NAMES))
              (lisp (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> proof-builder
                  nil
                  state
                  nil
                  (let ((new-current-goal-name (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car (goals)) <span class="keyword">:goal-name</span>)) (state-stack (state-stack)))
                    (when-goals (fms0 (if (<a class="sym-link system" href="axioms.html#def-member-equal" data-sym="MEMBER-EQUAL">member-equal</a> new-current-goal-name ',GOAL-NAMES)
                          <span class="string">"~|~%NOTE: Created no new goals.  Current ~
                                     goal:~%  ~X0n~|"</span>
                          <span class="string">"~|~%NOTE: Created ONLY one new goal, which ~
                                   is the current goal:~%  ~X0n~|"</span>)
                        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 new-current-goal-name) (cons #\n nil))))))))
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
            nil
            nil
            <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>))))))</pre>
  </div>

<div class="form-block other" id="form-257" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-atomic-macro" data-sym="DEFINE-PC-ATOMIC-MACRO" title="(defmacro define-pc-atomic-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;atomic-macro raw-name formals body))">define-pc-atomic-macro</a> wrap-induct
  (&amp;optional raw-term)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (if raw-term
      `(wrap (induct ,RAW-TERM))
      `(wrap induct))))</pre>
  </div>

<div class="form-block other" id="form-258" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> finish-error
  (instrs)
  (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
    'finish
    <span class="string">"~%The following instruction list created at least one subgoal:~|~x0~|"</span>
    instrs))</pre>
  </div>

<div class="form-block other" id="form-259" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> finish
  (&amp;rest instrs)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(then (check-proved (do-strict ,@INSTRS))
      (finish-error ,INSTRS)
      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>)))</pre>
  </div>

<div class="form-block other" id="form-260" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link local-def" href="#def-define-pc-macro" data-sym="DEFINE-PC-MACRO" title="(defmacro define-pc-macro (raw-name formals &amp;rest body)
  (define-pc-meta-or-macro-fn &#39;macro raw-name formals body))">define-pc-macro</a> geneqv
  (&amp;optional with-runes-p)
  (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> `(print (<a class="sym-link system" href="rewrite.html#def-show-geneqv" data-sym="SHOW-GENEQV">show-geneqv</a> (<a class="sym-link local-def" href="#def-geneqv-at-subterm-top" data-sym="GENEQV-AT-SUBTERM-TOP" title="(defun geneqv-at-subterm-top (term addr ens wrld)
  (geneqv-at-subterm term addr *geneqv-iff* nil ens wrld))">geneqv-at-subterm-top</a> (conc)
          (current-addr)
          (make-pc-ens (pc-ens) state)
          (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
        ',WITH-RUNES-P))))</pre>
  </div>

<div class="form-block function" id="def-goals-to-clause-list" data-defines="GOALS-TO-CLAUSE-LIST" data-references="CDR,LIST,CAR,GOAL,ACCESS,DUMB-NEGATE-LIT-LST,APPEND,CONS,ENDP,IF,GOALS,DEFUN" data-used-by="PROOF-BUILDER-CLAUSE-LIST" data-part-name="GOALS-TO-CLAUSE-LIST" data-part-args="GOALS" data-part-body="CDR,GOALS-TO-CLAUSE-LIST,LIST,CAR,GOAL,ACCESS,DUMB-NEGATE-LIT-LST,APPEND,CONS,GOALS,ENDP,IF" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="GOALS-TO-CLAUSE-LIST">goals-to-clause-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-goals-to-clause-list" data-sym="GOALS-TO-CLAUSE-LIST" title="(defun goals-to-clause-list (goals)
  (if (endp goals)
      nil
      (cons
       (append (dumb-negate-lit-lst (access goal (car goals) :hyps))
...">goals-to-clause-list</a>
  (goals)
  (if (<a class="sym-link system" href="axioms.html#def-endp" data-sym="ENDP">endp</a> goals)
    nil
    (cons (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:hyps</span>))
        (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> goal (car goals) <span class="keyword">:conc</span>)))
      (<a class="sym-link local-def" href="#def-goals-to-clause-list" data-sym="GOALS-TO-CLAUSE-LIST" title="(defun goals-to-clause-list (goals)
  (if (endp goals)
      nil
      (cons
       (append (dumb-negate-lit-lst (access goal (car goals) :hyps))
...">goals-to-clause-list</a> (cdr goals)))))</pre>
  </div>

<div class="form-block function" id="def-proof-builder-clause-list" data-defines="PROOF-BUILDER-CLAUSE-LIST" data-references="GOALS,GOALS-TO-CLAUSE-LIST,STATE,DEFUN" data-used-by="PROOF-BUILDER-CL-PROC-1" data-part-name="PROOF-BUILDER-CLAUSE-LIST" data-part-args="STATE" data-part-body="GOALS,GOALS-TO-CLAUSE-LIST" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROOF-BUILDER-CLAUSE-LIST">proof-builder-clause-list</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-proof-builder-clause-list" data-sym="PROOF-BUILDER-CLAUSE-LIST" title="(defun proof-builder-clause-list (state) (goals-to-clause-list (goals)))">proof-builder-clause-list</a>
  (state)
  (<a class="sym-link local-def" href="#def-goals-to-clause-list" data-sym="GOALS-TO-CLAUSE-LIST" title="(defun goals-to-clause-list (goals)
  (if (endp goals)
      nil
      (cons
       (append (dumb-negate-lit-lst (access goal (car goals) :hyps))
...">goals-to-clause-list</a> (goals)))</pre>
  </div>

<div class="form-block function" id="def-ttree-to-summary-data" data-defines="TTREE-TO-SUMMARY-DATA" data-references="BY-NAMES-IN-TTREE,USE-NAMES-IN-TTREE,APPEND,ALL-RUNES-IN-TTREE,MAKE-SUMMARY-DATA,CL-PROC-DATA-IN-TTREE,CL-PROC-FNS,BY-NAMES,USE-NAMES,MV-LET,AND,TTREE,DEFUN" data-used-by="PROOF-BUILDER-CL-PROC" data-part-name="TTREE-TO-SUMMARY-DATA" data-part-args="TTREE" data-part-body="BY-NAMES-IN-TTREE,USE-NAMES-IN-TTREE,APPEND,ALL-RUNES-IN-TTREE,MAKE-SUMMARY-DATA,CL-PROC-DATA-IN-TTREE,CL-PROC-FNS,BY-NAMES,USE-NAMES,MV-LET,TTREE,AND" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="TTREE-TO-SUMMARY-DATA">ttree-to-summary-data</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-ttree-to-summary-data" data-sym="TTREE-TO-SUMMARY-DATA" title="(defun ttree-to-summary-data (ttree)
  (and ttree
       (mv-let (use-names by-names cl-proc-fns)
               (cl-proc-data-in-ttree ttree nil)
               (make-summary-data :runes (all-runes-in-ttree ttree nil)
...">ttree-to-summary-data</a>
  (ttree)
  (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> ttree
    (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (use-names by-names cl-proc-fns)
      (<a class="sym-link system" href="history-management.html#def-cl-proc-data-in-ttree" data-sym="CL-PROC-DATA-IN-TTREE">cl-proc-data-in-ttree</a> ttree nil)
      (make-summary-data <span class="keyword">:runes</span> (all-runes-in-ttree ttree nil)
        <span class="keyword">:use-names</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> use-names (<a class="sym-link system" href="history-management.html#def-use-names-in-ttree" data-sym="USE-NAMES-IN-TTREE">use-names-in-ttree</a> ttree nil))
        <span class="keyword">:by-names</span> (<a class="sym-link system" href="axioms.html#def-append" data-sym="APPEND">append</a> by-names (<a class="sym-link system" href="history-management.html#def-by-names-in-ttree" data-sym="BY-NAMES-IN-TTREE">by-names-in-ttree</a> ttree nil))
        <span class="keyword">:clause-processor-fns</span> cl-proc-fns))))</pre>
  </div>

<div class="form-block function" id="def-proof-builder-cl-proc-1" data-defines="PROOF-BUILDER-CL-PROC-1" data-references="STATE-STACK,SILENT-ERROR,PROOF-BUILDER-CLAUSE-LIST,SS-ALIST,SAVE-FN,RETRIEVE,QUASIQUOTE,ERROR,EXPLODE-ATOM,COERCE,STRING,CONCATENATE,INTERN,NAME,OR,SIGNAL,UNTRANSLATE,PC-MAIN,PC-VAL,NEXT-PC-ENABLED-ARRAY-SUFFIX,CONS,LIST,FMS0,IO?,PC-ASSIGN,PPROGN,CLAUSE-LIST,ERP,MV-LET,PC-OUTPUT,STATE-GLOBAL-LET*,SUBSETP-EQ,OUTPUTP,PROOF-BUILDER,PROOF-TREE,PROVE,UNION-EQ,CHK-INHIBIT-OUTPUT-LST,F-GET-GLOBAL,VALUE,CADDAR,INHIBIT-OUTPUT-LST,CADAR,CAAR,MAKE-PRETTY-PC-COMMAND,EQ,CONSP,AND,NEW-INHIBIT-OUTPUT-LST,ER-LET*,PC-DEPTH,PC-VALUE,1+,NEW-PC-DEPTH,W,WRLD,LAST,CAR,BUTLAST,DUMB-NEGATE-LIT-LST,MAKE-IMPLICATION,TERM,T,TRUE-LISTP,NOT,SOFT,ER,NULL,COND,PROOF-BUILDER-CL-PROC,QUOTE,CTX,LET,STATE,INSTR-LIST,CL,DEFUN" data-used-by="PROOF-BUILDER-CL-PROC" data-part-name="PROOF-BUILDER-CL-PROC-1" data-part-args="STATE,INSTR-LIST,CL" data-part-body="STATE-STACK,SILENT-ERROR,PROOF-BUILDER-CLAUSE-LIST,SS-ALIST,SAVE-FN,RETRIEVE,QUASIQUOTE,ERROR,EXPLODE-ATOM,COERCE,STRING,CONCATENATE,INTERN,NAME,OR,SIGNAL,UNTRANSLATE,PC-MAIN,PC-VAL,NEXT-PC-ENABLED-ARRAY-SUFFIX,CONS,LIST,FMS0,IO?,PC-ASSIGN,PPROGN,CLAUSE-LIST,ERP,MV-LET,PC-OUTPUT,STATE-GLOBAL-LET*,SUBSETP-EQ,OUTPUTP,PROOF-BUILDER,PROOF-TREE,PROVE,UNION-EQ,CHK-INHIBIT-OUTPUT-LST,F-GET-GLOBAL,VALUE,CADDAR,INHIBIT-OUTPUT-LST,CADAR,CAAR,MAKE-PRETTY-PC-COMMAND,EQ,CONSP,AND,NEW-INHIBIT-OUTPUT-LST,ER-LET*,PC-DEPTH,PC-VALUE,1+,NEW-PC-DEPTH,STATE,W,WRLD,LAST,CAR,BUTLAST,DUMB-NEGATE-LIT-LST,MAKE-IMPLICATION,TERM,T,INSTR-LIST,TRUE-LISTP,NOT,SOFT,ER,CL,NULL,COND,PROOF-BUILDER-CL-PROC,QUOTE,CTX,LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROOF-BUILDER-CL-PROC-1">proof-builder-cl-proc-1</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-proof-builder-cl-proc-1" data-sym="PROOF-BUILDER-CL-PROC-1" title="(defun proof-builder-cl-proc-1 (cl instr-list state)
  (let ((ctx &#39;proof-builder-cl-proc))
    (cond
     ((null cl) (er soft ctx &quot;There is no legal way to prove a goal of NIL!&quot;))
     ((not (true-listp instr-list))
...">proof-builder-cl-proc-1</a>
  (cl instr-list state)
  (let ((ctx '<a class="sym-link local-def" href="#def-proof-builder-cl-proc" data-sym="PROOF-BUILDER-CL-PROC" title="(defun proof-builder-cl-proc (cl instr-list state)
  (mv-let (erp clause-list/state-stack state)
          (proof-builder-cl-proc-1 cl instr-list state)
          (cond (erp (mv erp clause-list/state-stack state nil))
                (t
...">proof-builder-cl-proc</a>))
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> cl) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"There is no legal way to prove a goal of NIL!"</span>))
      ((<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> instr-list)) (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
          ctx
          <span class="string">"The value of the :INSTRUCTIONS hint must be a true ~
           (null-terminated) list.  The value ~x0 is thus illegal."</span>
          instr-list))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (let ((term (make-implication (<a class="sym-link system" href="basis-b.html#def-dumb-negate-lit-lst" data-sym="DUMB-NEGATE-LIT-LST">dumb-negate-lit-lst</a> (<a class="sym-link system" href="axioms.html#def-butlast" data-sym="BUTLAST">butlast</a> cl <span class="number">1</span>))
               (car (<a class="sym-link system" href="axioms.html#def-last" data-sym="LAST">last</a> cl)))) (wrld (<a class="sym-link system" href="axioms.html#def-w" data-sym="W">w</a> state))
            (new-pc-depth (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (pc-value pc-depth))))
          (<a class="sym-link system" href="basis-b.html#def-er-let_2A" data-sym="ER-LET*">er-let*</a> ((new-inhibit-output-lst (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp instr-list)
                    (<a class="sym-link system" href="axioms.html#def-true-listp" data-sym="TRUE-LISTP">true-listp</a> (car instr-list))
                    (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (make-pretty-pc-command (<a class="sym-link system" href="axioms.html#def-caar" data-sym="CAAR">caar</a> instr-list)) <span class="keyword">:comment</span>)
                    (<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-cadar" data-sym="CADAR">cadar</a> instr-list) 'inhibit-output-lst)) (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-eq" data-sym="EQ">eq</a> (<a class="sym-link system" href="axioms.html#def-caddar" data-sym="CADDAR">caddar</a> instr-list) <span class="keyword">:same</span>) (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state)))
                     (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="basis-b.html#def-chk-inhibit-output-lst" data-sym="CHK-INHIBIT-OUTPUT-LST">chk-inhibit-output-lst</a> (<a class="sym-link system" href="axioms.html#def-caddar" data-sym="CADDAR">caddar</a> instr-list)
                         <span class="keyword">:instructions</span> state))))
                 (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-union-eq" data-sym="UNION-EQ">union-eq</a> '(<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> proof-tree proof-builder)
                       (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'inhibit-output-lst state)))))) (outputp (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link system" href="axioms.html#def-not" data-sym="NOT">not</a> (<a class="sym-link system" href="axioms.html#def-subsetp-eq" data-sym="SUBSETP-EQ">subsetp-eq</a> '(<a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a> proof-builder proof-tree)
                      new-inhibit-output-lst)))))
            (<a class="sym-link system" href="axioms.html#def-state-global-let_2A" data-sym="STATE-GLOBAL-LET*">state-global-let*</a> ((inhibit-output-lst new-inhibit-output-lst) (pc-output (<a class="sym-link system" href="axioms.html#def-f-get-global" data-sym="F-GET-GLOBAL">f-get-global</a> 'pc-output state)))
              (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp clause-list state)
                (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (pc-assign pc-depth new-pc-depth)
                  (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (outputp (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> <a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a>
                        nil
                        state
                        (new-pc-depth)
                        (fms0 <span class="string">"~|~%[[~x0&gt; Executing ~
                                            proof-builder instructions]]~%~%"</span>
                          (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 new-pc-depth)))))
                    (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                  (pc-assign next-pc-enabled-array-suffix
                    (<a class="sym-link system" href="axioms.html#def-1_2B" data-sym="1+">1+</a> (pc-value next-pc-enabled-array-suffix)))
                  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp pc-val state)
                    (pc-main term
                      (untranslate term <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> wrld)
                      nil
                      nil
                      instr-list
                      '(signal <a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a>)
                      <a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a>
                      nil
                      state)
                    (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (outputp (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> <a class="sym-link system" href="prove.html#def-prove" data-sym="PROVE">prove</a>
                            nil
                            state
                            (new-pc-depth)
                            (fms0 <span class="string">"~|~%[[&lt;~x0 Completed ~
                                                 proof-builder ~
                                                 instructions]]~%"</span>
                              (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 new-pc-depth)))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> state))
                      (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> ((<a class="sym-link system" href="axioms.html#def-or" data-sym="OR">or</a> erp (<a class="sym-link system" href="axioms.html#def-null" data-sym="NULL">null</a> pc-val)) (let ((name (<a class="sym-link system" href="axioms.html#def-intern" data-sym="INTERN">intern</a> (<a class="sym-link system" href="axioms.html#def-concatenate" data-sym="CONCATENATE">concatenate</a> '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>
                                   <span class="string">"ERROR"</span>
                                   (coerce (<a class="sym-link system" href="axioms.html#def-explode-atom" data-sym="EXPLODE-ATOM">explode-atom</a> new-pc-depth <span class="number">10</span>) '<a class="sym-link system" href="axioms.html#def-string" data-sym="STRING">string</a>))
                                 <span class="string">"KEYWORD"</span>)))
                            (<a class="sym-link system" href="axioms.html#def-pprogn" data-sym="PPROGN">pprogn</a> (<a class="sym-link system" href="basis-a.html#def-io_3F" data-sym="IO?">io?</a> error
                                nil
                                state
                                (name)
                                (fms0 <span class="string">"~%Saving proof-builder error ~
                                            state; see :DOC instructions.  To ~
                                            retrieve:~|~x0"</span>
                                  (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> (cons #\0 `(<a class="sym-link local-def" href="#def-retrieve" data-sym="RETRIEVE" title="(defmacro retrieve (&amp;optional name) `(retrieve-fn &#39;,name state))">retrieve</a> ,NAME)))))
                              (<a class="sym-link local-def" href="#def-save-fn" data-sym="SAVE-FN" title="(defun save-fn (name ss-alist state)
  (pprogn (assign-event-name-and-rule-classes name nil state)
          (pc-assign ss-alist
                     (put-assoc-eq name (cons (state-stack) (old-ss))
                                   ss-alist))))">save-fn</a> name (ss-alist) state)
                              (<a class="sym-link system" href="axioms.html#def-er" data-sym="ER">er</a> soft
                                ctx
                                <span class="string">"The above :INSTRUCTIONS hint failed.  ~
                                     For a discussion of ``failed&#39;&#39;, follow ~
                                     the link to the SEQUENCE command under ~
                                     :DOC proof-builder-commands."</span>))))
                        (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (<a class="sym-link local-def" href="#def-proof-builder-clause-list" data-sym="PROOF-BUILDER-CLAUSE-LIST" title="(defun proof-builder-clause-list (state) (goals-to-clause-list (goals)))">proof-builder-clause-list</a> state)))))))
                (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (silent-error state))
                  (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-value" data-sym="VALUE">value</a> (cons clause-list (state-stack)))))))))))))</pre>
  </div>

<div class="form-block function" id="def-proof-builder-cl-proc" data-defines="PROOF-BUILDER-CL-PROC" data-references="PC-STATE,ACCESS,TTREE-TO-SUMMARY-DATA,CONSP,AND,CDR,STATE-STACK,LET,CAR,T,MV,COND,PROOF-BUILDER-CL-PROC-1,CLAUSE-LIST/STATE-STACK,ERP,MV-LET,STATE,INSTR-LIST,CL,DEFUN" data-used-by="PROOF-BUILDER-CL-PROC-1" data-part-name="PROOF-BUILDER-CL-PROC" data-part-args="STATE,INSTR-LIST,CL" data-part-body="PC-STATE,ACCESS,TTREE-TO-SUMMARY-DATA,CONSP,AND,CDR,STATE-STACK,LET,CAR,T,MV,COND,INSTR-LIST,CL,PROOF-BUILDER-CL-PROC-1,STATE,CLAUSE-LIST/STATE-STACK,ERP,MV-LET" typeof="SoftwareSourceCode">
    <div class="form-header"><span class="form-name" property="name" data-sym="PROOF-BUILDER-CL-PROC">proof-builder-cl-proc</span><span class="form-type">function</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-defun" data-sym="DEFUN">defun</a> <a class="sym-link local-def" href="#def-proof-builder-cl-proc" data-sym="PROOF-BUILDER-CL-PROC" title="(defun proof-builder-cl-proc (cl instr-list state)
  (mv-let (erp clause-list/state-stack state)
          (proof-builder-cl-proc-1 cl instr-list state)
          (cond (erp (mv erp clause-list/state-stack state nil))
                (t
...">proof-builder-cl-proc</a>
  (cl instr-list state)
  (<a class="sym-link system" href="axioms.html#def-mv-let" data-sym="MV-LET">mv-let</a> (erp clause-list/state-stack state)
    (<a class="sym-link local-def" href="#def-proof-builder-cl-proc-1" data-sym="PROOF-BUILDER-CL-PROC-1" title="(defun proof-builder-cl-proc-1 (cl instr-list state)
  (let ((ctx &#39;proof-builder-cl-proc))
    (cond
     ((null cl) (er soft ctx &quot;There is no legal way to prove a goal of NIL!&quot;))
     ((not (true-listp instr-list))
...">proof-builder-cl-proc-1</a> cl instr-list state)
    (<a class="sym-link system" href="axioms.html#def-cond" data-sym="COND">cond</a> (erp (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp clause-list/state-stack state nil))
      (<a class="sym-link system" href="axioms.html#def-t" data-sym="T">t</a> (<a class="sym-link system" href="axioms.html#def-mv" data-sym="MV">mv</a> erp
          (car clause-list/state-stack)
          state
          (let ((state-stack (cdr clause-list/state-stack)))
            (<a class="sym-link system" href="axioms.html#def-and" data-sym="AND">and</a> (consp state-stack)
              (<a class="sym-link local-def" href="#def-ttree-to-summary-data" data-sym="TTREE-TO-SUMMARY-DATA" title="(defun ttree-to-summary-data (ttree)
  (and ttree
       (mv-let (use-names by-names cl-proc-fns)
               (cl-proc-data-in-ttree ttree nil)
               (make-summary-data :runes (all-runes-in-ttree ttree nil)
...">ttree-to-summary-data</a> (<a class="sym-link system" href="axioms.html#def-access" data-sym="ACCESS">access</a> pc-state (car state-stack) <span class="keyword">:tag-tree</span>)))))))))</pre>
  </div>

<div class="form-block other" id="form-266" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="defthm.html#def-define-trusted-clause-processor" data-sym="DEFINE-TRUSTED-CLAUSE-PROCESSOR">define-trusted-clause-processor</a> <a class="sym-link local-def" href="#def-proof-builder-cl-proc" data-sym="PROOF-BUILDER-CL-PROC" title="(defun proof-builder-cl-proc (cl instr-list state)
  (mv-let (erp clause-list/state-stack state)
          (proof-builder-cl-proc-1 cl instr-list state)
          (cond (erp (mv erp clause-list/state-stack state nil))
                (t
...">proof-builder-cl-proc</a> nil)</pre>
  </div>

<div class="form-block other" id="form-267" typeof="Code">
    <div class="form-header"><span class="form-type">other</span></div>
    <pre class="code" property="text">(<a class="sym-link system" href="axioms.html#def-add-custom-keyword-hint" data-sym="ADD-CUSTOM-KEYWORD-HINT">add-custom-keyword-hint</a> <span class="keyword">:instructions</span> (<a class="sym-link system" href="axioms.html#def-splice-keyword-alist" data-sym="SPLICE-KEYWORD-ALIST">splice-keyword-alist</a> <span class="keyword">:instructions</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:clause-processor</span> (<a class="sym-link system" href="axioms.html#def-list" data-sym="LIST">list</a> <span class="keyword">:function</span> '<a class="sym-link local-def" href="#def-proof-builder-cl-proc" data-sym="PROOF-BUILDER-CL-PROC" title="(defun proof-builder-cl-proc (cl instr-list state)
  (mv-let (erp clause-list/state-stack state)
          (proof-builder-cl-proc-1 cl instr-list state)
          (cond (erp (mv erp clause-list/state-stack state nil))
                (t
...">proof-builder-cl-proc</a> <span class="keyword">:hint</span> (<a class="sym-link system" href="axioms.html#def-kwote" data-sym="KWOTE">kwote</a> val)))
    keyword-alist))</pre>
  </div>


  </main>
  
<script>
// ACL2 Book HTML Documentation - Interactive Features
// Generated by cert2 - build2 system

// State
let activeFilter = null;
let activePartFilter = null;
let activeNameFilter = null;
let currentFontSize = 14;

// Theme management
function getStoredTheme() {
  return localStorage.getItem('acl2-theme') || 'dark';
}

function setTheme(theme) {
  if (theme === 'light') {
    document.documentElement.setAttribute('data-theme', 'light');
    document.getElementById('theme-toggle').textContent = '🌙';
  } else {
    document.documentElement.removeAttribute('data-theme');
    document.getElementById('theme-toggle').textContent = '☀️';
  }
  localStorage.setItem('acl2-theme', theme);
}

function toggleTheme() {
  const current = getStoredTheme();
  setTheme(current === 'dark' ? 'light' : 'dark');
}

// Font size management
function getStoredFontSize() {
  return parseInt(localStorage.getItem('acl2-fontsize') || '14', 10);
}

function setFontSize(size) {
  size = Math.max(10, Math.min(24, size)); // Clamp between 10-24
  currentFontSize = size;
  document.body.style.fontSize = size + 'px';
  localStorage.setItem('acl2-fontsize', size.toString());
}

function increaseFontSize() {
  setFontSize(currentFontSize + 2);
}

function decreaseFontSize() {
  setFontSize(currentFontSize - 2);
}

// Get all form blocks
function getFormBlocks() {
  return document.querySelectorAll('.form-block');
}

// Clear all filters
function clearFilter() {
  activeFilter = null;
  activePartFilter = null;
  activeNameFilter = null;
  getFormBlocks().forEach(b => {
    b.classList.remove('hidden', 'dimmed');
  });
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  const status = document.querySelector('.filter-status');
  status.classList.remove('active');
  // Slide name filter back to original position
  document.querySelector('.controls-left').style.transform = '';
  // Clear the name filter input
  const nameInput = document.getElementById('name-filter');
  if (nameInput) nameInput.value = '';
}

// Show filter status and slide name filter right
function showFilterStatus(text) {
  const status = document.querySelector('.filter-status');
  status.classList.add('active');
  status.querySelector('.filter-text').textContent = text;
  // Slide name filter to the right to make room
  setTimeout(() => {
    const statusWidth = status.offsetWidth;
    document.querySelector('.controls-left').style.transform = `translateX(${statusWidth + 15}px)`;
  }, 10);
}

// Filter to show only forms that define or reference a symbol
function filterBySymbol(symName, showUsedBy) {
  clearFilter();
  activeFilter = symName;
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines;
    const references = (block.dataset.references || '').split(',');
    const usedBy = (block.dataset.usedBy || '').split(',');
    
    let show = false;
    if (showUsedBy) {
      // Show forms that USE this symbol
      show = references.includes(symName) || definesName === symName;
    } else {
      // Show forms that this symbol USES
      show = usedBy.includes(symName) || definesName === symName;
    }
    
    if (show) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering by: ${symName} (${visibleCount} items)`);
}

// Filter by defthm part (term, hints, rule-classes, etc.)
function filterByPart(formId, partName) {
  clearFilter();
  activePartFilter = { formId, partName };
  
  // Get the part's referenced symbols
  // data-part-term becomes dataset.partTerm, data-part-hints becomes dataset.partHints, etc.
  const block = document.getElementById(formId);
  const datasetKey = 'part' + partName.charAt(0).toUpperCase() + partName.slice(1).replace(/-([a-z])/g, (g) => g[1].toUpperCase());
  const partData = block.dataset[datasetKey];
  if (!partData) return;
  
  const partSyms = partData.split(',').filter(s => s);
  
  // Highlight the button
  block.querySelector(`.part-btn[data-part="${partName}"]`).classList.add('active');
  
  // Hide forms not referenced by this part
  getFormBlocks().forEach(b => {
    const definesName = b.dataset.defines;
    if (b.id === formId || partSyms.includes(definesName)) {
      b.classList.remove('hidden');
    } else {
      b.classList.add('hidden');
    }
  });
  
  // Update status
  showFilterStatus(`Filtering ${formId} :${partName} (${partSyms.length} references)`);
}

// Filter by name (substring or regex)
function filterByName(pattern, useRegex) {
  // Clear other filters but keep the input value
  activeFilter = null;
  activePartFilter = null;
  document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
  
  if (!pattern || pattern.trim() === '') {
    // Empty pattern - show all
    activeNameFilter = null;
    getFormBlocks().forEach(b => b.classList.remove('hidden'));
    const status = document.querySelector('.filter-status');
    status.classList.remove('active');
    document.querySelector('.controls-left').style.transform = '';
    return;
  }
  
  activeNameFilter = pattern;
  
  let matcher;
  let isValidRegex = true;
  
  if (useRegex) {
    try {
      matcher = new RegExp(pattern, 'i');
    } catch (e) {
      // Invalid regex - show error in status and don't filter
      showFilterStatus(`Invalid regex: ${e.message}`);
      return;
    }
  } else {
    // Plain substring match (case-insensitive)
    const lowerPattern = pattern.toLowerCase();
    matcher = { test: (s) => s.toLowerCase().includes(lowerPattern) };
  }
  
  const blocks = getFormBlocks();
  let visibleCount = 0;
  
  blocks.forEach(block => {
    const definesName = block.dataset.defines || '';
    if (matcher.test(definesName)) {
      block.classList.remove('hidden');
      visibleCount++;
    } else {
      block.classList.add('hidden');
    }
  });
  
  // Update status
  const modeText = useRegex ? 'regex' : 'name';
  showFilterStatus(`Filtering by ${modeText}: "${pattern}" (${visibleCount} matches)`);
}

// Click on a name to show what references it
function handleNameClick(symName) {
  if (activeFilter === symName) {
    clearFilter();
  } else {
    filterBySymbol(symName, true);
  }
}

// Navigate to a definition (same file or different)
function navigateTo(symName, file) {
  if (file) {
    // External file - navigate
    window.location.href = file + '.html#def-' + symName.toLowerCase();
  } else {
    // Same file - scroll
    const target = document.getElementById('def-' + symName.toLowerCase());
    if (target) {
      target.scrollIntoView({ behavior: 'smooth', block: 'center' });
      target.classList.add('highlight');
      setTimeout(() => target.classList.remove('highlight'), 400);
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  // Part buttons
  document.querySelectorAll('.part-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const formId = btn.closest('.form-block').id;
      const partName = btn.dataset.part;
      if (activePartFilter && activePartFilter.formId === formId && 
          activePartFilter.partName === partName) {
        clearFilter();
      } else {
        filterByPart(formId, partName);
      }
    });
  });
  
  // Clear filter button
  document.querySelector('.clear-filter').addEventListener('click', clearFilter);
  
  // Name filter input
  const nameFilter = document.getElementById('name-filter');
  const regexToggle = document.getElementById('regex-toggle');
  
  let filterTimeout = null;
  nameFilter.addEventListener('input', () => {
    // Debounce the filter to avoid excessive updates while typing
    clearTimeout(filterTimeout);
    filterTimeout = setTimeout(() => {
      filterByName(nameFilter.value, regexToggle.checked);
    }, 150);
  });
  
  // Re-filter when regex toggle changes
  regexToggle.addEventListener('change', () => {
    if (nameFilter.value) {
      filterByName(nameFilter.value, regexToggle.checked);
    }
  });
  
  // Allow Escape key to clear filter when in input
  nameFilter.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      clearFilter();
      nameFilter.blur();
    }
  });
  
  // Symbol references (old span-based refs)
  document.querySelectorAll('.sym-ref').forEach(ref => {
    ref.addEventListener('click', (e) => {
      e.stopPropagation();
      const sym = ref.dataset.sym;
      const file = ref.dataset.file;
      if (file) {
        navigateTo(sym, file);
      } else {
        handleNameClick(sym);
      }
    });
  });
  
  // Symbol links (new anchor-based links)
  // These use standard <a> tags so navigation happens automatically
  // But we need to clear filters if target would be hidden
  document.querySelectorAll('.sym-link').forEach(link => {
    link.addEventListener('click', (e) => {
      const href = link.getAttribute('href');
      if (href && href.startsWith('#')) {
        // Local link - check if target is hidden by filter
        const targetId = href.substring(1);
        const target = document.getElementById(targetId);
        if (target) {
          // If target is hidden, clear the filter first
          if (target.classList.contains('hidden')) {
            clearFilter();
          }
          // Add highlight effect after a short delay
          setTimeout(() => {
            target.classList.add('highlight');
            setTimeout(() => target.classList.remove('highlight'), 400);
          }, 100);
        }
      }
      // For external links, default behavior handles navigation
    });
  });
  
  // Form names (show what uses them)
  document.querySelectorAll('.form-name').forEach(name => {
    name.addEventListener('click', (e) => {
      handleNameClick(name.dataset.sym);
    });
  });
  
  // Handle hash navigation (when arriving at page with #anchor)
  if (window.location.hash) {
    const target = document.querySelector(window.location.hash);
    if (target) {
      setTimeout(() => {
        target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        target.classList.add('highlight');
        setTimeout(() => target.classList.remove('highlight'), 400);
      }, 200);
    }
  }
  
  // Initialize theme from storage
  setTheme(getStoredTheme());
  
  // Initialize font size from storage
  currentFontSize = getStoredFontSize();
  setFontSize(currentFontSize);
  
  // Theme toggle button
  document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
  
  // Font size buttons
  document.getElementById('font-larger').addEventListener('click', increaseFontSize);
  document.getElementById('font-smaller').addEventListener('click', decreaseFontSize);
});

</script>

</body>
</html>